---
title: "CHAPTER 3-10 フォーム その1"
---

# <span class="number">10</span> フォーム その1

ブラウザーには、ユーザーが入力したデータをウェブサーバーに送信する機能があり、HTMLには、その入力と送信のための要素が用意されています。ここでは、入力フォームの基礎となる`form`要素と`input`要素について説明します。

## フォーム概説

ウェブコンテンツの中には、ユーザーによる入力を受け付けるものがあります。[01]は、本書で何度か紹介しているHTMLチェッカー「Nu Html Checker」[^1]の画面です。

[^1]: Nu Html Checker\
<https://validator.w3.org/nu/>

<figure>
<figcaption>[01] Nu Html Checker</figcaption>
<img src="../image/C3_10_01_1C.png" alt="" />
</figure>

この画面では、ユーザーがチェック対象のURLを入力します。また、オプションとして何を表示するのかをチェックボックスで選択できます。さらに、チェック方法も選択できます。一通りの入力と選択を終えたあと、checkボタンを押すとチェックが行われます。

このように、テキストを入力したり、選択肢を選んだりしてから送信ボタンを押すという一連の操作を提供するもの全体を「フォーム(form)」と呼びます[^2]。

[^2]: フォームは、「入力フォーム」と呼ばれることもあります。

フォームの中には、テキスト入力欄やラジオボタンなどのさまざまな部品が置かれます。ユーザーはこれらを操作して、値を入力したり、設定したりします。このような、*ユーザーが値を入力・設定するための部品を「フォームコントロール(form control)」と呼びます[^3]。*

[^3]: フォームコントロールは、単に「コントロール」と呼ばれることもあります。「ウィジェット(widget)」と呼ばれることもありますが、ウィジェットの方が広い概念で、フォーム入力の操作に限らない、より複雑なインターフェイスも含みます。

ほとんどのフォームでは、ユーザーが入力・設定した値を、最終的にサーバーに向けて「送信(submit)」します。この送信を行うボタンを「送信ボタン(submit button)」と呼びます。多くのフォームでは、ユーザーが送信ボタンを押すまで情報がサーバーに送信されることはなく、送信する前であれば入力内容を自由に修正できます。

HTMLには、フォームやフォームコントロール表現する要素が多数用意されており、これらを利用することで、基本的なフォームを表現できます。

## <a id="form-element">`form`要素</a>

*`form`要素は、フォーム全体を表します。*[02]は簡単な検索フォームの例です。表示例は[03]のようになります。

<figure>
<figcaption>[02] 検索フォームを表す`form`要素の記述例</figcaption>
```html
<form method="get" action="/search.cgi">
  <input type="text" name="k">
  <button>検索</button>
</form>
```
</figure>

<figure>
<figcaption>[03] ブラウザーによる 02 の表示例</figcaption>
<img src="../image/C3_10_03_1C.png" alt="" />
</figure>

### 内容モデル

`form`要素の内容モデルはFlowです。フォームコントロール以外にも、見出し、説明文、テーブルなど、さまざまな要素を入れることができます。ただし、子孫要素に`form`要素を入れ子にはできません[^4]。

[^4]: フォーム内に複数のボタンがあり、ボタンによってフォームの送信先を変えたいような場合は、`form`要素を入れ子にするのではなく、ボタンに`formaction`属性を指定します。

### 属性

`form`要素にはフォーム送信の制御に関する属性がいくつかあります。また、下記の他に`autocomplete`属性を指定できます。`autocomplete`属性については、後述の[フォームコントロールの共通属性<!--(P233)-->]form-common-attributes)を参照してください。

#### `method`属性

`method`属性でフォーム送信時の送信方法を指定します。`method`属性は列挙型属性で、`get`、`post`、`dialog`のいずれかを指定します。

##### `get`

`get`を指定すると、入力内容はHTTPのGETメソッドで送信されます。フォームに入力されたデータは、URLのクエリーに付与されます。HTTPのメソッドについては[CHAPTER 1-6](1-6.xhtml)を、URLのクエリーについては[CHAPTER 1-5](1-5.xhtml)を参照してください。

URLのクエリーに付与される値は、`application/x-www-form-urlencoded`のアルゴリズムでシリアライズ[^5]されます。詳細は後述の`enctype`属性で説明します。たとえば、[02]に「テスト」と入力した場合、[04]のようなURLにアクセスします。

[^5]: WORD: シリアライズ\
メモリー上のオブジェクトや構造化されたデータなどを、ネットワーク上での転送に適した形式に変換すること。ここでは、複数のフォームコントロールのデータを単一の文字列に変換することを指す。

<figure>
<figcaption>[04] [02]のフォームに「テスト」と入力した場合のアクセス先URL</figcaption>
```text
/search.cgi?k=%E3%83%86%E3%82%B9%E3%83%88
```
</figure>

`method`属性を省略した際のデフォルトの値は`get`です。`method`属性を省略しても、フォームの送信は行われることに注意してください。フォームの入力内容をサーバーに送信する必要がない場合、JavaScriptでフォームの送信を明示的に抑制しないと、意図しないデータ送信が行われることがあります。

##### `post`

`post`を指定すると、入力内容がHTTP POSTメソッドで送信されます。この場合、入力された値はHTTPリクエストのリクエストボディに含まれます。HTTPのメソッドについては[CHAPTER 1-6](1-6.xhtml)を、リクエストボディのデータ形式については、後述の`enctype`属性を参照してください。

##### `dialog`

`dialog`を指定した場合、入力内容はサーバーに対して送信されません。これは`dialog`要素と組み合わせて使用するもので、入力内容は主にJavaScriptで取得します。`method="dialog"`のフォームを送信すると、対応するダイアログが閉じられると同時に、フォーム入力の内容を`dialog`要素の`returnValue`プロパティから読み取れるようになります。使用例は[CHAPTER 3-12の`dialog`要素](3-12.xhtml#dialog-element)を参照してください。

#### `action`属性

`action`属性は、フォーム送信時の送信先となるURLを指定します。`action`属性を指定していない場合は、フォームが置いてあるページ自身が送信先となります[^6]。`action`属性がなくても送信が行われることに注意してください。

[^6]: `action`属性には空の値(`action=""`)を指定できず、構文エラーとなります。この場合もエラー処理の結果として、フォームが置いてあるページ自身が送信先となります。フォーム送信時の処理の詳細は、HTML仕様の「4.10.21.3 Form submission algorithm」を参照してください。\
<https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#form-submission-algorithm>

#### `enctype`属性

`enctype`属性を指定すると、`method="post"`でフォーム送信するときのリクエストボディの形式を指定できます。`enctype`属性は列挙型属性で、以下のいずれかを指定します[^7]。

- `application/x-www-form-urlencoded`
- `multipart/form-data`
- `text/plain`

[^7]: 通常は`application/x-www-form-urlencoded`を利用し、ファイル送信が必要な場合には`multipart/form-data`を利用します。`text/plain`を利用することはほとんどありません。

省略時の*デフォルト値は`application/x-www-form-urlencoded`です。*

##### `application/x-www-form-urlencoded`

`application/x-www-form-urlencoded`は、フォームコントロールの名前と値のペアをURLエンコードして連結したもので、フォーム送信ではもっともよく利用される形式です[^8]。

[^8]: `application/x-www-form-urlencoded`はURL Standardで定義されています。\
<https://url.spec.whatwg.org/#application/x-www-form-urlencoded>

たとえば、[02]の検索フォームで、`name="k"`が与えられた入力欄に「テスト」と入力した場合は、[05]の上のような形式になります。名前と値のペアが複数ある場合は[05]の下のように`&`で連結します。

<figure>
<figcaption>[05] `application/x-www-form-urlencoded`形式の例</figcaption>
```text
k=%E3%83%86%E3%82%B9%E3%83%88

name1=value1&name2=value2&
```
</figure>

##### `multipart/form-data`

`multipart/form-data`は、入力項目それぞれを「バウンダリー(boundary)」[^9]で区切った形式で、*主にフォームからファイルを送信する際に利用します[^10]。*たとえば[06]のような形式になります。

[^9]: `boundary`は境界線という意味の英単語です。[06]の場合は`"--"`で始まる行がバウンダリーとなります。

[^10]: `multipart/form-data`の仕様はRFC 7578で定義されています。\
RFC 7578\
<https://www.rfc-editor.org/rfc/rfc7578>

<figure>
<figcaption>[06] `multipart/form-data`形式の例</figcaption>
```text
------WebKitFormBoundarygOTbtF2D0Y0ZT1Ak
Content-Disposition: form-data; name="name1"

value1
------WebKitFormBoundarygOTbtF2D0Y0ZT1Ak
Content-Disposition: form-data; name="name2"

value2
------WebKitFormBoundarygOTbtF2D0Y0ZT1Ak--
```
</figure>

##### `text/plain`

`text/plain`は、単純に名前=値のペアを改行(CR+LF)で区切った形式です[^11]。たとえば[07]のようになります。

[^11]: `text/plain`は簡素で人間にも読みやすい形式ですが、現在ではほとんど使われていません。かつては、`mailto`スキームのURLと組み合わせてメール送信に利用されたこともありました。

<figure>
<figcaption>[07] `text/plain`形式の例</figcaption>
```text
name1=value1
name2=value2
```
</figure>


#### `target`属性、`rel`属性

`form`要素にも`target`属性や`rel`属性を指定できます。これらは`a`要素の同名の属性と同じものです。[CHAPTER 3-6](3-6.xhtml)を参照してください。

`rel`属性には基本的に`a`要素と同じリンクタイプを指定できますが、`form`要素の場合にはリンクタイプ`alternate`、`author`、`bookmark`、`tag`を利用できません。

#### `novalidate`属性

`novalidate`属性を指定すると、フォーム送信時の入力値の検証が無効になります。`novalidate`属性はブール型属性です。

特定の形式の値のみを許すフォームコントロール(`type=email`など)や、`required`属性、`pattern`属性などで値が制限されている場合、「クライアント側フォーム検証(Client-side form validation)」が行われ、条件を満たしていないとエラーとなります[^12]。

[^12]: クライアント側フォーム検証の詳細は、HTML仕様の「4.10.1.4 Client-side form validation」を参照してください。\
<https://html.spec.whatwg.org/multipage/forms.html#client-side-form-validation>

`novalidate`属性を指定すると、入力時の検証を無効にし、無条件でフォーム送信ができるようになります。

#### `name`属性

`form`要素に`name`属性を指定すると、フォームに名前を付けられます。この名前は、JavaScriptから参照する際に利用できます。フォームコントロールの`name`属性と異なり、フォーム送信時にこの名前がデータとして送信されることはありません。

#### `accept-charset`属性

古いHTML4では、`accept-charset`属性を指定してフォーム送信時の文字エンコーディングの候補を指定できました。

この属性は現在のHTMLでも定義されていますが、現在のHTML仕様では、UTF-8以外は指定できません。属性の省略時もUTF-8を指定したことになります。現在ではこの属性を利用する意義はありません。

### アクセシビリティ上の注意点

`form`要素のデフォルトのARIAロールはありません。ただし、フォームにアクセシブルな名前が付けられていれば`form`ロールとなります。

フォームが検索フォームである場合、`search`ロールを指定することで、検索フォームであることを明示できます[^13]。

[^13]: 2021年現在、`search`ロールに対応する`search`要素が提案されています。\
<https://github.com/whatwg/html/pull/7320>

なお、`form`ロールや`search`ロールはランドマークロールです。ただし、多くのスクリーンリーダーはフォームを扱う専用の機能を持っており、ランドマークロールがなくてもフォームに飛ぶことが可能です。無理にロールを与える必要はないでしょう。

## <a id="label-element">`label`要素</a>

`label`要素は、ユーザーインターフェイスのキャプションを表す要素で、フォームコントロールにラベルを付けることができます。

単にフォームコントロールの横にテキストを置いた場合、人間にはラベルのように見えても、ブラウザーにはラベルであることが伝わりません。*`label`要素を利用すると、ラベルとフォームコントロールとを明確に関連付けることができ、プログラムによる解釈を可能にします。*

ほとんどのブラウザーでは、`label`要素のラベルをクリックすると、対応するフォームコントロールにフォーカスが当たります。また、対応するフォームコントロールにフォーカスが当たった際、スクリーンリーダーは対応する`label`要素を読み上げます。

`label`要素でラベルを付けられる要素を「ラベル付け可能要素(labelable element)」と呼びます。具体的には、以下の要素が該当します[^14]。

[^14]: このほか、カスタム要素を定義して`formAssociated`プロパティを`true`に設定した場合も、ラベル付け可能要素として扱われます。カスタム要素については[CHAPTER 3-13](3-13.xhtml)を参照してください。

- `button`要素
- `input`要素(ただし、`type="hidden"`のものを除く)
- `meter`要素
- `output`要素
- `progress`要素
- `select`要素
- `textarea`要素

`label`要素とラベル付け可能要素を結び付ける方法は2種類あります。詳細は、後述の内容モデルと`for`属性でそれぞれ説明します。

### 内容モデル

`label`要素の内容モデルはPhrasingです。ただし、`label`要素を子孫に含むことはできません。また、ラベル付け可能要素を子孫に含む場合は、この`label`要素と関連付けられる必要があります。別の`label`要素と関連付けられたラベル付け可能要素を子孫に含めることはできません[^15]。

[^15]: 1つの`label`要素を複数のラベル付け可能要素に関連付けることはできません。`label`要素の子孫にラベル付け可能要素が複数出現した場合はエラーとなり、エラー処理の結果として、最初に出現したラベル付け可能要素だけに結び付けられます。

内容モデルがFlowではないことに注意してください。`h1`などの見出しや、`div`要素、`p`要素などを入れることはできません。内容にラベル付け可能要素が含まれている場合、`label`要素はその要素に結び付けられます。

[08]では、入力欄に「クエリー:」というラベルが結び付けられます。

<figure>
<figcaption>[08] 入力欄に「クエリー:」ラベルが結び付けられた例</figcaption>
```html
<label>クエリー: <input name="q" type="text"></label>
```
</figure>

### 属性

`label`要素には`for`属性があり、フォームコントロールとの結び付けに使用します。

#### <a id="for-attribute">`for`属性</a>

[09]のようにラベル付け可能要素に`id`属性でIDを指定している場合、`label`要素の`for`属性にそのIDを指定すると、ラベルと結び付けることができます。

<figure>
<figcaption>[09] `label`要素の`for`属性と`input`要素の`id`属性で関連付けた例</figcaption>
```html
<label for="q">クエリー: </label>
<input name="q" id="q" type="text">
```
</figure>

[10]のように`label`要素の中に入れる方法と併用しても問題ありません。

<figure>
<figcaption>[10] `for`属性と`id`属性の関連付けと、要素の入れ子の関連付けを併用した例</figcaption>
```html
<label for="q">クエリー: <input name="q" id="q" type="text"></label>
```
</figure>

この場合、両方が同じ要素を指すようにしなければなりません。[11]は構文エラーとなる例です。

<figure>
<figcaption>[11] 構文エラーだが結果として`for`属性の指定が優先される例</figcaption>
```html
<label for="text2">Query: <input id="text1"></label>
<input id="text2">
```
</figure>

この場合、エラー処理の結果として`for`属性による指定が優先され、`<input id="text1">`はラベルを持たない状態になります。`for`属性による指定と子孫要素による指定を混在させると混乱のもとになるため、どちらかに統一するとよいでしょう。

`for`属性を利用すると、ラベル付け可能要素を`label`要素の中に入れる必要はないため、配置の自由度が増します。ただし、`id`属性はページ内で一意でなければならないため、ラベル付け可能要素が複数ある場合、`id`属性はそれぞれ異なる値にする必要があります。フォームコントロールが増減するような場合は扱いに注意が必要です。

[12]のように、1つのラベル付け可能要素に複数の`label`要素を関連付けることも可能です。この場合、`<input id="text1">`に対して3つのラベルが結び付けられ、ラベル1、ラベル2、ラベル3の順に読み上げることが期待されます。

<figure>
<figcaption>[12] `for`属性で複数の`label`要素を関連付けた例</figcaption>
```html
<label>ラベル1<input id="text1"></label>
<label for="text1">ラベル2</label>
<label for="text1">ラベル3</label>
```
</figure>

### アクセシビリティ上の注意点

`label`要素にデフォルトのARIAロールはありません。

`label`要素をラベル付け可能要素に結び付けると、そのラベル付け可能要素のラベルとして扱われます。スクリーンリーダーでフォームを操作する際、*ラベルが適切に設定されていないと入力欄が何かわからないことがあるため、適切なラベルを必ず設定しましょう。*また、ラベルをクリックすると対応するフォームコントロールにフォーカスを移せるため、細かなマウス操作が難しいユーザーにも役立ちます[^17]。

[^17]: ラベルをフォームコントロールと関連付けることはきわめて重要で、WCAG 2.1の複数の達成基準と関連します。達成基準 1.3.1「情報及び関係性」、3.3.2「ラベル又は説明」、2.5.3「名前(name)のラベル」、2.4.6「見出し及びラベル」を参照してください。\
Success Criterion 1.3.1 Info and Relationships\
<https://www.w3.org/TR/ WCAG21#info-and-relationships>\
\
Success Criterion 3.3.2 Labels or Instructions\
<https://www.w3.org/TR/WCAG21/#labels-or-instructions>\
\
Success Criterion 2.5.3 Label in Name\
<https://www.w3.org/TR/WCAG21/#label-in-name>\
\
Success Criterion 2.4.6 Headings and Labels\
<https://www.w3.org/TR/WCAG21/#headings-and-labels>

`label`要素を利用する際は、ラベル付け可能要素との結び付けができているか確認しましょう。[13]のようにラベル付け可能要素と結び付いていない`label`要素が存在しても、語彙的ルールの観点では問題なく、構文エラーにはなりません。

<figure>
<figcaption>[13] `label`要素の子孫要素にラベル付け可能要素がない場合</figcaption>
```html
<!-- label要素が結び付けられていない -->
<label>名前</label>
<input name="name" type="text">
```
</figure>

`for`属性値の誤りで入力欄との結び付けに失敗している例もよく見かけます。[14]のように、`for`属性が存在しない`id`属性を参照している場合は構文エラーになります。

<figure>
<figcaption>[14] `for`属性の誤りで結び付けに失敗している例</figcaption>
```html
<!-- for属性に指定したidが間違っている -->
<label for="name">メールアドレス</label>
<input name="email" id="email" type="email">
```
</figure>

しかし、`id`属性が存在している場合、それが間違っていても構文エラーにならないので注意が必要です。[15]の例では、2番目の`label`要素の`for`属性の値が間違っています。

<figure>
<figcaption>[15] 誤って別の要素の`id`属性を指定した場合</figcaption>
```html
<!-- このlabel要素は問題ない -->
<label for="name">名前</label>
<input name="name" id="name" type="text">

<!-- 上のlabelをコピーし、for属性を直し忘れた -->
<label for="name">メールアドレス</label>
<input name="email" id="email" type="email">
```
</figure>

[15]の場合、2つのラベルが両方とも最初の入力欄に結び付きます。構文上は正しいため、HTMLチェッカーでは誤りを検出できないことに注意してください。

## <a id="input-element">`input`要素</a>

`input`要素は、データの入力や編集をするフォームコントロールを表します。*`input`要素が何を表し、どのように動作するかは、`type`属性の値によって大きく変わります。*

### <a id="text-search-type">1行テキスト入力: `text`と`search`</a>

`type=text`と`type=search`は、1行のプレーンテキスト編集コントロールを表します。[16]は`type=search`を使用した例です。

<figure>
<figcaption>[16] `type=search`の例</figcaption>
```html
<label>検索キーワード: <input name="q" type="search"></label>
```
</figure>

`type=text`と`type=search`は1行の入力欄であるため、改行は入力できません。`value`属性で初期値を指定できますが、`value`属性の値に改行が含まれている場合はエラーとなり、結果として改行文字は取り除かれます。

*`type=text`と`type=search`の違いは、検索に適したインターフェイスを提供するかどうかです。*`type=search`を解釈するブラウザーは、入力ボックスの端に×印のアイコンを表示し、入力欄をクリアする機能を提供することがあります。[17]のように、入力完了ボタンのラベルが「検索」に変化することもあります。

<figure>
<figcaption>[17] モバイルブラウザーによる`type=search`が使用されたサイトの表示例</figcaption>
<img src="../image/C3_10_17_1C.png" alt="" />
</figure>

#### アクセシビリティ上の注意点

`type=text`の場合、デフォルトのARIAロールは`textbox`です。スクリーンリーダーは「エディット」「テキストを編集」などと読み上げたあと、現在入力されている値を読み上げます。空欄になっている場合は、「ブランク」と読み上げることがあります[^18]。

[^18]: 入力欄が空欄で、かつ`placeholder`属性が指定されている場合は、その値を読み上げることもあります。[`placeholder`属性<!--(P233)-->](#placeholder属性)を参照してください。

`type=search`の場合、デフォルトのARIAロールは`searchbox`です。基本の挙動は変わりませんが、スクリーンリーダーは「検索テキスト欄」などと読み上げる場合があります。

なお、有効な`list`属性が指定されている場合には、デフォルトのARIAロールは`combobox`となります。後述の[`list`属性<!--(P232)-->](#list-attribute)を参照してください。

### 電話番号の入力: `tel`

`type=tel`は、電話番号の入力や編集をするコントロールを表します。改行が入力できない点も含め、`type=text`の入力欄とほとんど同じですが、電話番号の入力に適した機能を提供します。スマートフォンに搭載されるモバイルブラウザーでは、電話番号の入力に最適化された専用のキーパッドを提供することがあります。

後述の`type=url`や`type=email`と異なり、デフォルトでは入力値の検証が行われません。電話番号にはさまざまなパターンがあり、「-」、「*」、「#」が入力されるケース、国番号(日本の場合 +81)を表す「+」が入力されるケースがあるほか、海外では電話番号にアルファベットを含むこともあります。こういった事情から、*`type=tel`は改行以外のあらゆる文字を受け入れます。厳密な入力の値検証が必要な場合は、後述の`pattern`属性と併用するとよいでしょう。*

#### アクセシビリティ上の注意点

`type=tel`の場合、デフォルトのARIAロールは`textbox`です。有効な`list`属性が指定されている場合には、デフォルトのARIAロールは`combobox`となります。後述の[`list`属性](#list-attribute)を参照してください。

スクリーンリーダーは`type=text`の入力欄と同様に読み上げ、電話番号の入力欄であることを伝えない場合があります。電話番号の入力欄であることがわかるラベルを関連付けておくとよいでしょう。

### URLの入力: `url`

`type=url`は、*絶対URLの入力や編集をするコントロールを表します。*URLについては[CHAPTER 1-5](1-5.xhtml)を参照してください。

改行が入力できない点も含め、`type=text`の入力欄とほとんど同じですが、URLの入力に適した機能を提供します。ブラウザーはURLの入力補助のために補完候補を出したり、URLの入力に最適化された専用のキーパッドを表示することもあります。

`type=url`の入力欄では、フォーム送信時に入力値の検証が行われます。空でない値が入力されている場合には、*絶対URLの形式になっている必要があります[^19]。*そうでない場合、フォーム送信をしようとすると[18]のようにエラーメッセージが表示され、送信できません。

[^19]: URLの値の前後にはASCII空白文字が許されており、ASCII空白文字が入っていた場合は自動的に取り除かれます。

<figure>
<figcaption>[18] `type=url`のエラーメッセージの例</figcaption>
<img src="../image/C3_10_18_1C.png" alt="" />
</figure>

`value`属性で初期値を指定できますが、この場合も絶対URLの形式になっている必要があります。

URLのスキームがHTTPやHTTPSに限られないことに注意してください。スキームが適切であるかどうかを問わないため、未知のスキームも受け付けます。たとえば、"a:"という値は適切な絶対URLとみなされます。`:`(コロン)を含む文字列はほぼすべて許可してしまうため、厳密な入力値の検証が必要な場合は、後述の[`pattern`属性<!--(P231)-->](#pattern-attribute)を併用するとよいでしょう

### アクセシビリティ上の注意点

`type=url`の場合、デフォルトのARIAロールは`textbox`です。有効な`list`属性が指定されている場合には、デフォルトのARIAロールは`combobox`となります。後述の[`list`属性](#list属性)を参照してください。

スクリーンリーダーは`type=text`の入力欄と同様に読み上げ、URLの入力欄であることは伝えない場合があります。URLの入力欄であることがわかるようなラベルを関連付けておくとよいでしょう。

### 電子メールアドレスの入力: `email`

`type=email`は、電子メールアドレスの入力や編集をするコントロールを表します。

`type=email`の入力欄では、フォーム送信時に入力値の検証が行われます。空でない値が入力されている場合には、適切な電子メールアドレスの形式である必要があります[^20]。そうでない場合、フォーム送信をしようとするとエラーメッセージが表示され、送信できません。

[^20]: メールアドレスの値の前後にはASCII空白文字が許されており、ASCII空白文字が入っていた場合は自動的に取り除かれます。

この検証で許される電子メールアドレスの形式は、電子メールに関するルールを定めるRFC 5322の仕様とは異なります。これは「意図的な逸脱(willful violation)」です。たとえば、RFC 5322では電子メールアドレス内のコメントが許可されていますが、`type=email`の検証ではコメントを含むメールアドレスはエラーとなります[^21]。`type=url`の場合と同様、後述の`pattern`属性との併用も可能です。

[^21]: 検証ルールの詳細は、仕様の 「valid email address」を参照してください。\
valid email address\
<https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address>

`type=email`の入力欄には、`multiple`属性を指定できます。`multiple`属性が指定されていると、複数のメールアドレスをカンマ区切りで列挙して入力できるようになります。

#### アクセシビリティ上の注意点

`type=email`の場合、デフォルトのARIAロールは`textbox`です。有効な`list`属性が指定されている場合には、デフォルトのARIAロールは`combobox`となります。後述の[`list`属性<!--(P232)-->](#list-attribute)を参照してください。

スクリーンリーダーはtype=textの入力欄と同様に読み上げ、電子メールアドレスの入力欄であることは伝えない場合があります。電子メールアドレスの入力欄であることがわかるようなラベルを関連付けておくとよいでしょう。

## センシティブな値の入力: `password`

*`type=password`は、パスワードのようなセンシティブな値を入力するコントロールを表します。*`type=text`と異なるのは、入力した値が伏せられ、ユーザーから直接見えなくなることが期待される点です。これは、人がパスワードなどを盗み見する「ショルダーハック」を防ぐためとされています。

ただし、モバイルデバイスなどでは、入力中の1文字が見ることがあります。また、ブラウザーによっては、ユーザーの操作で値を表示できる機能を持つ場合もあります。

`type=password`の入力欄では、`autocomplete`属性の挙動が他の入力欄と異なる場合があります。詳しくは[`autocomplete`属性<!--(P236)-->](#autocomplete-attribute)を参照してください。

### アクセシビリティ上の注意点

`type=password`の場合、デフォルトのARIAロールはありません。スクリーンリーダーは「パスワード」「保護されたテキスト」などと読み上げる場合があります。

入力された値を読み上げるかどうかはスクリーンリーダーの設定に依存します。視覚的には隠されていても、スクリーンリーダーは読み上げることがあるので注意が必要です。

### 日付および時刻の入力: `month`、`week`、`date`、`time`、`datetime-local`

`type`属性に以下の値を指定することで、日付や時刻を入力するコントロールを表現できます。

- `type=month`: 年と月
- `type=week`: 年と週番号
- `type=date`: 年月日
- `type=time`: 時刻
- `type=datetime-local`: 日付と時刻

これらの値を入力する*インターフェイスは、ブラウザーによってさまざまです。*日付入力の場合、多くのブラウザーでは[19]のようなカレンダーが表示され、カレンダーから日付を選択できます[^22][^23]。

[^22]: ほとんどのブラウザーでは、初期状態で現在の日付が選択されています。現在日時とかけ離れた日付を入力する場合、日付の選択に大変な労力がかかる場合があるため注意が必要です。後述する[`min`属性および`max`属性<!--(P232)-->](#min-max-attribute)で日付の範囲を制限すると、使いやすくなる場合があります。

[^23]: 特に問題になりやすいのは、生年月日を入力する場合です。カレンダーコントロールのほとんどは年を選択する機能を持ち、キーボードでの直接入力も可能ですが、使い方がわかりやすいとはいえません。生年月日は`type=text`で入力させたほうがよいという考え方もあるでしょう。

<figure>
<figcaption>[19] ブラウザーの日付や時刻を入力するインターフェイス</figcaption>
<img src="../image/C3_10_18_1C.png" alt="" />
</figure>

`step`属性で値の間隔を指定できます。[20]では、10時から20時までの時刻を15分刻みの単位で指定する例です。

<figure>
<figcaption>[20] `step`属性の記述例</figcaption>
```html
<input type="time" min="10:00" max="20:00" step="900">
```
</figure>

時刻の場合、`step`属性の値は秒単位で指定します。デフォルトの間隔は60秒(1分)です。この例では値を900とすることで、900秒=15分を指定しています。

フォーム送信時には、フォームコントロールに応じた、HTML仕様で定義される日時形式の値を送ります[^24]。たとえば、2020年11月29日15時40分は[21]のようになります。

[^24]: 日時形式の詳細については、[CHAPTER 2-2](2-2.xhtml)を参照してください。

<figure>
<figcaption>[21] 日付と時刻を入力した際に送信される値の例</figcaption>
```html
2020-11-29T15:40
```
</figure>

### アクセシビリティ上の注意点

`type=month`、`week`、`date`、`time`、`datetime-local`はいずれも、デフォルトのARIAロールはありません。

このコントロールの表現方法はブラウザーによってさまざまであり、スクリーンリーダーによる読み上げや操作方法もさまざまです。カレンダーが表示される場合、カレンダーを`table`要素のようにテーブルとして読み上げることもあります。

## 数値の入力: `number`

`type=number`は、ユーザーに数値を入力させるコントロールを表します。ブラウザーは、数値を入力するのに適した機能を提供することがあります。たとえば、数字のみを入力できるキーパッドを表示したり、[22]のように、数値を増減させるためのスピンボタンを表示する場合があります。

<figure>
<figcaption>[22] ブラウザーのスピンボタンの表示例</figcaption>
<img src="../image/C3_10_22_1C.png" alt="" />
</figure>

入力できる値は、HTML仕様で定義される「妥当な浮動小数点数(valid floating-point number)」です。数字以外の文字も入力できることに注意してください。小数を表す`.`(ピリオド)や、`+`や`-`の正負符号も入力可能です。3.14e+20のような指数表記も可能で、`e`と`E`が入力できます。

デフォルトではあらゆる数値を入力できますが、`min`属性、`max`属性、`step`属性を利用すると、値の範囲を指定できます。たとえば、1~100の整数を入力させたい場合は、[23]のようにします。

<figure>
<figcaption>[23] 1~100の整数を入力させたい場合の記述例</figcaption>
```html
<input type="number" min="1" max="100" step="1" value="1">
```
</figure>

`min`属性や`max`属性には負の数も指定可能です。-1~1の数値を0.01刻みで入力させたい場合は、[24]のようになります。

<figure>
<figcaption>[24] -1~1の値を0.01刻みで入力させたい場合の記述例</figcaption>
```html
<input type="number" min="-1" max="1" step="0.01" value="0">
```
</figure>

*数字で表現されているものが、必ずしも数値とはならないことに注意してください。*たとえば、ID番号、郵便番号、クレジットカード番号などは数字で表現されてはいますが、数値を増減させるような操作にはなじみません。そのような数字を入力させる場合は、`type=text`が適しています[^25]。

[^25]: `type=number`を使用する目安としては、スピンボックスで値を増減することが適切かどうかを考えるのがよいでしょう。

`type=number`の入力欄では、フォーム送信時に入力値の検証が行われます。空でない値が入力されている場合には、浮動小数点数の形式となる必要があります。そうでない場合、フォーム送信をしようとするとエラーメッセージが表示され、送信できません。

値の先頭に符号が付いていたり、指数形式で入力していても、値は正規化されずにそのまま送られます。たとえば、`"+1e-3"`と入力されていた場合、これは`"0.001"`と同値ですが、`"+1e-3"`という文字列がそのまま送られます[^26]。

[^26]: 数字のみで構成された値を選択させたい場合は、`select`要素を検討するとよいでしょう。

#### `maxlength`属性と`size`属性の扱い

`input`要素に`type=number`を指定した場合、`maxlength`属性や`size`属性は指定できません(最大値を制限したい場合は、`max`属性を利用します)。

しかし、古いブラウザーは`type=number`を指定した`input`要素を`type=text`として扱うため、その場合は`maxlength`属性や`size`属性が有効になります。この互換性のため、これらの属性は旧式だが適合する機能として許容されています。

ただし、チェッカーは好ましくないものとして警告を出します。互換性の観点での必要性がない場合には、これらの属性は指定しないほうがよいでしょう。

### アクセシビリティ上の注意点

`type=number`の場合、デフォルトのARIAロールは`spinbutton`です。スクリーンリーダーは「スピンボタン」「ステッパー」などと読み上げることがあります。

## <a id="range-type">一定範囲内の数値を指定: `range`</a>

`type=range`は、一定範囲内の数値を指定するコントロールを表します。多くの場合、[26]のようにスライダーコントロールとして表現されます。スライダーでつまみを動かすインターフェイスであるため、*大まかな値を感覚的に指定しやすい反面、細かい値の正確な指定には向いていません。*

`type=number`と同様、`min`属性、`max`属性、`step`属性で値の範囲を指定できます。これらの指定がない場合は、`min=0`、`max=100`、`step=1`がデフォルトの値となります。

`datalist`要素と組み合わせると、スライダーに目盛りを付けることができます。目盛りがある場合、ブラウザーは目盛りに近い値を目盛りの値に合わせてくれる(目盛りにスナップさせる)ことがあります。[25]は、範囲が0~100、ステップが0.2のスライダーに、50ごとに目盛りを付ける例です。表示例は[26]のようになります。

<figure>
<figcaption>[25] スライダーに目盛りを付けた記述例</figcaption>
```html
<input id="range01" type="range" min="0" max="100" step="0.2" value="0" list="scale" />
<datalist id="scale">
<option>0</option>
<option>50</option>
<option>100</option>
</datalist>
```
</figure>

<figure>
<figcaption>[26] ブラウザーによる[25]の表示例</figcaption>
<img src="../image/C3_10_26_1C.png" alt="" />
</figure>

### アクセシビリティ上の注意点

`type=range`の場合、デフォルトのARIAロールは`slider`です。`slider`ロールは暗黙の`aria-orientation`の値`horizontal`を持ちます。これは、要素が水平方向の向きであることを表します。

スクリーンリーダーは「スライダー」などと読み上げることがあります。

## 色の選択: `color`

`type=color`は、色を選択するコントロールを表します。ブラウザーは[27]のようなカラーピッカーを提供することがあります。

<figure>
<figcaption>[27] ブラウザーのカラーピッカーの例</figcaption>
<img src="../image/C3_10_26_1C.png" alt="" />
</figure>

フォーム送信時には、「単純な色(simple color)」の値が送られます。これは*`#`(ハッシュ)で始まる6桁の16進数で表現されるRGB値です[^27]。*たとえば、`"#ff00a1"`のような値が送信されます。

[^27]: アルファチャンネル値(不透明度; opacity)は指定できません。ブラウザーによっては、HSLのような、RGBではない色指定方法のインターフェイスを採用することがあるかもしれませんが、その場合でも結果の値は常にRGBで送信されます。

### アクセシビリティ上の注意点

`type=color`の場合、デフォルトのARIAロールはありません。このコントロールの表現方法はブラウザーによってさまざまであり、スクリーンリーダーによる読み上げや操作方法もさまざまです。

## チェックボックス: `checkbox`

`type=checkbox`は、チェックボックスを表します。チェックボックスは、チェックされている状態と、チェックされていない状態を持ちます[^28]。典型的には、YES/NO、ON/OFF のような二択で選ぶ項目に使うことができます。[28]の例は、「利用規約に同意する」というラベルを伴うチェックボックスの例です。

[^28]: JavaScriptから`HTMLInputElement`インターフェイスの`indeterminate`プロパティを`true`にすると、未確定(indeterminate)状態にできます。こうすると、チェックボックスの現在の状態が表示されなくなります(オンともオフとも異なる見た目になります)。しかし、これが影響するのは見た目だけで、チェック状態や送信される値には影響しません。チェックボックスがチェックされたあとで`indeterminate`プロパティを`true`に設定しても、チェックが解除されるわけではなく、値がそのまま送信されます。

<figure>
<figcaption>[28] チェックボックスの例</figcaption>
```html
<label><input type="checkbox" name="agree">利用規約に同意する</label>
```
</figure>

また、[29]のように複数選択が可能な選択肢を提示する場合にも使うことができます。表示例は[30]のようになります。

<figure>
<figcaption>[29] 複数選択が可能なチェックボックスの記述例</figcaption>
```html
<fieldset>
<legend>所有している機器 (複数選択可能):</legend>
<label><input type="checkbox" name="gadget" value="desktop">デスクトップパソコン</label>
<label><input type="checkbox" name="gadget" value="laptop">ノートパソコン</label>
<label><input type="checkbox" name="gadget" value="smartphone">スマートフォン</label>
<label><input type="checkbox" name="gadget" value="tablet">タブレット</label>
</fieldset>
```
</figure>

<figure>
<figcaption>[30] ブラウザーによる[29]の表示例</figcaption>
<img src="../image/C3_10_30_1C.png" alt="" />
</figure>

フォームを送信する際、*チェックされているチェックボックスの`name`属性で指定した名前と`value`属性で指定した値が送られます。*なお、`value`属性が存在しない場合は`"on"`という値が送られます。チェックボックスがチェックされていない場合、フォームを送信してもその名前と値は送られません[^29]。

[^29]: たとえば、[29]の例で上2つのチェックボックスをチェックし、下2つをチェックしていない場合、`gadget=desktop&gadget=laptop`という値が送られます。

`checked`属性を指定すると、チェックされている状態が初期状態になります。`checked`属性はブール型属性です。`checked`属性が指定されていても、ユーザーはチェックを外すことができます。

### アクセシビリティ上の注意点

`type=checkbox`の場合、デフォルトのARIAロールは`checkbox`です。スクリーンリーダーは対応するラベルを読み上げたあと、「チェックボックス」などと読み上げます。チェックボックスがチェックされた状態であれば「チェックされています」などと読み上げて現在のチェック状態を伝えます。

## <a id="radio-type">ラジオボタン: `radio`</a>

`type=radio`は、ラジオボタンを表します。チェックボックスと同様に、チェックされている状態とチェックされていない状態を持ちますが、選択肢の中から1つのみを選択できるという点が異なります。

同一のフォーム内に、`name`属性の値が同一のラジオボタンが複数ある場合、それらは「ラジオボタングループ(radio button group)」を構成します。*同一のラジオボタングループに属するラジオボタンのうち、チェック状態にできるのは1つだけです。*チェックされていないラジオボタンをチェックすると、既にチェックされていたラジオボタンからはチェックが外れます[^30]。

[^30]: ユーザーの操作に限らず、DOM操作などでチェック状態にした場合も同様です。複数を同時にチェック状態にすることはできません。

[31]は性別を選択するラジオボタンの例です。表示例は[32]のようになります。

<figure>
<figcaption>[31] ラジオボタンの記述例</figcaption>
```html
性別:
<label><input type="radio" name="sex" value="1">男性</label>
<label><input type="radio" name="sex" value="2">女性</label>
<label><input type="radio" name="sex" value="9">その他</label>
<label><input type="radio" name="sex" value="0" checked>回答しない</label>
```
</figure>

<figure>
<figcaption>[32] ブラウザーによる[31]の表示例</figcaption>
<img src="../image/C3_10_32_1C.png" alt="" />
</figure>

`checked`属性を指定すると、初期状態でチェックされている状態になります[^31]。`checked`属性はブール型属性です。上記の例では、「回答しない」が選択された状態で表示されます。

[^31]: 同一ラジオボタングループ内の複数のラジオボタンに`checked`属性を指定した場合は、ソースコード内で最後に現れた項目だけがチェック状態となり、他の項目はチェックが外れた状態になります。

ラジオボタングループ内のどのラジオボタンにも`checked`属性がない場合、初期状態ではどのラジオボタンもチェックされていない状態になります[^32]。この場合、*一度でもラジオボタンがチェックされると、未選択状態に戻す手段がないことに注意が必要です[^33]。*

[^32]: 古いHTML仕様では、ラジオボタングループの中でいずれか1つのラジオボタンを必ずチェック状態にしておく必要があるとされていました。しかし、現在のHTML仕様にはそのような制限はなく、何も選択されていない状態を許しています。

[^33]: ラジオボタンを未選択に戻す必要がある場合は、そのような機能をJavaScriptなどで実装するか、リセットボタンを用意する必要があります。リセットボタンは、フォームの他の項目もすべてリセットすることに注意してください。

チェックボックスと同様に、フォームを送信したときは、チェックされている項目の`value`属性の値が送られます。また、`value`属性が指定されていない場合は、`"on"`という値が送られます。

#### アクセシビリティ上の注意点

`type=radio`の場合、デフォルトのARIAロールはradioです。スクリーンリーダーは対応するラベルを読み上げたあと、「ラジオボタン」などと読み上げ、ラジオボタンがチェックされた状態であれば「チェックされています」などと読み上げて現在のチェック状態を伝えます。

### ファイルアップロードコントロール: `file`

`type=file`は、ファイルアップロードコントロールを表します。ユーザーがこのコントロールを操作してローカルのファイルを指定すると、フォーム送信時にファイルの内容がサーバーに送られます[^34]。

[^34]: File APIを通じてJavaScriptからファイルの内容を読み取るという利用法もあります。\
MDNのウェブアプリケーションからのファイルの使用が参考になります。\
<https://developer.mozilla.org/ja/docs/Web/API/File_API/Using_files_from_web_applications>

ファイルアップロードを行うフォームでは、`form`要素の`enctype`属性値を`"multipart/form-data"`にします。`enctype`属性の詳細は[`form`要素の説明<!--(P210)-->](#form-element)を参照してください。最低限のファイルの送信フォームは[33]のようになります。表示例は[34]のようになります。

<figure>
<figcaption>[33] `type=file`の記述例</figcaption>
```html
<form enctype="multipart/form-data" method="post" action="/upload.php">
  <label>アップロードするファイルを選択してください:
    <input type="file" name="file">
  </label>
  <button>送信</button>
</form>
```
</figure>

<figure>
<figcaption>[34] ブラウザーによる[33]の表示例</figcaption>
<img src="../image/C3_10_34_1C.png" alt="" />
</figure>

`multiple`属性を設定すると、複数ファイルの指定を可能にします。ブラウザーは、複数ファイルを選択可能なインターフェイスを表示します。多くの場合、ファイル選択インターフェイスの見た目に大きな変化はありませんが、Ctrlキーを押しながら選択したり、ドラッグで範囲指定することで、複数のファイルを選択できるようになります。

`accept`属性を指定することで、ファイルの種類を絞り込むことができます。値として、以下の5種類の指定が可能です。

- 文字列 `"audio/*"`: 音声ファイルを指定できます
- 文字列 `"video/*"`: 映像ファイルを指定できます
- 文字列 `"image/*"`: 画像ファイルを指定できます
- パラメーターのない妥当なMIMEタイプ文字列: そのMIMEタイプの
ファイルを指定できます[^35]
- `.`(ピリオド)で始まる文字列: 指定された拡張子のファイルを指定できます

[^35]: `accept`属性にパラメータを持つMIMEタイプは指定できません。たとえば、`text/html`という指定はできますが、`;`(セミコロン)を含んだ`text/html;charset=utf-8`という指定はできません。\
MIMEタイプについてはCHAPTER 1-6を参照してください。

複数を組み合わせることも可能で、その場合はカンマで区切って列挙します。この場合、指定されたものすべてが受け入れ可能になります。たとえば、Microsoft Word文書をアップロードさせたい場合、[35]のように指定できます。

<figure>
<figcaption>[35] ファイルの種類をMicrosoft Word文書に指定する記述例</figcaption>
```html
<input type="file" accept=".doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document">
```
</figure>

ただし、`accept`属性による指定は厳密にファイルの種類を指定できるものではありません。拡張子".doc"を持つファイルであってもMicrosoft Wordファイルとは限らず、単なるテキストファイルかもしれません。また、ファイルの種類によっては、MIMEタイプが正式に登録されたものではないかもしれません。*`accept`属性を指定しても、想定していない種類のファイルがアップロードされることは防げませんので注意が必要です。*

また、このコントロールにセキュリティ上の制約があることにも注意してください。このコントロールの`value`属性の値はファイル名となりますが、HTMLで`value`属性を指定したり、JavaScriptから`value`属性に値を指定しようとしても、意図したとおりには動作しません[^36]。

[^36]: JavaScriptを利用してこのコントロールにアップロードファイルを設定する場合は、`files`プロパティにファイルの内容を直接設定する必要があります。この制約は、ユーザーの操作を介さないローカルファイルの読み取りを防ぐためのものです。

### アクセシビリティ上の注意点

`type=file`の場合、デフォルトのARIAロールはありません。

多くのブラウザーはボタンを表示するため、スクリーンリーダーは「ボタン」と読み上げることがあります。関連付けられたラベルが存在する場合は、そのラベルを読み上げてから「ボタン」と読み上げます。ラベルがない場合、現在指定されているファイルのパス名を読み上げることがあります。

多くの場合、`multiple`属性を使用しても、複数のファイルが選択可能であることはユーザーに伝わりません。複数選択可能であることをテキストで明示するとよいでしょう。

## ボタン: `submit`、`reset`、`button`

`type=submit`、`type=reset`、`type=button`は、ボタンを表します。いずれも、同一の`type`属性を持つ`button`要素と同様の挙動となります。詳しくは[CHAPTER 3-11の`button`要素<!--(P212)-->](3-11.xhtml#button-element)を参照してください。

`button`要素では要素の内容がボタンのラベルとなりますが、`input`要素の場合は`value`属性の値をラベルとして扱います。そのため、ボタンのラベルにマークアップを含められないという制約があります。*特に理由がなければ、`button`要素を使うとよいでしょう。*

### アクセシビリティ上の注意点

`type=submit`、`type=reset`、`type=button`の場合、デフォルトのARIAロールは`button`です。

スクリーンリーダーは`value`属性の値を読み上げたあと、「送信ボタン」「ボタン」などと読み上げます。

`value`属性の値がラベルとして扱われるため、`label`要素でラベルを与える必要はありません。`label`要素を関連付けした場合はそのラベルが優先され、`value`属性の値は読み上げられなくなります。

## イメージボタン: `image`

`type=image`はイメージボタン、すなわち、画像によって表現された送信ボタンを表します。役割は`type=submit`とほぼ同じですが、ボタンとして画像を表示する点と、クリックした画像の座標を送信する点が異なります[^37]。

[^37]: かつては送信ボタンを装飾する手段が限られていたため、ボタンの画像を用意し、`type=image`を利用して表示することがよく行われていました。現在では`button`要素とCSSを組み合わせてさまざまな表現ができるため、`type=image`はほとんど利用されません。

画像の指定は`img`要素と同じように、`src`属性で画像を指定し、`alt`属性で代替テキストを提供します。`width`属性と`height`属性で画像サイズのヒントを指定できることも`img`要素と同様です。ただし`srcset`属性は定義されておらず、`picture`要素と組み合わせることもできません。

<section class="column">
### コラム: イメージボタンと座標

[01]は、フォームに2つのイメージボタンを配置した例です。

<figure>
<figcaption>[01] フォームにイメージボタンを2つ配置した例</figcaption>
```html
<form>
    <input type="image" name="button1" src="button1.png" alt="送信ボタン1">
    <input type="image" name="button2" src="button2.png" alt="送信ボタン2">
</form>
```
</figure>

このボタンをマウスなどのポインティングデバイスでクリックした場合、フォーム送信時にクリックした位置の座標が送信されます。座標は、画像の左上隅を原点(0,0)とし、右方向にx軸、下方向にy軸をとったもので、単位はCSSピクセルです。送信される値は、ボタンの`name`属性の値と`.x=`あるいは`.y=`を連結し、その後に座標値を記述したものとなります。たとえば、[01]の例で、`button1`の原点から右に100ピクセル、下に5ピクセルの位置をクリックした場合、[02]の値が送信されます。

<figure>
<figcaption>[02] 送信されるボタンの座標</figcaption>
```html
?button1.x=100&button1.y=5
```
</figure>

座標の値はCSSピクセルの整数であるため、小数点以下の数値になることはありません。ただし、負の値になることはあります。たとえば、CSSで`border`や`padding`プロパティが設定されている場合、ボタン画像の外側の領域をクリックでき、画像の原点より左や上の領域をクリックすると座標は負の値となります。なお、クリックを伴わないキーボード操作などでそのボタンを押した場合、座標の値は(0,0)としてx=0、y=0が送信されます。

この座標の値を利用することで、サーバーサイドイメージマップと似た動作を実現できます。ただし、ポインティングデバイスで特定の箇所をクリックする動作ができないユーザーもいるため、この操作にはアクセシビリティ上の問題があります。イメージマップを利用したい場合には、クライアントサイドイメージマップ(`area`要素)を使うほうが望ましいでしょう。

実務上、座標が必要になるケースはほぼないといえます。単にボタンを画像にしたい場合は、`button`要素内に`img`要素を入れた上で、細かいスタイルの調整をするとよいでしょう。

</section>

## 隠しコントロール: `hidden`

`type=hidden`は、ユーザーに値を提示しない、編集もできないコントロールを表します。システム側では値を受け取る必要があり、しかしユーザーに入力・編集させる必要がないような場合に利用します。[36]は、ショッピングサイトで商品をカートに入れる際のフォームの例です。

<figure>
<figcaption>[36] `type=hidden`の記述例</figcaption>
```html
<form action="/cart.php" method="post">
  <input type="hidden" name="id" value="item42">
  <input type="hidden" name="price" value="9800">
  <button>この商品をカートに入れる</button>
</form>
```
</figure>

[36]では、ユーザーには「この商品をカートに入れる」というボタンだけが見えています。ユーザーがボタンを押すと、商品のIDと価格が送信され、システム側でカートに追加する処理が行われます。

*このコントロールの値は秘匿されないことに注意してください。*画面上では隠れていても、ユーザーはHTMLのソースを直接読んだり、ブラウザーの開発者ツールで調査して値を読み取れます。また、値を書き換えることも可能です。値を読み取られたり書き換えられたりすると問題がある場合は、このコントロールを利用すべきではありません[^38]。

[^38]: たとえば[36]の例の場合、ユーザーは`price`の値を書き換え、商品を不正な価格で購入しようとするかもしれません。

#### アクセシビリティ上の注意点

`type=hidden`の場合、デフォルトのARIAロールはありません。視覚的にも隠されていますし、スクリーンリーダーでも読み上げられることはありません。

### 内容モデル

`type`属性の値が何であれ、`input`要素の内容モデルはNothingで、内容を持つことはできません。また、終了タグを書くこともできません。

### 属性

`input`要素は前述のように`type`属性を持ち、これによって大きく挙動が変わります。そのほかの属性もありますが、ほとんどの属性は常に使えるわけではなく、`type`属性が特定の値のときに限って使えるものです[^39]。

[^39]: HTML仕様には、属性がどの状態の時に対して使えるかを示す一覧表があります。\
<https://html.spec.whatwg.org/multipage/input.html#input-type-attr-summary>

#### `type`属性

`type`属性は列挙型属性で、22種類の値が定義されています。属性値の種類とそれぞれの意味は、先に述べたとおりです。`type`属性を省略した場合や、ブラウザーにとって未知の値であった場合は、デフォルトの`"text"`になります。

#### `maxlength`および`minlength`属性

入力値として許容する文字列の長さを指定します。`maxlength`属性は最大の長さを、`minlength`属性は最小の長さを指定します。

文字列の長さは、基本的には単に文字数と考えればよく、全角・半角などは問わずに文字1つを長さ1と数えます[^40]。ただし、漢字の異体字や絵文字など、一部の文字は長さ2以上に数えられることがあります[^41]。

[^40]: [`textarea`要素<!--(P247)-->](3-11.xhtml#textarea-element)の場合は、改行も1文字としてカウントします。改行コードがCR+LFの場合や、文字参照で`&#13;&#10;`と記述する場合でも、長さ1と数えます。

[^41]: これはJavaScriptで文字列の長さを取得する際と同じ挙動です。JavaScriptの内部では、文字エンコーディングはUTF-16として扱われており、Unicodeスカラー値がU+10000以上の文字は「サロゲートペア」と呼ばれる2つの文字の組み合わせで表現されるため、長さ2とカウントされます。

`minlength`属性が指定されていても、それより短い値を入れること自体は可能です。ただし、フォーム送信をしようとするとエラーメッセージが表示され、送信できません。[37]は、パスワードとして長さ8以上の文字列を入力しなければならない例です。長さ8未満の状態で送信しようとするとエラーとなり、たとえば[38]のように表示されます。

<figure>
<figcaption>[37] 文字数を8文字以上に指定</figcaption>
```html
<label>パスワード<input type="password" minlength="8"></label>
```
</figure>

<figure>
<figcaption>[38] ブラウザーによる[37]の表示例</figcaption>
<img src="../image/C3_10_38_1C.png" alt="" />
</figure>

`maxlength`属性も同様ですが、`maxlength`属性の場合、エラーを出す代わりに、入力を抑制してもよいことになっています。多くのブラウザーでは、`maxlength`属性の指定よりも長い値を入力しようとした場合、キーボードから入力を試みても何も入らない、文字列をペーストした場合は長さを超えた分が切り捨てられる、という挙動になります。

特に、ユーザーが値をペーストした場合や、`type="password"`の入力欄を利用している場合、値の切り捨てに気づかない可能性があるため、注意が必要です。

#### `size`属性

`size`属性は、`input`要素の見た目の幅を指定します[^42]。指定する値は文字数で、デフォルトの値は"20"です。[39]の例では、4文字に相当する幅の入力欄が表示されます。

[^42]: `size`属性で指定できるのは見た目の幅であり、実際に入力できる 文字数とは関係ありません。文字数の制限は`maxlength`属性や`minlength`属性で行います。

<figure>
<figcaption>[39] `size`属性の記述例</figcaption>
```html
<label>名前(姓):
  <input name="name" size="4">
</label>
```
</figure>

[39]がちょうど4文字分の幅になるとは限らないことに注意してください。この値はブラウザーによって解釈が異なることが知られており、CSSの`width`プロパティで単位`em`や`ex`で指定した幅とも異なります。なお、スタイルシートで幅が指定されている場合は`size`属性の指定よりも優先されます。正確な幅を指定したい場合はスタイルシートで指定するとよいでしょう。

#### `readonly`属性

`readonly`属性は、コントロールが編集可能かどうかを表すブール型属性です。この属性が指定されている場合、コントロールは読み取り専用となり、ユーザーによる入力を受け付けません[^43]。

[^43]: コントロールの種類によっては`readonly`属性を適用できない場合があります。`type`属性が`hidden`、`range`、`color`、`radio`、`checkbox`、`file`、`image`、`submit`、`reset`、`button`の場合、`readonly`属性を指定しても無視されます。

*`disabled`属性とは異なり、入力されている値は送信されることに注意してください。*値が入力済みのコントロールに対し、JavaScriptで後から`readonly`属性を設定した場合、ユーザーは値を変更できなくなりますが、フォーム送信時は現在の値がそのまま送信されます。

#### `required`属性

`required`属性は、コントロールが入力必須かどうかを表すブール型属性です。この属性が指定されたコントロールは入力必須項目として扱われ、値が入力されていないとフォーム送信時にエラーとなります[^44]。

[^44]: コントロールの種類によっては`required`属性を適用できない場合があります。`type`属性が`range`、`color`、`submit`、`reset`、`button`の場合、`required`属性を指定しても無視されます。
 
[40]はユーザー名を必須項目とする例です。空欄のままフォーム送信するとエラーとなり、たとえば[41]のように表示されます。

<figure>
<figcaption>[40] `required`属性の記述例</figcaption>
```html
<label>ユーザー名 (必須):
  <input name="username" required>
</label>
```
</figure>

<figure>
<figcaption>[41] ブラウザーで空欄のまま送信した場合のエラー表示例</figcaption>
<img src="../image/C3_10_41_1C.png" alt="" />
</figure>

`required`属性を指定しただけでは、入力欄が必須項目であることはユーザーに伝わりません。そのため[40]では、ラベルに「必須」という単語を含めています。

必須の入力欄の色を変えたり、ラベルに`*`(アスタリスク)を付けたりして表現するケースも見受けられますが、アクセシビリティの観点から、明確に「必須」という単語をラベルに含めることを推奨します。

`required`属性でチェックされるのは現在の値が空かどうかであり、ユーザーが入力や編集を行ったかどうかは問いません。`value`属性で最初から空でない値が設定されている場合、そのまま送信可能です。また、値がASCII空白文字のみである場合も、値は入力されているものとみなされます。

チェックボックスやラジオボタンにも`required`属性を指定できます。チェックボックスの場合、`required`属性を指定したチェックボックスにチェックを入れることが必須となります。ラジオボタンの場合、同一のラジオボタングループに属するラジオボタンのいずれかにチェックを入れることが必須となります。

[42]は、3つの選択肢から選ぶラジオボタンの例です。この例では最初の選択肢のみに`required`属性が指定されていますが、3つの選択肢のいずれかを選ぶことができます。何も選んでいない状態で送信した場合はエラーとなります。

<figure>
<figcaption>[42] 選択肢を選ぶことが必須となっているラジオボタンの例</figcaption>
```html
<label><input type="radio" name="opt" value="1" required>1</label>
<label><input type="radio" name="opt" value="2">2</label>
<label><input type="radio" name="opt" value="3">3</label>
```
</figure>

#### `multiple`属性

*`type`属性が`email`または`file`の場合、`multiple`属性を指定すると、ユーザーが複数の値を指定できるようになります。*`multiple`属性はブール型属性です。詳しくは`type=email`、`type=file`を参照してください。

##### <a id="pattern-attribute">`pattern`属性</a>

`pattern`属性を指定すると、テキスト入力コントロールの値をチェックできます[^45]。指定する値は、JavaScriptの正規表現の文字列です[^46]。たとえば、`http://`または`https://`で始まるURLのみを受け付けたい場合、[43]のように書くことができます。

[^45]: この属性が指定できるのは、テキスト入力のコントロールのみです。すなわち、`type`属性が`text`、`search`、`url`、`tel`、`email`、`password`の場合です。そうでない場合、`pattern`属性を指定しても無視されます。

[^46]: JavaScriptの正規表現については、MDNを参照してください。\
<https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Regular_Expressions>

`pattern`属性が指定されている場合、値の全体がパターンにマッチする必要があります[^47]。値の一部にパターンが含まれるケースはエラーになります。たとえば「http://a」と入力するのはエラーになりませんが、「xxxxhttp://a」のように余分なものを付けて入力するとエラーになります。

[^47]: 正確には、`pattern`属性の値の前に`"^(?:"`、後ろに`")$"`をつけた文字列を正規表現として判定します。[45]の例では`"^(?:https?://.+)$"`となります。

`title`属性を指定しておくと、エラー時の説明文として表示されることが期待できます。`pattern`属性を指定している場合、どのような値を入力する必要があるのかユーザーに伝わりにくい場合が多いため、`title`属性を指定しておくべきです。[43]は、たとえば[44]のようにエラーが表示されます。

<figure>
<figcaption>[43] `pattern`属性の記述例</figcaption>
```html
<input type="url" pattern="https?://.+" title="httpまたはhttpsで始まるURLを入力してください。">
```
</figure>

<figure>
<figcaption>[44] ブラウザーによる[43]のエラー表示例</figcaption>
<img src="../image/C3_10_41_1C.png" alt="" />
</figure>

なお、値が空の場合は`pattern`属性による検証が行われません。[45]は3~4文字の入力を期待している例です。

<figure>
<figcaption>[45] 3~4文字の入力を指定</figcaption>
```html
<input pattern="[0-9]{3,4}" title="3〜4文字の数字を入力してください">
```
</figure>

[45]の場合、1~2文字の入力や5文字以上の入力ではエラーになりますが、0文字、すなわち何も入力していない場合にはエラーになりません。未入力をエラーにしたい場合は`required`属性を使用します。

`pattern`属性による値の検証は、セキュリティ上の意味を持つものではないことに注意してください。ユーザーはブラウザーの開発者ツールを用いて`pattern`属性を削除できますし、ブラウザーを使わずに特殊なツールからサーバーに値を送ることもできます。`pattern`属性による検証は、あくまでユーザーの利便性のためのものに過ぎず、サーバー側での検証を不要にするものではありません。

#### <a id="min-max-attribute">`min`および`max`属性</a>

*`min`および`max`属性はそれぞれ、数値や日時の最小と最大の値を示します[^48]。*たとえば、日付コントロールで2021年7月23日から2021年8月8日までの範囲を指定する場合、[46]のようになります。

[^48]: `min`属性と`max`属性が指定できるのは、値の範囲を制限できるコントロールのみです。すなわち、`type`属性が`date`、`month`、`week`、`time`、`datetime-local`、`number`、`range`の場合です。そうでない場合、`min`属性や`max`属性を指定しても無視されます。
 
<figure>
<figcaption>[46] 2021年7月23日から2021年8月8日までの範囲を指定した例</figcaption>
```html
<input type="date" min="2021-07-23" max="2021-08-08">
```
</figure>

どちらか片方だけの指定もできます。[47]は`min`属性を指定し、0以上の数値を入力させるようにした例です。[47]では`max`属性の指定がないため、入力できる値に上限はありません。

<figure>
<figcaption>[47] 0以上の数値を入力するように指定した例</figcaption>
```html
<input type="number" min="0">
```
</figure>

`min`属性と`max`属性を同時に指定する場合、原則として、`min`属性よりも`max`属性のほうが大きくなくてはなりません。ただし、`type=time`のコントロールの場合は、「反転した範囲(reversed range)」を指定できます。[48]の例は、深夜・早朝の時間帯の指定を意図しています。

<figure>
<figcaption>[47] 0以上の数値を入力するように指定した例</figcaption>
```html
<input type="time" min="22:00" max="06:00">
```
</figure>

[48]では、22:00~23:59、および00:00~06:00までの時刻が設定できます。`min`属性と`max`属性の値を入れ替えると、06:00~22:00と指定することになり、意味が変化することに注意してください。

#### `step`属性

`step`属性は、値の刻み幅を制御します[^49]。文字列`any`または正の浮動小数点数を指定できます。属性値に数値を指定した場合、コントロールは`step`値の倍数のみを受け入れます。

[^49]: `step`属性を指定できるのは、値の範囲を制限できるコントロールのみです。すなわち、`type`属性が`date`、`month`、`week`、`time`、`datetime-local`、`number`、`range`の場合です。そうでない場合、`step`属性を指定しても無視されます。

`step`属性を省略した際のデフォルトの値はコントロールによって異なります。`date`、`month`、`week`、`number`、`range`の場合、デフォルトの値は`"1"`です。`time`、`datetime-local`の場合は"60"で、これは60秒を意味します。つまり、デフォルトでは1分刻みになります。`step=1`を指定すれば1秒刻みの値を指定できるようになりますし、`step=0.001`を指定すれば1ミリ秒単位で指定できるようになります。

*`step=any`を指定すると、値の刻み幅に制限がない状態となり、任意の精度の値が指定可能になります。*これはデフォルトの指定とは異なることに注意してください。`"any"`の指定は、そのコントロールで実現可能な最小の`step`を指定するのと同じ意味になります。

#### <a id="list-attribute">`list`属性</a>

`list`属性は、ユーザーに提案する定義済み候補のリストを示します[^50]。値は、同一文書内の`datalist`要素のIDでなければなりません。詳細については、`datalist`要素を参照してください。

[^50]: コントロールの種類によっては定義済み候補のリストを利用できないものがあります。`type`属性が`hidden`、`password`、`radio`、`checkbox`、`file`、`image`、`submit`、`reset`、`button`の場合、`list`属性を指定しても無視されます。

#### `placeholder`属性

`placeholder`属性は、ユーザー入力の支援をするためのヒント(単語や短いフレーズ)を表します。

`label`要素と似ていますが、`label`要素のラベルが常に表示されているのに対し、`placeholder`属性の値は入力欄に値が入力されていない時だけ表示されます。

`placeholder`属性で提供される入力支援のヒントは、ユーザーが入力を始めると消えてしまい、読み返すことはできません。ヒントを利用するには、入力前に読んで覚えておかなければなりません。これはユーザーの記憶に負担を与えることになります。

フォームコントロールにあらかじめ空でない初期値が設定されている場合、`placeholder`属性の値は表示されません。ユーザーが入力内容を訂正するフォームでは、`placeholder`属性の値がまったく役に立たないこともあります。

##### アクセシビリティ上の注意点

`placeholder`属性にはアクセシビリティ上の注意点がいくつかあります。

多くのスクリーンリーダーは、プレースホルダーのテキストが表示されている場合、それを読み上げます。入力欄に値が入力されるとプレースホルダーのテキストは表示されなくなりますが、この場合、スクリーンリーダーにも読み上げられなくなります[^51]。

[^51]: このように、`placeholder`属性の値は状況によって読まれなくなることがあり、ラベルとは根本的に性質が異なります。ラベルの代替として使用すべきではありません。

一般に、プレースホルダーテキストはデフォルトで薄い文字色として表示されます。この配色はWCAGで定めるコントラスト比を満たさないこ とがあり、一部のユーザーはこのテキストを読むことができない場合があります[^52]。

[^52]: カラーコントラストについては、WCAG 2.1の達成基準1.4.3「コントラスト (最低限)」、および達成基準1.4.6「コントラスト (高度)」を参照してください。\
Success Criterion 1.4.3 Contrast (Minimum)\
<https://www.w3.org/TR/WCAG21/#contrast-minimum>\
Success Criterion 1.4.6 Contrast (Enhanced)\
<https://www.w3.org/TR/WCAG21/#contrast-enhanced>

しかしコントラストを高めすぎると、プレースホルダーテキストが入力値であるように見えてしまいます。プレースホルダーテキストを見て、その入力欄が自動的に入力されていると勘違いするユーザーが出てくるかもしれません。

`placeholder`属性にはさまざまなデメリットがあり、扱いが難しいものです。`placeholder`属性を用いる場合には、これらに注意するようにしましょう。

### <a id="form-common-attributes">フォームコントロールの共通属性</a>

HTML仕様では、フォームコントロール要素に指定できる共通の属性が定義されています。具体的には、`name`、`dirname`、`disabled`、`form`、`formaction`、`formenctype`、`formmethod`、`formnovalidate`、`formtarget`、`autocomplete`属性が該当します。これらの属性は`input`要素だけでなく、[CHAPTER 3-11](3-11.xhtml)で紹介する他のフォームコントロールにも指定できます。

#### `name`属性

`name`属性は、フォームコントロールに名前を与えます。フォーム送信時には、有効なフォームコントロールの`name`属性の値が送信されます。*`name`属性が指定されていないと、そのコントロールの値は送信されません。*フォーム送信時の動作の詳細については、`form`要素<!--(P209)-->も参照してください。

`name`属性では複数の要素に同じ名前を与えることができます。複数のチェックボックスやラジオボタンに同じ`name`属性を指定すると、それらは同一のグループに属するものとみなされます。詳しくは[`type=radio`<!--(P223)-->](#radio-type)を参照してください。

フォーム送信時には、同名の`name`属性があってもまとめられることはなく、すべて個別に送信されます[^53]。[49]は2つのチェックボックスに同じ名前を指定した例です。

[^53]: フォーム送信を受け取る側の処理系によっては、同名の値を1つにまとめて処理できることもあります。たとえばPHPでは、名前の末尾に`[]`がついた値を配列として扱うことができます。[50]の例で送信された値は、`$_POST['animal']`として取得でき、その値は`["cat", "dog"]`という配列になります。

<figure>
<figcaption>[49] `name`属性の記述例</figcaption>
```html
<label><input type="checkbox" name="animal[]" value="cat">ねこ</label>
<label><input type="checkbox" name="animal[]" value="dog">いぬ</label>
```
</figure>

このチェックボックスの両方にチェックして送信すると、[50]のような値が送られます。名前=値のペアが複数送信されている点に注目してください。

<figure>
<figcaption>[49] `name`属性の記述例</figcaption>
```text
animal%5B%5D=cat&animal%5B%5D=dog
```
</figure>

#### `dirname`属性

テキスト入力を行うコントロールに`dirname`属性を指定すると、テキストの書字方向の情報を送信できます。詳細は仕様を参照してください[^54]。

[^54]: 4.10.18.2 Submitting element directionality: the dirname attribute\
<https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#submitting-element-directionality:-the-dirname-attribute>

#### <a id="disabled-attribute">`disabled`属性</a>

`disabled`属性を指定すると、そのフォームコントロールを無効にできます。`disabled`属性はブール型属性です。この属性をJavaScriptから制御することで、特定の条件を満たした場合にのみ入力可能な入力欄を実現できます。

フォームコントロールが無効の場合、入力や編集、ボタン操作といった動作が行えなくなります。フォーカスを当てることもできません。ブラウザーは多くの場合、フォームコントロールの見た目を薄い色に変更するなど、無効であることがわかるようにします。また、スクリーンリーダーでは「無効なコントロール」などと読み上げられることがあります。

*無効になっているフォームコントロールの値は送信されません。*ユーザーが値を入力したあとでJavaScriptによって`disabled`属性が設定された場合、ユーザーが入力した値が送られなくなることに注意してください。この点は`readonly`属性との大きな違いです。

#### `form`属性

通常、フォームコントロールは祖先要素の`form`要素と関連付けられています。祖先となっている`form`要素内の送信ボタンが押されると、コントロールの値が送信されます。

しかし時には、`form`要素の外にある要素を関連付けしたい場合があります。`form`属性を利用すると、関連する`form`要素を明示的に指定できます。[51]のように、`form`要素に`id`属性を指定し、そのIDを`form`属性に指定します。

<figure>
<figcaption>[51] `form`属性の記述例</figcaption>
```html
<form id="form01">
  <!-- さまざまな入力欄 -->
  <button>送信する</button>
</form>
<!-- さまざまなコンテンツ -->
<button form="form01">送信する</button>
```
</figure>

この例では、2つ目の`button`要素が`form`要素の外にありますが、`form`属性でフォームと関連付けられているため、フォーム内に置かれているかのように機能します。このボタンを押すことでフォームを送信できます。

#### フォーム送信を制御する属性

`button`要素や、ボタンとして機能する`input`要素に以下の属性を指定すると、フォーム送信時の挙動を制御できます。

- `formaction`
- `formenctype`
- `formmethod`
- `formnovalidate`
- `formtarget`

これらの属性が指定されたボタンを押して送信すると、`form`要素の対応する属性を上書きするように働きます。[52]は`formaction`属性と`formnovalidate`属性を利用する例です。

<figure>
<figcaption>[52] `formaction`属性と`formnovalidate`属性を利用した記述例</figcaption>
```html
<form action="register.php" method="post">
  <!-- さまざまな入力欄 -->
  <label>メモ:
    <textarea required name="note"></textarea>
  </label>
  <button name="mode" value="register">登録</button>
  <button formnovalidate formaction="temp-save.php">下書き保存</button>
</form>
```
</figure>

この例では`textarea`要素に`required`属性が指定されているため、未入力のまま「登録」ボタンを押すとエラーとなります。一方、「下書き保存」ボタンには`formnovalidate`属性が指定されているため、下書き保存時にはエラー検証が行われず、未入力のままで送信できます。その際、`formaction`属性によって、送信先も`temp-save.php`に変化します。

#### <a id="autocomplete-attribute">`autocomplete`属性</a>

`autocomplete`属性を指定すると、ユーザーエージェントに対して、フォームコントロール入力の自動補完に関するヒントを与えることができます。この属性は大きく分けて2種類あり、1つは自動補完の動作自体を制御するもの(autofill expectation mantle)、もう1つは値の種類を指定するもの(autofill anchor mantle)です。

この属性は`form`要素にも指定でき、その場合はフォーム内のコントロールのデフォルトの自動補完の動作を指定します[^55]。個々のフォームコントロール`autocomplete`属性が指定されている場合、個々のコントロールに指定された属性が優先されます。

[^55]: `form`要素の`autocomplete`属性では値の種類は指定できず、自動補完の動作の制御のみができます。つまり、`form`要素の`autocomplete`属性には`"on"`か`"off"`しか指定できません。

##### 自動補完の動作を制御する

自動補完の動作自体を制御しようとする場合、属性値として`"on"`もしくは`"off"`を指定します。`"off"`を指定した場合、該当の入力欄がパスワードのようなセンシティブな値か、再入力すべきでない値を扱うことを示唆します。`"on"`の場合は、再入力してよい値であり、入力補完が許されるものであることを示唆します。

`input type=password`の入力欄では、`autocomplete=off`が特殊な扱いを受けることがあります。モダンなブラウザーのほとんどは`autocomplete=off`の指定があってもユーザーにパスワードを保存するかどうかを尋ね、ユーザーが許可すればパスワードを保存します[^56]。

[^56]: 端的に言えば、`type=password`の入力欄では、`autocomplete=off`は無視されます。モダンなブラウザーはセキュリティに配慮したパスワード管理機能を持ちますが、この機能を無効にされるとセキュリティの低下につながるため、あえて指定を無視します。かつては「ブラウザーにパスワードを記憶させないようにする」というポリシーを見かけることがありましたが、現在では、そのようなポリシーはセキュリティを低下させると考えられています。

なお、新しいパスワードを設定するときは、そのことを示す値の種類`"new-password"`を指定することで、入力欄にパスワードが補完されることを防ぐ効果が期待できます。

##### 値の種類を指定する

ブラウザーに対して値の種類を示唆することで、ブラウザーは適切な入力の補完ができます。

たとえば、ユーザーが「氏名」という入力欄に入力した後、別の場所で同様に「氏名」の入力を求められた場合、ブラウザーは先に入力した氏名のデータを記憶しておき、後の入力欄を補完することがあります。ブラウザーは、値の種類が同一かどうかを判断するために`name`属性の値を参考にしますが、`autocomplete`属性を利用すると、その種類を明示的に指定できます。*氏名のほかにも、住所、性別、クレジットカード番号、URL、メールアドレスなどを明示できます。*

属性値には、4種類のトークンを組み合わせた値を指定します。それぞれ次のようになります。

- 配送先か、請求先か: 入力欄が配送先の情報に関するものであれば`"shipping"`を、請求先に関する情報であれば`"billing"`を指定します。どちらでもない場合、このトークンは省略します
- グループ名: 値が何かのグループに属する場合、`"section-"`で始まるグループ名を指定できます。グループ名は任意に付けることができます。配送元と配送先の両方の住所を入力しなければならない場合など、同種の情報を区別する必要がある場合に利用します。省略可能です
- 値の種類: 値の種類を示すキーワードを指定します。キーワードは仕様で規定されており、`"name"`、`"nickname"`、`"country"`、`"photo"`など40種類以上が存在します。詳しくは仕様を参照してください[^57]
- 追加の種類: 電話番号やメールに対して、自宅や職場といった追加情報を指定できます。省略可能です

[^57]: 4.10.18.7.1 Autofilling form controls: the autocomplete attribute\
<https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofilling-form-controls:-the-autocomplete-attribute>

複数のトークンを指定する場合は、スペースで区切ります。たとえば、フォームで2つの配送先住所がある場合、[53]のようにマークアップできます。

<figure>
<figcaption>[53] 複数のトークンを指定する場合の記述例</figcaption>
```html
<fieldset>
  <legend>1つ目のギフトの配送先</legend>
  <p><label>郵便番号: <input name="bp" autocomplete="section-blue shipping postal-code"></label>
  <p><label>都道府県: <input name="bc" autocomplete="section-blue shipping address-level1"></label>
  <p><label>住所:     <textarea name="ba" autocomplete="section-blue shipping street-address"></textarea></label>
</fieldset>

<fieldset>
  <legend>2つ目のギフトの配送先</legend>
  <p><label>郵便番号: <input name="rp" autocomplete="section-red shipping postal-code"> </label>
  <p><label>都道府県: <input name="rc" autocomplete="section-red shipping address-level1"> </label>
  <p><label>住所:     <textarea name="ra" autocomplete="section-red shipping street-address"></textarea></label>
</fieldset>
```
</figure>

#### アクセシビリティ上の注意点

ここまでで説明したように、`autocomplete`属性を用いることで、どのような入力欄であるかを伝えることができます。ブラウザーは、`autocomplete`属性を手がかりに、あるフォームで入力した値を記憶し、別のフォームの入力欄を自動補完できます。入力の操作が困難なユーザーにとっては、アクセシビリティが向上することになります。積極的に利用するとよいでしょう[^58]。

[^58]: `autocomplete`属性を用いることは、WCAG 2.1達成基準1.3.5「入力目的の特定」を満たす方法の1つとなっています。\
WCAG 2.1 Success Criterion 1.3.5 Identify Input Purpose\
<https://www.w3.org/TR/WCAG21/#identify-input-purpose>
