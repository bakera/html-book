---
title: "CHAPTER 3-07 編集"
---

# <span class="number">07</span> 編集

ここでは、文書への編集を表す`ins`および`del`要素を説明します。

## `ins`および`del`要素

`ins`要素は文書への追加を、`del`要素は文書からの削除をそれぞれ表します。

### 内容モデル

`ins`および`del`要素の内容モデルは`transparent`で、親要素の内容モデルを引き継ぎます[^1]。

[^1]: 古いHTML4ではtransparent内容モデルが存在しなかったため、`ins`要素と`del`要素は「ブロックレベル要素とインライン要素のいずれかとして振る舞う」という特別な扱いがなされていました。ブロックレベル要素とインライン要素については、コラム「ブロックとインラインはどこへ?」を参照してください。

`ins`要素と`del`要素は、どこにでも出現できるわけではないことに注意してください。たとえば、`ul`要素は`ins`要素を子要素に持つことができないため、[01]は構文エラーとなります[^2]。

[^2]: `ins`要素と`del`要素のカテゴリーはFlowおよびPhrasingです。`ul`要素は内容モデルにFlowとPhrasingのいずれも含まないため、`ins`要素や`del`要素を`ul`要素の子にすることはできません。

<figure>
<figcaption>[01] `ul`要素の直下に`ins`要素を記述した不適切な例</figcaption>
```html
<ul>
  <ins>
    <li>1つめの項目</li>
    <li>2つめの項目</li>
  </ins>
  <li>3つめの項目</li>
</ul>
```
</figure>

リストの一部を`ins`要素でマークアップしたい場合、[02]のように`li`要素の子にするとよいでしょう。表示例は[03]のようになります。

<figure>
<figcaption>[02] `li`要素の直下に`ins`要素を記述した例</figcaption>
```html
<ul>
  <li><ins>1つめの項目</ins></li>
  <li><ins>2つめの項目</ins></li>
  <li>3つめの項目</li>
</ul>
```
</figure>

<figure>
<figcaption>[03] ブラウザーによる[02]の表示例</figcaption>
<img src="../image/C3_07_03_1C.png" alt="" />
</figure>

また、`ins`要素や`del`要素が段落をまたぐことはできません。[04]は構文エラーとなる例です。

<figure>
<figcaption>[04] `del`要素が`p`要素をまたがる不適切な例</figcaption>
```html
<section>
  <h1>とある文章</h1>
  <p>1つめの<del>段落</p>
  <p>2つめの段落</p>
  <p>3つめ</del>の段落</p>
</section>
```
</figure>

[04]では段落が明示されていますが、*「暗黙の段落(implied paragraphs)」*が作成される場合もあります。[05]は、[04]の最初と最後の段落を`p`要素ではなく、暗黙の段落とした例です[^3]。

[^3]: `p`要素を利用すると段落を明示できますが、ここで取り上げた例のように、`p`要素がない場所に暗黙の段落ができることもあります。詳しくはHTML仕様の3.2.5.4 Paragraphsを参照してください。\
<https://html.spec.whatwg.org/multipage/dom.html#paragraphs>
 
<figure>
<figcaption>[05] 暗黙の段落をまたぐ非推奨の記述例</figcaption>
```html
<section>
  <h1>とある文章</h1>
  1つめの<del>段落
  <p>2つめの段落</p>
  3つめ</del>の段落
</section>
```
</figure>

[05]は構文エラーにはなりませんが、この場合も`ins`要素、`del`要素が段落をまたぐことはできないとされています。[06]のように`del`要素を分割すれば問題ありません。表示例は[07]のようになります。

<figure>
<figcaption>[06] `del`要素を分割した記述例</figcaption>
```html
<section>
  1つめの<del>段落</del>
  <p><del>2つめの段落</del></p>
  <del>3つめ</del>の段落
</section>
```
</figure>

<figure>
<figcaption>[07] ブラウザーによる[06]の表示例</figcaption>
<img src="../image/C3_07_07_1C.png" alt="" />
</figure>

### 属性

`ins`要素と`del`要素のいずれも、`cite`属性および`datetime`属性を指定できます。

いずれの属性もレンダリングに影響するものではなく、コンテンツ制作者側が私的に利用することを意図したものとされています。変更の理由や日時をユーザーに伝えたい場合には、属性に指定するのではなく、コンテンツ内に明示する必要があります。

#### `cite`属性

`cite`属性は、変更の理由を説明する文書のURLを指定します。

#### `datetime`属性

`datetime`属性は、変更した日時を指定します。指定できる値は、日付のみまたは日付を含む時刻です。時刻のみの値は受け付けません。この属性に指定できる値の形式については、CHAPTER 2-2の日付と時刻<!--(P061)-->を参照してください。

### アクセシビリティ上の注意点

`ins`要素、`del`要素にはデフォルトのARIAロールはありませんが[^4]、多くのスクリーンリーダーは、`ins`要素、`del`要素をそれぞれ「追加」「削除」のように読み上げます。追加や削除をしたものに対しては`ins`要素や`del`要素を積極的に使うとよいでしょう。

[^4]: WAI-ARIA 1.2では`insertion`、 `deletion`ロールが導入される予定です。近い将来、`ins`要素は`insertion`ロールを、`del`要素は`deletion`ロールを持つことになるでしょう。\
<https://www.w3.org/TR/wai-aria-1.2/#insertion>\
<https://www.w3.org/TR/wai-aria-1.2/#deletion>

`ins`要素、`del`要素の存在が常に伝わるとは限らないことに注意してください。特に、`del`要素の存在がユーザーに伝わらないと、誤解を招く場合があります。[08]は、価格が改定される前後の価格を、`del`要素と`ins`要素で表現したものです。表示例は[09]のようになります。

<figure>
<figcaption>[08] `del`要素と`ins`要素を用いた記述例</figcaption>
```html
<p>価格 <del>98</del><ins>90</ins>円</p>
```
</figure>

<figure>
<figcaption>[09] ブラウザーによる[08]の表示例</figcaption>
<img src="../image/C3_07_09_1C.png" alt="" />
</figure>

`del`要素で98を削除し、`ins`要素で90に訂正していますが、`del`要素の存在が伝わらない場合、9890円と誤解される可能性があります。

<section class="column">
## コラム: ブロックとインラインはどこへ？

HTML4の内容モデルでは、要素が大きく「ブロックレベル要素」と「インライン要素」の2つに分類されていました。

この分類はCSSの視覚整形モデルの用語「ブロックレベル要素」「インラインレベル要素」に対応しますが、要素の内容モデルとCSSの視覚整形モデルは本質的に異なる概念です。HTML4でブロックレベルに分類されていた要素は、ブラウザーのデフォルトスタイルではブロックレベルの見た目になります。しかし、CSSで`display: inline`を指定すれば見た目をインラインに変更可能であり、分類と実際の表示の食い違いがありました。

現在のHTML Standardでは要素の分類が一新されました。HTML4でインライン要素とされていたものはPhrasingに分類され、ブロックレベル要素のみを分類する区分はなくなりました。ブロックレベル要素とされていたものはFlowに分類されますが、FlowはPhrasingも含んでいるため、指すものが異なります。

HTML4の知識があると、「ブロックレベル要素」に相当する言葉を使いたくなることがあります（たとえば、「`a`要素にブロックレベル要素を入れることができるようになった」のように）。しかし現在ではその区分は存在しませんので、表現に苦慮することがあります。
</section>
