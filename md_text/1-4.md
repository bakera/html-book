# ウェブアクセシビリティの基礎

Chapter1-3ではHTMLの歴史を紹介しました。HTML4の仕様で大きくクローズアップされた概念がアクセシビリティであり、それは現在のHTMLにも受け継がれています。ここでは、ウェブアクセシビリティの基礎について説明します。

## アクセシビリティとは

「アクセシビリティ」(accessibility)は、アクセス可能な度合い、アクセスのしやすさを指す言葉です。より多くの人がアクセスできる状態を「アクセシブル」(accessible)であると言います。たとえば、「車椅子の利用者にとって、階段はアクセシブルではない」という言い方をします。

ウェブにおいては、利用者の障害の有無などにかかわらず、誰もが利用できることを指します。これはウェブの大きな理念のひとつです。2012年のロンドンオリンピックの開会式にはバーナーズ＝リーが登場し、"This is For Everyone" というメッセージを掲げました。またバーナーズ＝リーは、以下のような言葉も述べています。

>The power of the Web is in its universality. Access by everyone regardless of disability is an essential aspect.
>ウェブの力はその普遍性にあります。障害の有無にかかわらず誰もがアクセスできるというのがウェブの本質的な側面なのです。

これはアクセシビリティの理念そのものであり、ウェブは常にアクセシビリティの理念とともにあると言えます。

## さまざまな支援技術

ウェブがアクセシブルである理由のひとつに、ユーザーエージェントの存在があります。ユーザーエージェントの設定を変更すれば、文字の大きさや色合いなどは簡単に変えることができます。障害のあるユーザーでも、自分に合った伝わり方に変えることができるのです。

ユーザーエージェントの設定だけで対応できない場合、支援技術を導入して対応することもできます。支援技術についてはChapter1-2でも簡単に触れましたが、ここでもあらためて紹介します。

なお、ここに挙げるものが支援技術の全てではありません。支援技術はユーザーの状態に合わせてカスタマイズされることも多く、時には専用のハードウェアが作られることもあります。世界には無数の支援技術があると考えた方が良いでしょう。

### 画面拡大ソフト

「画面拡大ソフト」(screen magnifier) は、画面や文字を拡大して表示するソフトウェアで、「拡大ツール」と呼ばれることもあります。主にロービジョン(弱視)のユーザーが利用しますが、そうでないユーザーにも利用されます。特に、スマートフォンやタブレットではピンチ操作で簡単に画面を拡大できることが多く、多くのユーザーが日常的に利用しています。

近年では、ほとんどのOSやブラウザーが拡大の機能を持っていますが、ロービジョンのユーザーには拡大率が不足する場合もあります。その場合、さらに拡大するために専用のソフトウェアを導入することがあります。

画面拡大ソフトの多くは、色を変更する機能も備えています。ロービジョンのユーザーには白背景に黒文字の画面が見づらい人も多く、この機能で画面を白黒反転して利用することがあります。

(図: 拡大しているところ、色反転しているところ)

### スクリーンリーダー

「スクリーンリーダー」(screen reader)は、画面上のテキストを音声で読み上げるソフトウェアで、主に視覚障害のあるユーザーが利用します。音声の読み上げに加え、点字ディスプレイへの出力ができるものもあります。

日本国内では、PC-Talker、JAWS、NVDAなどがよく使われています[^1]。近年ではOSにスクリーンリーダーの機能が組み込まれていることも増えており、iOSやMacOSではVoiceOver、Windowsではナレーターというスクリーンリーダーが利用できます。

[^1]: 日本におけるスクリーンリーダーの利用率は、JBICTによる2021年8月の調査が参考になります。 <https://jbict.net/survey/at-survey-01>

スクリーンリーダーはブラウザーに限らず、OSやアプリケーションの画面全般を音声で読み上げます。ウェブを利用する場合は一般的なブラウザーと組み合わせて使用し[^2]、ブラウザーが表示したコンテンツを読み上げます。

[^2] 専用の音声ブラウザーと組み合わせる場合もあります。たとえば、PC-Talkerと組み合わせて利用できるNetReaderという音声ブラウザーがあります。

スクリーンリーダーには、ユーザーの操作を補助する機能もあります。たとえば、見出しに飛ぶ、リストを読み飛ばす、リンクに飛ぶ、入力欄に移動する、といった操作が可能です。

### 代替ポインティングデバイス

「代替ポインティングデバイス」(alternative pointing devices)は、マウスポインタの操作を他の操作で代替するもので、代替マウスと呼ぶこともあります。主に肢体不自由のユーザーが利用します。

キーボードを利用してマウスを動かすものは「マウスキー」とも呼ばれます。多くのOSはマウスキーの機能を持ち、キーボードのテンキーや、その他の任意のキーでマウスポインタを操作することができます。

キーボードではなく、スティックや視線入力などの専用ハードウェアを利用することもあります。また、単一のボタンだけを利用して操作する方法もあります。たとえばiOSには「スイッチコントロール」と呼ばれる機能があり、これを利用すると単一ボタンだけで全ての操作を行うことができます。

クリックやドラッグといった操作も可能で、ポインタを細かく動かす機能を持つこともあります。ただし、細かい操作には時間がかかる場合があります。

(図: 代替マウスの例)

## アクセシビリティの問題が起きるケース

HTMLは本質的にアクセシブルなものです。それは、ユーザーエージェントがコンテンツを読み取り、個々のユーザーにとって使いやすい形にカスタマイズできるからです。しかし、作り方によっては、ユーザーエージェントがコンテンツを適切に処理できず、アクセシビリティの問題が起きることがあります。

### テキスト情報が不足しているケース

スクリーンリーダーで画像を読もうとした場合、画像の内容を音声で読み上げることは困難です。画像をOCRで解析する方法もないわけではありませんが、現在ではまだ精度が高いとは言えません。つまり、画像はマシンリーダブルではないのです。

そこでHTML仕様では、画像に対して「代替テキスト」(alternative text)と呼ばれるテキスト情報を与える仕組みを用意しています。代替テキストはマシンリーダブルであり、スクリーンリーダーは画像の代わりに代替テキストを読み上げることができます。

逆に、代替テキストが用意されていなければ、スクリーンリーダーは画像の内容を適切に伝えることができなくなってしまいます。

### HTMLの要素を本来と異なる意味で使用するケース

HTMLの要素を本来と異なる意味で用いることも問題を引き起こします。

たとえば、文字を大きくするために見出しの要素を使う、字下げのために引用の要素を使う、レイアウトを調整するために表の要素を使う、といったことが行われると、支援技術はそれぞれを見出し、引用、表として扱ってしまいます。

Chapter1-3で触れたように、以前はHTMLの要素や属性で文書の見た目を整えることがありました。支援技術は、これらがレイアウトのために使われていると判断できず、適切に扱うことができなくなってしまいます。

### 特定の環境で操作が困難になるケース

HTMLのマークアップが適切で、ユーザーエージェントが適切に理解できても、現実的な理由からアクセスが難しくなる場合があります。

たとえば、Webコンテンツの本文の前に大量のリンクが配置されている場合、キーボード操作を行う利用者は、Tabキーを何度も押さなければ本文内のリンクにたどり着けません。同様に、本文の前に大量のテキストがあると、スクリーンリーダーの利用者は本文を読み始めるまで時間がかかることがあります。

別の例としては、画面の激しい点滅があります。人によっては、激しい点滅を見ると気分が悪くなったり、操作を継続できなくなったりすることがあります。このようなケースもアクセシビリティの問題があると言えます。

## アクセシビリティガイドライン

ウェブは本来アクセシブルなものですが、コンテンツの作り方によっては、アクセシブルでなくなってしまうことがあります。

そこで、HTML仕様とは別に、ウェブコンテンツのアクセシビリティを確保するためのガイドラインが求められました。W3Cを筆頭にアクセシビリティガイドラインの標準化が行われることになります。

### WAIの発足とWCAG 1.0

1997年、W3Cは、ウェブアクセシビリティを推進する組織として「Web Accessibility Initiative」(WAI)[^3][^4]を発足させます。

[^3]: <https://www.w3.org/WAI/>
[^4]: WAIは「ワイ」や「ウェイ」などと発音します。英語圏でも発音は一定ではないようです。

WAIは、ウェブコンテンツで起きるアクセシビリティの問題をまとめ、問題を避けるための解決策を「Web Content Accessibility Guidelines」(WCAG)[^5]としてまとめていきました。

[^5]: https://www.w3.org/WAI/standards-guidelines/wcag/

1999年、WCAGの最初の版である WCAG 1.0[^6]が勧告となります。

[^6]: https://www.w3.org/TR/WCAG10/

WCAG 1.0では、14のガイドラインと、それぞれのガイドラインに対する具体的なチェックポイントが網羅されました。

チェックポイントの中には、かなり具体的な内容も含まれていました。たとえば、5番目のガイドラインは "Create tables that transform gracefully" というもので、各チェックポイントはHTMLの`table`要素の使い方に関する具体的なアドバイスとなっています。これはわかりやすい反面、HTML以外のもの、たとえばPDFやFlashで作られたコンテンツに適用できないという問題もありました。

### JIS X 8341-3:2004

WCAG 1.0はさまざまな国で利用されるようになりましたが、ガイドラインは基本的に欧文のコンテンツを想定した内容となっており、国によっては内容を変更したり、独自の内容を追加することもありました。

日本では、2004年に日本工業規格JIS X 8341-3:2004が策定されました。この規格はWCAG 1.0を参考にしていますが、単語内スペース[^7]など、日本語特有の問題に関するガイドラインを追加しています。

[^7]: 表示幅の都合で単語の中にスペースを入れることを指します。たとえば、「会社」の表示幅を広げるためにスペースを入れて「会　社」と表記すると幅が広がって見えますが、スクリーンリーダーでは「かい やしろ」などと読まれてしまい、伝わらなくなります。

また、日本独自の内容として、制作プロセスに関する規定も盛り込まれました。ウェブコンテンツの企画、制作、運用の各プロセスにおいてアクセシビリティ向上の取り組みを求めるものです。<!-- これが2016年に深刻な問題を起こすのであった -->その他、具体的な事例や図版も多数追加されており、わかりやすさを重視した内容になっていました。
<!--
歴史経緯の参考:
http://www.accessibility.org/workshops/200407-jis/
https://www.dinf.ne.jp/doc/japanese/access/it/WCAG_umegaki.html
-->

### WCAG 2.0

その後、WAIはWCAGの改正作業を行い、2008年にWCAG 2.0が勧告となりました。

WCAG 1.0のガイドラインは主にスクリーンリーダーの利用者を意識したものでしたが、WCAG 2.0はより幅広い利用者に対応しています。たとえば、認知や識字に関する障害に対応し、文章の読みやすさやコンテンツの理解しやすさに関するガイドラインが追加されました。

また、国際協調も行われました。先に述べたように、日本ではWCAG 1.0に対して日本語特有のガイドラインを追加していました。WCAG 2.0ではこのような
各国の事情も取り込み、さまざまな国でそのまま利用できるようにしています。実際、WCAG 2.0はさまざまな国で採用され、事実上の標準の地位を得ていきます。

最終的にガイドラインは12に整理され、以下の4つの原則のもとに整理されました。

1. 「知覚可能」(Perceivable)
2. 「操作可能」(Operable)
3. 「理解可能」(Understandable)
4. 「堅牢」(robust)

さらに、各ガイドラインの下には、実際に守るべき基準である「達成基準」(success criterion)<!-- 複数形の criteria が使われることが多いがひとまず単数で統一 -->が列挙されています。

WCAG 1.0のチェックポイントの中には、コンテンツが実際に要求を満たしているのか判断することが難しいものもありました。WCAG 2.0では基準を明確にし、達成基準を満たすかどうかを客観的に試験できるようにしました。

また、WCAG 1.0のチェックポイントが主にHTMLを想定したていたのに対し、WCAG 2.0の達成基準は、特定の技術によらない汎用的な記述になりました。これにより、FlashやPDFなど、HTML以外の技術にも適用できるようになりました。

ただし、記述が汎用的になったということは、具体性のない、抽象的な記述になったということでもあります。そこで、詳しい説明や具体例は別の文書として整備することになりました。それが、Understanding WCAG 2.0[^8]とTechniques for WCAG 2.0[^9]です。

[^8]: https://www.w3.org/TR/UNDERSTANDING-WCAG20/
[^9]: https://www.w3.org/TR/WCAG20-TECHS/

これらはあえて勧告とはせず、Working Group Noteのままで運用されます。勧告には時間がかかり、技術に変化があった時に内容をすぐには書き換えられないためです。実際、これらの文書は頻繁に更新されることになります。

### JIS X 8341-3:2010とウェブアクセシビリティ基盤委員会

日本でもWCAG 2.0を採用する動きがありました。JIS X 8341-3は2010年に改定され、JIS X 8341-3:2010となりました。この際、WCAG 2.0の達成基準が全て取り込まれ、ガイドラインの内容はWCAGと一致するものになりました。

ただし、2004年版にもあった制作プロセスの規定は残りました。また、試験の実施方法についての規定も盛り込まれました。これらはWCAGにはないもので、日本独自の規定として付け加えられています。

また、この規格ができた際、関連文書をどうするかが問題になりました。先に述べたように、WCAG 2.0には関連文書があります。この文書の内容は頻繁に更新される予定であり、規格文書に盛り込むことには無理がありました。そこで、関連文書の公開と維持を行い、あわせてJIS X 8341-3の普及・啓発を行う組織として生まれたのが「ウェブアクセシビリティ基盤委員会」(Web Accessibility Infrastructure Committee、WAIC)[^10]です。

[^10]: <https://waic.jp/> <!--当時のURLと違うがそこまで拘らなくてよいであろう-->

WAICはWCAG 2.0の関連文書を翻訳し、それぞれ「WCAG 2.0 解説書」[^11]「WCAG 2.0 達成方法集」[^12]として公開しました。

[^11]: https://waic.jp/docs/UNDERSTANDING-WCAG20/Overview.html
[^12]: https://waic.jp/docs/WCAG-TECHS/Overview.html

WAICはこのほか、JIS X 8341-3:2010の運用に関する各種のガイドラインを公開しており、現在も活動を続けています。

### ISO/IEC 40500:2012

2012年には、WCAG 2.0はISO/IEC規格ISO/IEC 40500:2012となりました。この規格はWCAG 2.0の内容そのままであり、内容が完全に一致しています。<!--規格票を買ったらWCAG2.0を表示するframeset文書のHTMLが送られてきたという伝説があります-->これにより、WCAG 2.0のガイドラインは名実ともに国際標準となりました。

なお、ISO/IEC 40500:2012には関連文書は含まれていませんが、規格の中からハイパーリンクする形で関連文書を参照しています。<!--というか単にリンクも含めて全部そのまんまなだけですけど-->

### JIS X 8341-3:2016

JIS規格が発行されると、原則として5年以内に見直しが行われ[^13]、改定が必要かどうか判断されます。

[^13]: 産業標準化法17条で「改正の日から少なくとも五年を経過する日までに」と規定されています。

JIS X 8341-3:2010も見直しが行われましたが、この際、ISO/IEC 40500:2012の存在が重視されました。Chapter1-3でも触れたように、対応国際規格が存在する場合は、原則として内容を一致させることが求められます。

JIS X 8341-3:2010の達成基準はWCAG 2.0と同一であり、ISOとも一致しているため、この点は大きな問題になりませんでした。ただし、意訳で意味を補いすぎているものや、訳語がわかりにくいものは見直しを行っています。たとえば、達成基準2.2.4の"Interruptions"は「中断」から「割り込み」に変更されています。

見直し時に大きな問題となったのは、日本独自の規定です。2010年版には、ISOにはない、制作プロセスと試験に関する規定が存在します。この規定を削除してISOとの一致規格(IDT)にするべきという意見もありましたが、既に公共サイトの多くがこの独自規定に従って取り組みをしていることもあり、規定を残して修正規格(MOD)にすべきだという意見もありました。

議論の末、日本独自の内容は規定本文からは削除し、そのかわり参考情報として盛り込むこととしました。制作プロセスの推奨事項は「附属書 JA(参考)」として、試験方法は「附属書 JB(参考)」として規格票に付属します。これにより、JIS X 8341-3:2016はISO/IEC 40500:2012との一致規格となりました。

### WCAG 2.1とその後

WCAG 2.0は円熟したガイドラインとして広く受け入れられましたが、問題点がないわけではありませんでした。問題の一つは、急速に普及したモバイルデバイスとタッチデバイスへの対応が不十分だった点です。また、認知障害や学習障害、ロービジョンのユーザーへの対応が不十分だという声もありました。

そこで、WCAG2.0にガイドラインが1つ、達成基準が17追加され、2018年にWCAG 2.1[^14]として勧告となりました。

[^14]: <https://www.w3.org/TR/WCAG21/>

WCAG 2.0の達成基準は削除されることなく、全てそのまま残っています。そのため、WCAG 2.1に適合するようにコンテンツを制作すれば、WCAG 2.0にも適合することになります。

2021年10月現在、WCAG 2.1はISO規格やJIS規格にはなっていませんが、ウェブアクセシビリティ基盤委員会は参考情報としてWCAG 2.1の日本語訳[^15]を公開しています。

[^15]: <https://waic.jp/docs/WCAG21/>

2021年10月現在、WAIではさらなるアップデート版であるWCAG 2.2[^16]の作業が進んでおり、Working Draftとなっています。

[^16]: https://www.w3.org/TR/WCAG22/

また、並行してメジャーアップデートの作業も進んでおり、WCAG 3.0[^17]のWorking Draft文書が公開されています。

[^17]https://www.w3.org/TR/wcag-3.0/

#### 本書における達成基準の表記

本書ではWCAGの達成基準に触れる箇所がありますが、2021年10月時点での最新の勧告であるWCAG 2.1を参照しています。ただし、わかりやすさのために、達成基準の名称はウェブアクセシビリティ基盤委員会の日本語訳を参照しています。

## WAI-ARIA

WAIが発行している文書は、WCAGだけではありません。もうひとつの重要なものとして、WAI-ARIA[^18]が挙げられます。ARIAは、Accessible Rich Internet Applicationsの略称です。

[^18]: <https://www.w3.org/TR/wai-aria/>

Chapter1-3でも触れたように、ウェブアプリケーションが進化し、動的に変化するユーザーインターフェイスを実現するようになったものを「リッチインターネットアプリケーション」(Rich Internet Application)と呼びます。

しかし、リッチインターネットアプリケーションは、しばしばアクセシビリティ上の問題を起こします。独自に作られたインターフェイスが支援技術に十分な情報を提供できなかったり、動的なインタラクションがユーザーに伝わらない場合などがあります。

この問題を解決するために作られた技術仕様が、WAI-ARIAです。WAI-ARIAは単独で使うものではなく、別のマークアップ言語と組み合わせて、それを補助する形で利用します。組み合わせる相手のマークアップ言語のことを「ホスト言語」(host language)と呼びます。HTMLがホスト言語になることがほとんどですが、たとえばSVGがホスト言語になることもあります。

WAI-ARIAを利用すると、HTMLの要素に対して、支援技術に伝える情報を追加することができます。HTMLに`role`属性を追加することで要素の役割の情報を、`aria-`で始まる属性を追加することで要素の状態に関する情報を伝えることができます。

WAI-ARIAも非常に大きな仕様であり、複数の関連文書を伴った構成になっています。WAI-ARIAの詳細はChapter4-2で説明します。
