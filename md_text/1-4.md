# ウェブアクセシビリティの基礎

Chapter1-3ではHTMLの歴史を紹介しました。HTML4の仕様で大きくクローズアップされた概念がアクセシビリティであり、それは現在のHTMLにも受け継がれています。ここでは、ウェブアクセシビリティの基礎的な部分を説明します。

## アクセシビリティとは

「アクセシビリティ」(accessibility)は、アクセス可能な度合い、アクセスのしやすさを指す言葉です。より多くの人がアクセスできる状態を「アクセシブル」(accessible)であると言います。たとえば、「車椅子の利用者にとって、階段はアクセシブルではない」という言い方をします。

ウェブにおいては、利用者の障害の有無などにかかわらず、誰もがウェブコンテンツを利用できることを指します。誰もが利用できることは、ウェブの大きな理念のひとつです。2012年のロンドンオリンピックの開会式にはバーナーズ＝リーが登場し、"This is For Everyone" というメッセージを掲げました。またバーナーズ＝リーは、以下のような言葉も述べています。

>The power of the Web is in its universality. Access by everyone regardless of disability is an essential aspect.
>ウェブの力はその普遍性にあります。障害の有無にかかわらず誰もがアクセスできるというのがウェブの本質的な側面なのです。

ウェブは本質的にアクセシブルなものであり、誰もが利用できるものなのです。ウェブは常にアクセシビリティの理念とともにあったと言えます。

## さまざまな支援技術

ウェブが本質的にアクセシブルである理由のひとつは、間にユーザーエージェントが介在することです。ユーザーは、ユーザーエージェントを変更したり、設定を変更したりすることで、ウェブコンテンツの見え方や伝わり方を自分に合ったものに変えることができます。

ユーザーエージェントの設定だけで対応できない場合、支援技術を導入して対応することもできます。Chapter1-2でも簡単に触れましたが、ここでもいくつかの支援技術を紹介します。

なお、ここに挙げるものが支援技術の全てではありません。支援技術はユーザーの状態に合わせてカスタマイズされることも多く、時には専用のハードウェアが作られることもあります。世界には無数の種類の支援技術があると考えた方が良いでしょう。

### 画面拡大ソフト

「画面拡大ソフト」(screen magnifier) は、画面や文字を大きく拡大して表示するためのソフトウェアです。「拡大ツール」と呼ばれることもあります。主にロービジョン(弱視) のユーザーが利用しますが、そうでないユーザーにも利用されることがあります。特に、スマートフォンやタブレットではピンチ操作で簡単に画面を拡大でき、ユーザーの多くが日常的に拡大の操作をしています。

近年では、ほとんどのOSやブラウザーが拡大の機能を持っていますが、ロービジョンのユーザーには拡大率が不足する場合もあり、さらに大きくするために専用ソフトウェアを導入することもあります。

画面拡大ソフトの多くは、画面の色を変更する機能も備えています。白背景に黒文字の画面が見づらい人は、この機能で画面を白黒反転することがあります。

### スクリーンリーダー

「スクリーンリーダー」(screen reader)は、画面の内容を音声で読み上げるソフトウェアです。主に視覚障害のあるユーザーが利用します。ブラウザーに限らず、OSやアプリケーションの画面全般を音声で読み上げます。音声の読み上げに加え、点字ディスプレイへの出力ができるものもあります。

日本国内では、PC-Talker、JAWS、NVDAなどがよく使われています[^1]。近年ではOSにスクリーンリーダーの機能が組み込まれていることも増えており、iOSやMacOSではVoiceOver、Windowsではナレーターというスクリーンリーダーが利用できます。

[^1]: 日本におけるスクリーンリーダーの利用率は、JBICTによる2021年8月の調査が参考になります。 <https://jbict.net/survey/at-survey-01>

ウェブを利用する場合は一般的なブラウザーと組み合わせて使用し、ブラウザーが表示したコンテンツを読み上げます。スクリーンリーダーは情報の読み上げだけでなく、操作の補助も行ないます。ウェブでは、次の見出しに飛ぶ、リストを読み飛ばす、次の入力欄に移動する、といった操作ができます。

中には、スクリーンリーダーと組み合わせて利用する専用のブラウザーもあります。NetReaderは、PC-Talkerと組み合わせて使用する音声ブラウザーです。

### 代替ポインティングデバイス

「代替ポインティングデバイス」(alternative pointing devices)は、マウスポインタの操作を他の操作で代替するものです。代替マウスと呼ぶこともあります。主に肢体不自由のユーザーが利用します。

マウスによらない入力、たとえばキーボードやボタン、スティック、視線入力などの操作でマウスポインタを動かします。クリックやドラッグといった操作も可能で、ポインタを細かく動かす機能を持つことも多いのですが、たいていの場合、細かい操作には時間がかかります。

## アクセシビリティの問題が起きるケース

HTMLは本質的にアクセシブルなものです。それは、ユーザーエージェントがコンテンツを読み取り、個々のユーザーにとって使いやすい形にカスタマイズできるからです。しかし、作り方によっては、ユーザーエージェントがコンテンツを適切に処理できず、アクセシビリティの問題が起きることがあります。

### テキスト情報が不足しているケース

たとえば、スクリーンリーダーで画像を読もうとした場合、画像の内容を音声で読み上げることは困難です。画像をOCRで解析する方法もないわけではありませんが、現在ではまだ精度が高いとは言えません。つまり、画像はマシンリーダブルではないのです。そこでHTML仕様では、画像に対して「代替テキスト」(alternative text)と呼ばれるテキスト情報を与える仕組みを用意しています。代替テキストはマシンリーダブルであり、スクリーンリーダーは画像の代わりに代替テキストを読み上げることができます。

### HTMLの要素を本来と異なる意味で使用するケース

また、HTMLの要素を本来と異なる意味で用いることも問題を引き起こします。たとえば、文字を大きくするために見出しの要素を使う、字下げのために引用の要素を使う、レイアウトを調整するために表の要素を使う、といったケースです。この場合、支援技術はこれらがレイアウトのために使われていると判断できず、それぞれを見出し、引用、表として扱ってしまいます。

Chapter1-3で触れたように、以前はHTMLの要素や属性で文書の見た目を整えることがあり、問題のあるHTMLがたくさん作り出されていました。

### 特定の環境で操作が困難になるケース

HTMLのマークアップが適切で、ユーザーエージェントが適切に理解できても、現実的な理由からアクセスが難しくなる場合があります。たとえば、Webコンテンツの本文の前に大量のリンクが配置されている場合、キーボード操作を行う利用者は、Tabキーを何度も押さなければ本文内のリンクにたどり着けません。同様に、本文の前に大量のテキストがあると、スクリーンリーダーの利用者は本文を読み始めるまで時間がかかることがあります。

## アクセシビリティガイドライン

ウェブは本質的にアクセシブルなものですが、コンテンツ作り方によってはアクセシブルでないコンテンツを生み出してしまいます。そこで、HTML仕様とは別に、ウェブコンテンツのアクセシビリティを確保するためのガイドラインが求められました。W3Cをはじめ、さまざまな組織がアクセシビリティガイドラインの標準化を行うことになります。

### WAIの発足とWCAG 1.0

1997年、W3Cは、ウェブアクセシビリティを推進する組織として「Web Accessibility Initiative」(WAI)[^3][^4]を発足させます。

[^3]: <https://www.w3.org/WAI/>
[^4]: WAIは「ワイ」や「ウェイ」などと発音します。英語圏でも発音は一定ではないようです。

WAIは、ウェブコンテンツで起きるアクセシビリティの問題をまとめ、問題を避けるための解決策を「Web Content Accessibility Guidelines」(WCAG)[^5][^6]としてまとめていきました。

[^5]: https://www.w3.org/WAI/standards-guidelines/wcag/
[^6]: 

1999年、WCAGの最初の版である WCAG 1.0[^6]が勧告となります。

[^6]: https://www.w3.org/TR/WCAG10/

WCAG 1.0では、14のガイドラインと、それぞれのガイドラインに対する具体的なチェックポイントが網羅されました。

コンテンツの適合度はレベルA、ダブルA、トリプルAの3段階で評価できます。各チェックポイントには「優先度」(Priority)が1〜3の数値で設定されており、優先度1のポイントを全て満たせばレベルA、1と2のポイントを全て満たせばダブルA、全てのチェックポイントを満たせばトリプルAとなります。

チェックポイントの中には、かなり具体的な内容も含まれていました。たとえば、5番目のガイドラインは "Create tables that transform gracefully" というもので、各チェックポイントはHTMLの`table`要素の使い方に関する具体的なアドバイスとなっています。

また、WCAG 1.0では "Until user agents..." という表現が多用されていました。これは、ユーザーエージェントや支援技術が特定の機能に対応するまでの暫定対応とされていたものです。しかし実際には、ユーザーエージェント側の対応はあまり進みませんでした。支援技術のサポート状況をまとめるコンテンツも作られましたが[^7]、多くの項目が No information とされたままになりました。

[^7]: User Agent Support for Accessibility https://www.w3.org/WAI/Resources/WAI-UA-Support

### JIS X 8341-3:2004

WCAG 1.0は普及し、さまざまな国で利用されるようになりましたが、国によっては内容を変更したり、独自の内容を追加する形で採用されることもありました。

日本では、2004年に日本工業規格JIS X 8341-3:2004が策定されました。この規格はWCAG 1.0を参考にしていますが、単語内スペース[^8]など、日本語特有の問題に関するガイドラインが追加されています。

[^8]: 単語内スペースとは、表示幅の都合で単語の中にスペースを入れることを指します。たとえば、「会社」の表示幅を広げるためにスペースを入れて「会　社」と表記すると幅が広がって見えますが、スクリーンリーダーでは「かい やしろ」などと読まれてしまい、伝わらなくなります。

また、独自の内容として、制作プロセスに関する規定も盛り込まれました。ウェブコンテンツの企画、制作、運用の各プロセスにおいてアクセシビリティ向上の取り組みを行うことが要求されています。<!-- これが2016年に深刻な問題を起こすのであった -->

その他、具体的な事例や図版も多数追加されており、わかりやすさを重視した内容になっていました。
<!--
歴史経緯の参考:
http://www.accessibility.org/workshops/200407-jis/
https://www.dinf.ne.jp/doc/japanese/access/it/WCAG_umegaki.html
-->

### WCAG 2.0

その後、WAIはWCAGの改正作業を行い、2008年にWCAG 2.0が勧告となりました。

WCAG 1.0のガイドラインは主にスクリーンリーダーの利用者を意識したものでしたが、WCAG 2.0ではより幅広い利用者に対応しています。たとえば、認知や識字に関する障害に対応し、文章の読みやすさやコンテンツの理解しやすさに関するガイドラインが追加されました。

また、国際協調も行われました。先に述べたように、WCAG 1.0は、主に欧文を想定したガイドラインであり、各国は独自に基準を追加していました。WCAG 2.0では、そういった基準をガイドラインに取り込み、国際化対応を可能にしています。実際、WCAG 2.0はさまざまな国で採用され、事実上の標準の地位を得ていきます。

最終的にガイドラインは12に整理され、以下の4つの原則のもとに整理されました。

1. 「知覚可能」(Perceivable)
2. 「操作可能」(Operable)
3. 「理解可能」(Understandable)
4. 「堅牢」(robust)

さらに、各ガイドラインの下には、実際に守るべき基準である「達成基準」(success criterion)<!-- 複数形の criteria が使われることが多いがひとまず単数で統一 -->が列挙されています。

WCAG 1.0のチェックポイントの中には、コンテンツが実際に要求を満たしているのか判断することが難しいものもありました。WCAG 2.0では基準を明確にし、基準を満たしているかどうかを客観的に試験できるようにしました。

達成基準は、特定の技術に依存しない記述になりました。WCAG 1.0のチェックポイントの多くはHTMLを想定しており、たとえばPDFやFlashで作られたコンテンツには適用できませんでした。WCAG 2.0の達成基準は、特定の技術によらない記述になっており、さまざまな技術に適用できるようになりました。

ただし、特定の技術によらない記述は、具体例のない抽象的な記述でもあり、理解が難しいという問題がありました。そこで、達成基準の内容を理解するための詳しい説明と、特定の技術を用いた具体例を、それぞれ別の文書として整備することになりました。それがUnderstanding WCAG 2.0[^10]とTechniques for WCAG 2.0[^11]です。

[^10]: https://www.w3.org/TR/UNDERSTANDING-WCAG20/
[^11]: https://www.w3.org/TR/WCAG20-TECHS/

これらはあえて勧告とはせず、Working Group Noteのままで運用されることになりました。勧告には時間がかかり、技術に変化があった時に内容をすぐには書き換えられないためです。実際、これらはその後、頻繁に更新されることになります。

### JIS X 8341-3:2010とウェブアクセシビリティ基盤委員会

日本でもWCAG 2.0を採用する動きがありました。JIS X 8341-3は2010年に改定され、JIS X 8341-3:2010となりました。この際、WCAG 2.0の達成基準が全て取り込まれ、基準の内容は完全に一致するものになりました。

ただし、2004年版にあった制作プロセスの規定は残りました。また、コンテンツが規格に適合するか試験する場合の実施方法の規定も盛り込まれました。このため、この規格はWCAG 2.0を日本語化しただけではなく、独自の規定を付け加えたものとなっています。

この規格ができた際、WCAG 2.0の関連文書をどうするかが問題になりました。
先に述べたように、WCAG 2.0には関連文書があります。この文書の内容は頻繁に更新される予定であり、規格文書に盛り込むことには無理がありました。

そこで、関連文書の公開と維持を行い、あわせてJIS X 8341-3の普及・啓発を行う組織として生まれたのが「ウェブアクセシビリティ基盤委員会」(Web Accessibility Infrastructure Committee、WAIC)[^10]です。

[^10]: <https://waic.jp/> <!--当時のURLと違うがそこまで拘らなくてよいであろう-->

WAICはWCAG 2.0の関連文書を翻訳し、それぞれ「WCAG 2.0 解説書」[^11]「WCAG 2.0 達成方法集」[^12]として公開しました。

[^11]: https://waic.jp/docs/UNDERSTANDING-WCAG20/Overview.html
[^12]: https://waic.jp/docs/WCAG-TECHS/Overview.html

このほか、JIS X 8341-3:2010の運用に関する各種のガイドラインを公開しています。

### ISO/IEC 40500:2012

2012年には、WCAG 2.0はISO/IEC規格ISO/IEC 40500:2012となりました。この規格はWCAG 2.0の内容そのままであり、内容が完全に一致しています。<!--規格票を買ったらWCAG2.0を表示するframeset文書のHTMLが送られてきたという伝説があります-->これにより、WCAG 2.0のガイドラインは名実ともに国際標準となりました。

なお、ISO/IEC 40500:2012には関連文書は含まれていませんが、規格の中からハイパーリンクする形で関連文書を参照しています。<!--というか単にリンクも含めて全部そのまんまなだけですけど-->

### JIS X 8341-3:2016

JIS規格が発行されると、原則として5年以内に見直しが行われ、改定が必要かどうか判断されます。
<!--
産業標準化法 第十七条
主務大臣は、第十一条（前条において準用する場合を含む。）の規定により制定し、又は確認し、若しくは改正した産業標準がなお適正であるかどうかを、その制定又は確認若しくは改正の日から少なくとも五年を経過する日までに調査会の審議に付し、速やかに、これを確認し、又は必要があると認めるときは改正し、若しくは廃止しなければならない。
-->

JIS X 8341-3:2010も見直しが行われましたが、この際、ISO/IEC 40500:2012の存在が重要視されました。Chapter1-3でも触れましたが、JIS規格に対応する国際規格が存在する場合には、原則として内容を一致させることが求められます。

JIS X 8341-3:2010の場合、達成基準はWCAG 2.0とほぼ同一のものになっています。これはISOとも同一であり、大きな問題はないように思われました。ただし、達成基準の一部には、意訳になっているものや、訳注として意味を追加しすぎているもの、訳語がわかりにくいものなどが散見されたため、WCAG 2.0と同一の内容が適切に伝わるようにという観点で訳語の見直しを行っています。

大きな問題となったのは、日本独自の規定をどうするかでした。2010年版のJISには制作プロセスと試験に関する規定が存在し、この点はISOと異なっています。

国内の公共サイト制作の立場からは、この規定を残し、ISOと異なる内容のままにすべきだという意見が出ました。官公庁は既にこれに沿って取り組みを実施しており、JISから規定がなくなると過去の取り組みが否定され、取り組みが後退するという主張でした。<!--実際の議論では「梯子を外される」という表現が使われていた-->

その一方で、海外展開を行う企業の立場からは、この規定を削除して完全にISOと一致させるべきだという意見が出ました。日本独自のプロセスを規定されると、海外のサイトと共通の制作方法を適用できない<!--要するにグローバル企業のWebサイトのスタイルガイドが適用できない-->という問題が指摘されました。

長い議論の末、日本独自の内容は規定本文からは削除し、そのかわり参考情報として盛り込むこととしました。制作プロセスの推奨事項は「附属書 JA(参考)」として、試験方法は「附属書 JB(参考)」として規格票に付属します。これにより、JIS X 8341-3:2016はISO/IEC 40500:2012との一致規格となりました。

### WCAG 2.1とWCAG 2.2

WCAG 2.0は円熟したガイドラインとして広く受け入れられましたが、問題点がないわけではありませんでした。問題の一つは、急速に普及したモバイルデバイスとタッチデバイスへの対応が不十分だった点です。そのほか、WCAGに達成基準を追加すべきであるというニーズがありました。





<!-- 以下WIP -->




#### 本書における達成基準の表記

本書ではWCAGの達成基準に触れる箇所がありますが、2021年10月時点で最新の勧告であるWCAG 2.1を参照しています。ただし、わかりやすさのために、達成基準の名称はW3Cの原文ではなく、ウェブアクセシビリティ基盤委員会が作成するWCAG 2.1の日本語訳[^10]を参照して記載しています。

[^10]: https://waic.jp/docs/WCAG21/

[^11]: https://www.w3.org/WAI/WCAG21/Understanding/

[^12]: https://www.w3.org/WAI/fundamentals/

[^13]: 太田良典、伊原力也著『デザイニングWebアクセシビリティ』




## WAI-ARIAの概説

WAI-ARIA[^1]とは、W3Cによって発行されている仕様[^2]の名称で、単にARIAとも呼ばれます。

[^1]: 「ワイ アリア」や「ウェイ アリア」などと発音します。WAIの発音は英語圏でも一定ではないようです。

[^2]: <https://www.w3.org/TR/wai-aria/>

WAI-ARIAのWAIはWeb Accessibility Initiativeの略称で、W3C内部に存在するウェブアクセシビリティを推進する組織です[^3]。ARIAとは、Accessible Rich Internet Applicationsの略称です。ここでの"Rich"は、表現が豊かであるという意味ですが、端的にはクライアント側で動的な処理を行うことを指します。

[^3]: <https://www.w3.org/WAI/>

かつてのウェブアプリケーションは、静的HTMLのフォームからデータを送信してサーバー側で処理することが一般的でした。その後、ブラウザーの表現力の向上に伴い、動的に変化するコンテンツや、複雑なユーザーインターフェイスを実現できるようになりました。これらは、従来のものより豊かな表現であるという意味で「リッチアプリケーション」と呼ばれます。

このようなリッチなアプリケーションは、しばしばアクセシビリティ上の問題を抱えることがあります。HTMLが元々用意しているフォームコントロールと異なるリッチなインターフェイスは、スクリーンリーダーなどの支援技術を使っているユーザーに対して十分な情報を提供できない場合があります。これを補うために作られたのがWAI-ARIAです。

WAI-ARIAは単独で使うものではなく、別のマークアップ言語と組み合わせて、それを補助する形で利用します。組み合わせる相手のマークアップ言語のことを「ホスト言語」(host language)と呼びます。HTMLがホスト言語になることがほとんどですが、たとえばSVGがホスト言語になることもあります。



### 動作検証とアクセシビリティサポーテッド

最後に、筆者が重要だと考えている動作検証についてお伝えします。

アクセシビリティに関する技術や機能が、ブラウザーや支援技術によって十分に対応されており、意図どおりに動作するとき、その状態のことを「アクセシビリティサポーテッド」(Accessibility supported)であると言います。逆に、ブラウザーや支援技術によるサポートが十分でない場合、アクセシビリティサポーテッドでないということになります。

特に、WAI-ARIAは比較的新しい技術でもあり、古い支援技術<!-- や日本でよく利用されているPC-Talker+NetReaderなど -->はARIA属性を十分にサポートしていないことがあります。仕様で規定されたARIA属性を適切に利用していても、それがアクセシビリティサポーテッドでないことがあり、意図どおりに機能しないことがあるということです。

また、ARIAのルールにはかなり複雑な部分があります。ここでも説明してきたように、特定の要素に適用できないロールがある、ロールとARIA属性との組み合わせが許されていない場合がある、他のARIA属性によって効果が上書きされる場合があるなど、さまざまな注意点があります。正直なところ、これらすべてを正確に把握するのはかなり難しく、正しい効果が予想しにくい場合もあるでしょう。

そこで重要になるのが、動作検証です。検証といっても、大掛かりなものである必要はありません。最近では多くのOSにスクリーンリーダーの機能が組み込まれており、追加のスクリーンリーダーを導入することなく検証を行うこともできます。ARIA属性を利用するときには、実際にスクリーンリーダーを利用してアクセスし、動作検証を行うようにしましょう。

さらに、可能であれば、普段から支援技術を利用しているユーザーにアクセスしてもらって、その意見を聞くとよいでしょう。説明が冗長であるというような感想は、コンテンツの実装者からはなかなか出てこないものです。

アクセシビリティに唯一の正解はありませんが、WAI-ARIAを利用するのは、支援技術でもコンテンツにアクセスしやすくしたいという動機によるものです。支援技術のユーザーに実際にコンテンツにアクセスしてもらい、フィードバックを得ることで、品質を向上できるでしょう。




