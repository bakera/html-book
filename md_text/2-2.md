# 属性

Chapter2-1では、タグを使って要素をマークアップする方法を紹介しました。ここでは一歩進んで、要素に“属性”をつける方法について紹介します。

## 属性の基本

HTMLを特徴付けるのは“ハイパーリンク”、あるいは単に“リンク”とも呼ばれる仕組みです。リンクは`a`要素で表現します。文中のテキストの一部を単純に`a`要素としてマークアップすると、以下のようになります。

```html
<p>詳しくは<a>HTML Living Standard</a>をご覧ください。</p>
```

これで、`a`要素の範囲がわかるようになりました。しかし、肝心のリンク先の情報がどこにもありません。リンク先の情報を追加すると、以下のようになります。

```html
<p>詳しくは<a href="https://html.spec.whatwg.org/">HTML Living Standard</a>をご覧ください。</p>
```

開始タグの中に`href`で始まる文字列が含まれています。これによって、リンク先のURLの情報を表現しています。このようにして要素に情報を付け加える表現を「属性」(attribute)と呼びます。

属性には名前と値があり、それぞれ「属性名」(attribute name)、「属性値」(attribute value)と呼ばれます。上記の例では、属性名が`href`、属性値が`https://html.spec.whatwg.org/`となります。

## 属性の書き方

属性を書く際は、属性名の後ろに`=`を記述し、続けて属性値を書きます。属性値は、原則として二重引用符(`"`)または単引用符(`'`)で括ります。引用符はどちらを使っても構いませんが、同じ引用符でペアにしなければなりません。引用符を省略できる場合もありますが、常に引用符で括る方が無難です。

以下は、`abbr`要素に`title`という属性名の属性を指定し、属性値を`accessibility`とした例です。

```html
<abbr title="accessibility">a11y</abbr>
```

属性値に引用符を含めたい場合、属性名を括る引用符のペアと異なる引用符については、そのまま書くことができます。

```html
<span title="Murphy's law">Anything that can possibly go wrong, does.</span>
```

### 複数の属性

1つの要素に複数の属性を同時に指定することもできます。

```html
<a rel="external" href="https://html.spec.whatwg.org/">HTML Living Standard</a>
```

ただし、同名の属性は1つだけしか指定できません。詳細についてはChapter2-8を参照ください。

属性の前後は、「ASCII空白文字」(ASCII whitespace)で区切ります。1つ以上であれば、好きなだけ入れることができます。ASCII空白文字には改行も含まれますので、改行を入れることもできます。多数の属性があって読みにくい時などに便利です。

```html
<a
  rel="external"
  href="https://html.spec.whatwg.org/"
>HTML Living Standard</a>
```

## 属性値

属性がどのような値を取れるかは、属性ごとに異なります。多くの属性は任意のテキストを値に取りますが、特定のパターンの値を取る属性もあります。

### ブール型属性

属性の中には、真偽、on/offだけを表すものがあります。そのような属性を「ブール型属性」(boolean attribute)と呼びます[^1]。たとえば、要素を非表示にする`hidden`属性はブール型属性で、以下のように指定します。

[^1]: 真偽属性や論理属性などと呼ばれることもあります。

```html
<p hidden="hidden">この内容は表示されません</p>
```

この例では、属性名と同じ属性値を指定しています。ブール型属性では、属性名と同じ属性値を書くことで、その属性が有効であることを表します。この例では`hidden`属性が有効になり、この要素が非表示になります。

しかし、属性名と全く同一の値をもう一度書くのは冗長あり、面倒でもあります。そこで、以下のように省略する書き方も許されています。

```html
<p hidden="">この内容は表示されません</p>
<p hidden>この内容は表示されません</p>
```

いずれも、`hidden="hidden"`と書いた場合と同じ効果になります。`hidden=""`は属性値が空ですが、これが真、onを意味することに注意してください。`hidden`を無効にする場合は、属性自体を省略します。

```html
<p>この内容は表示されます</p>
```

### 列挙型属性とキーワード

属性の中には、あらかじめ決められた属性値しか取れないものがあります。たとえば、`dir`属性は書字方向を指定する属性ですが、属性値として`ltr`、`rtl`、`auto`のいずれかを指定できます。これ以外の値を指定することはできません。

このように、あらかじめ列挙された候補の中から一つを選ぶ形の属性を、「列挙型属性」(enumerated attributes)と呼びます[^2]。また、列挙されている属性値の候補それぞれを「キーワード」(keywords)と言います。

[^2]: 列挙属性と呼ばれることもあります。

列挙型属性のキーワードは、大文字小文字を区別しません。`dir="rtl"`と`dir="RTL"`と`dir="RtL"`は全て同じ意味になります。

#### デフォルト時の挙動

キーワード以外を指定した場合はエラーとなりますが、この場合の挙動は属性ごとに異なります。属性によっては、エラーになった場合にinvalid value defaultとされるフォールバックの値が決められていれば、そのフォールバックの値を指定した時と同じ挙動になります。

また、属性によっては、この属性自体を指定しなかった場合の挙動が定められている場合もあります。その場合には、missing value defaultとして決められた値が使われます。

`dir`属性の場合、invalid value defaultもmissing value defaultも定義されていません。不正な値を指定した場合は、dir属性を指定していない場合と同様に、書字方向に何も影響を与えません。

デフォルト時の挙動が明示的に指定されている例としては、`input`要素の`autocomplete`属性があります。`"on"`か`"off"`のいずれかのキーワードを指定する必要がありますが、他の値が指定されたり、この属性自体がない時には`"on"`を指定した場合と同様の挙動になります。

デフォルト時の挙動がキーワードのどれとも一致しない場合もあります。`th`要素の`scope`属性は、`"col"`、`"colgroup"`、`"row"`、`"rowgroup"`のキーワードのいずれかを指定します。属性が指定されていない場合、これらキーワードのいずれとも異なる`"auto"`という状態になりますが、`"auto"`というキーワードは存在しないため、明示的に指定することはできません[^1]。

[^1]: 値"`auto`"を指定した場合、不正な値となります。この場合、invalid value defaultとなるため、結果としてautoの状態になります。

### 数字

属性の中には数字で指定するものもあります。数字には、「符号付き整数」(Signed integers)、「非負整数」(Non-negative integers)、「浮動小数点数」(Floating-point numbers)などの種類があり、属性によって取りうる数字は異なります。

いずれの数字であっても、基本的に「ASCII数字」(ASCII digit)の0〜9で指定します。+や-の符号がつけられるパターンもありますが、いずれもASCII数字を使用します。なお、全角数字はASCII数字ではないため、全角数字で指定しても数字を指定したことにはなりません。

#### 長さの指定

HTMLの属性値で、要素の幅や高さを指定するケースがあります。典型例は`img`要素の`height`属性や`width`属性です。長さの単位はCSSピクセルです。

CSSが普及する前のHTMLでは、個々の要素に`height`属性や`width`属性を指定して、要素が表示される大きさを指定していました。これは見た目を制御するものです。そのため、現在のHTML仕様では、大半の要素において`height`属性と`width`属性が廃止されています。表示上のサイズ指定はHTMLの属性ではなく、CSSで行います。

ただし、`img`要素の`height`および`width`属性は廃止されていません。これは、表示サイズを指定するのではなく、画像データ自体のサイズのヒントをブラウザーに伝えるものです。こうすることで、画像がロードされる前に、必要な幅や高さをあらかじめ確保することができます。

以前のHTMLでは、長さとして`"50%"`のようにパーセンテージ値を指定することもできましたが、現在のHTMLでは、パーセンテージ値を指定することはできません。パーセンテージ値は画像サイズのヒントとしては利用できないためです。

### 日付と時刻

日付と時刻を指定するタイプの属性もあります。`ins`要素や`del`要素の`datetime`属性には、日付、もしくは日付と時刻を指定することができます。

日付と時刻の形式は、HTML仕様に定められた、ISO 8601とよく似た形式を用います。まず、日付を指定する際には、4桁の年、2桁の月、2桁の日をハイフンで繋いだ“YYYY-MM-DD”の形式を使います。区切り文字はハイフンでなければなりません。スラッシュやスペースで区切ることはできません。

```html
<ins datetime="2020-04-01">
```

日本における時刻も指定する場合は、日付の直後に、大文字の`T`もしくはスペースを1つのみ入れます。その後に2桁の時、コロン、分を繋いで`00:00`のように書き、さらにタイムゾーンの情報を入れます。タイムゾーンは`+`に続けて2桁の時間、2桁の分を連続して表記し、`+0900`のような形になります。

```html
<del datetime="2020-04-01T00:00+0900">
<del datetime="2020-04-01 00:00+0900">
```

日付と時刻の区切り文字は、スペースで区切る場合、スペースは1つだけです。複数のスペースを入れることはできません。また、`T`で区切る場合も前後にスペースを入れることはできません。

`datetime`属性においては、タイムゾーンは必須であり、省略できません。日本のローカルタイムを使用する場合、UTC（協定世界時）との時差が+9時間ですから`+0900`となります。なお、UTCの場合は`+0000`と書くこともできますし、`Z`の1文字を書いても同じ意味になります[^3]。

[^3]: これは、アルファベット1文字でタイムゾーンを表すMilitary time zonesと呼ばれるものです。タイムゾーンについては、タイムゾーン呪いの書 (知識編)が非常に詳しいです。 <https://zenn.dev/dmikurube/articles/curse-of-timezones-common-ja>

```html
<del datetime="2020-04-01T09:00+0000">
<del datetime="2020-04-01T09:00Z">
```

秒の単位まで指定することもできます。分の後に`:`で区切って2桁の秒を書きます。

```html
<del datetime="2020-04-01T09:00:10Z">
```

さらに秒の小数以下3桁、すなわちミリ秒まで指定することもできます。秒の後にピリオド`.`を書き、その後に1〜3桁の数字を書きます。4桁以上書くことはできません。

```html
<del datetime="2020-04-01T09:00:10.987Z">
```

### URL

属性値としてURLを指定する属性も多数あります。代表例は、このChapterの最初に示したような、`a`要素の`href`属性でリンク先を指定するものです。`img`要素や`script`要素の`src`属性など、読込先のリソースを指定する際にもURLを使用します。

属性値としてURLを指定する場合、基本的には絶対URLと相対URLのどちらも利用できます[^2]。

```html
<!-- 絶対URL -->
<a href="https://example.com/corporate/about">example社の会社概要</a>

<!-- 相対URL -->
<a href="../about">会社概要</a>
```

[^2]: 一部例外もあります。たとえば、`base`要素の`href`属性は絶対URLでなければならず、相対URLは使用できません。

URLの詳細な書式はChapter2-3で説明します。



