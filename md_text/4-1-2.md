<!-- ch3-5.txt (4ページ、3000～4600字想定) -->
# リンク関連属性

`a`要素、`area`要素、`link`要素は外部リソースへのリンクを扱います。これらの要素は、外部リソースを扱うための属性を共通で持っています。ここでは、これらが持つリンク関連の属性について紹介します。

## `download`属性

`a`要素と`area`要素に`download`属性を指定すると、URLへのリンクではなく、URLで示されたリソースのダウンロードを促します。

`download`属性に空でない値を指定した場合、ダウンロードファイルを保存する際のファイル名のヒントとなります。値にファイル名に使用できない文字が含まれていた場合、ブラウザーは必要に応じて文字を削除したり、ユーザーに訂正を促したりすることがあります。

```html
<a href="sample.png" download>サンプル画像をダウンロード</a>
<a href="sample.png" download="download.png">download.pngとして画像をダウンロードして保存</a>
```

なお、実際にダウンロードする際のHTTP応答ヘッダーでファイル名が指定されていた場合は、属性の指定よりもそちらが優先されます。

<!-- セキュリティ上の考慮事項 -->
リンク先のリソースが同一オリジンのものでない場合には、ブラウザーは`download`属性を無視することがあります。これは、ダウンロードを意図しないコンテンツをユーザーにダウンロードさせて再アップロードさせるような悪用を防ぐためです。理由の詳細はHTML仕様4.6.5 Downloading resources[^1]を参照してください。なお、仕様は注釈で注意を促しているだけであり、クロスオリジンの`download`属性を無視する動作が規定となっているわけではありません。

[^1]: <https://html.spec.whatwg.org/multipage/links.html#downloading-resources>
<!--
>This could be dangerous, because, for instance, a hostile server could be trying to get a user to unknowingly download private information and then re-upload it to the hostile server, by tricking the user into thinking the data is from the hostile server.
>Thus, it is in the user's interests that the user be somehow notified that the resource in question comes from quite a different source, and to prevent confusion, any suggested filename from the potentially hostile interface origin should be ignored.
-->
<!-- /セキュリティ上の考慮事項 -->


## `target`属性

`a`要素と`area`要素に`target`属性を利用すると、リンク先をどのフレームやタブ、ウィンドウに表示するかを制御できます。以下は`iframe`と組み合わせた例です。

```html
<iframe src="a.html" name="iframe01"></iframe>
<a href="b.html" target="iframe01">Bを表示</a>
```

`iframe`要素には`a.html`の内容が表示されています。このように、ユーザーに対してドキュメントを表示するウィンドウやフレームのような枠を「ブラウジングコンテキスト」(browsing context)と呼びます。`iframe`要素もブラウジングコンテキストとなり、`name`属性でブラウジングコンテキストに名前をつけられます (`id`属性ではないことに注意してください)。

この例では、`a`要素の`target`属性で`iframe`要素のブラウジングコンテキストの名前を指定しています。このリンクを辿ると、リンク先はこの`iframe`要素の中に表示されます。

ブラウジングコンテキストは、別のウィンドウや別のタブであることもあります。`target`属性に指定された名前が存在しない場合、ブラウザーは新たにタブやウィンドウを開き、そこで新たなブラウジングコンテキストを開始します。

以下の例では、`window01`という名前のブラウジングコンテキストを参照しています。

```html
<a href="a.html" target="window01">Aを表示</a>
<a href="b.html" target="window01">Bを表示</a>
<a href="c.html" target="window01">Cを表示</a>
```

この場合、まず`window01`という名前のブラウジングコンテキストを探し、それが存在すればそこでリンク先を開きます。存在しない場合、ブラウザーは新たにタブやウィンドウを開き、そのブラウジングコンテキストに`window01`という名前をつけます。この例でリンクを上から順にクリックしていくと、まず新しいウィンドウやタブが開いて`a.html`が表示され、その新しいウィンドウ内で`b.html`と`c.html`が表示されることになります。

ブラウジングコンテキストの名前は、`_`で始めることができません。`_`で始まる文字列は名前ではなく、定義されたキーワードとみなされます。以下の4つのキーワードが定義されています。

- `_self`: 現在のブラウジングコンテキストを指します。規定値です。
- `_blank`: 新しいブラウジングコンテキストを作成します。タブを持つブラウザーの場合は新しいタブで開きます。
- `_parent`: 親のブラウジングコンテキストを指します。親がない場合は、`_self`と同じ挙動となります。
- `_top`: 祖先となる最上位のブラウジングコンテキストを指します。親がない場合は、`_self`と同じ挙動となります。

<!-- セキュリティ上の注意点 -->
新しいブラウジングコンテキストで他のHTMLを開いた場合、JavaScirptの`window.opener`を参照することで元のブラウジングコンテキストを参照できます。古いブラウザーでは、このブラウジングコンテキストの参照がクロスドメインで行える場合があり、セキュリティ上の重大な注意点とされていました。現在のブラウザーではクロスドメイン参照はできなくなっています。
<!-- /セキュリティ上の注意点 -->

<!-- a11y note -->
`target="_blank"`を指定すると、多くの場合、リンク先を別のブラウザータブで開く挙動になります。この挙動はユーザーによっては伝わりにくいことがあり、特にスクリーンリーダーのユーザーや画面を拡大しているユーザーの場合、状況によっては別タブになったことに気づかずに混乱することがあります。

`target="_blank"`をそもそも指定しないことや、指定する場合にリンクテキスト内で「新しいタブが開く」旨の説明を検討するとよいでしょう。これはWCAG 2.1の達成基準3.2.5「要求による変化」の要求事項にもなっています。

また、肢体不自由のユーザーにとって、ブラウザータブを閉じることは容易ではない場合があります。別タブを開く場合は、本当にその必要性があるのか検討した方が良いでしょう。
<!-- /a11y note -->

## `rel`属性

`rel`属性は、リンクの種類を示します。属性値は「リンクタイプ」(link types)で、空白で区切って複数指定することもできます。なお、古いHTMLでは`rev`属性で`rel`とは逆向きのリンクを与えることができましたが、現在のHTML標準では`rev`属性は廃止されています。

リンクタイプは、現在の文書とリンク先のリソースとの関係を表すキーワードで、HTML仕様の4.6.6 Link types[^4]にて定義されています。ここでは代表的なものをいくつか紹介します。

[^4]: <https://html.spec.whatwg.org/multipage/links.html#linkTypes>

### リンクタイプ `alternate`

リンクタイプ `alternate`は、リンク先が現在の文書の代替表現であることを示します。このキーワードの意味は、属性値として列挙された他のリンクタイプに依存して変化します。

#### 代替スタイルシート

`link`要素で`stylesheet`キーワードとともに`alternate`が指定される場合、代替スタイルシートとして扱われます。たとえば以下のように指定します。

```html
<!-- 固定スタイルシート -->
<link rel="stylesheet" href="base.css">

<!-- 優先スタイルシート -->
<link rel="stylesheet" href="default.css" title="基本スタイル">

<!-- 代替スタイルシート -->
<link rel="alternate stylesheet" href="simple.css" title="シンプル">
<link rel="alternate stylesheet" href="highcontrast.css" title="ハイコントラスト">
```

代替スタイルシートが提供されていると、ブラウザーはスタイルシートを切り替える機能を提供することがあります。`title`属性でスタイルに名前を与えておくと、この際に表示されることが期待されます。以下はFirefoxの例です。

![スクリーンショット: Firefoxのスタイルシート切替メニュー](../img/4-1-2-01.png);

この例の場合、初期状態は「基本スタイル」で、`base.css`と`default.css`が適用されています。「シンプル」に切り替えると`default.css`は適用されなくなり、`base.css`と`simple.css`が適用されるようになります。細かい挙動の詳細は、CSS Object Model (CSSOM)仕様[^2]を参照してください。

[^2]: https://drafts.csswg.org/cssom/#css-style-sheet-collections

<!--
MDN曰く、CSSOMが仕様の模様
https://developer.mozilla.org/ja/docs/Web/CSS/Alternative_style_sheets
6.2. CSS Style Sheet Collections
https://drafts.csswg.org/cssom/#css-style-sheet-collections
-->

#### 配信フィードの指定

`type`属性が`application/rss+xml`か`application/atom+xml`のいずれかである場合、`alternate`キーワードは、このHTML文書に対応する配信フィード（RSSやAtom）として扱われます。`link`要素にこれらを指定すると、ブラウザーにフィードの自動検出を促します。

<!-- LSからのコピー -->
```html
<link rel="alternate" type="application/atom+xml" href="posts.xml" title="スタッフブログ">
```

#### 文書の代替表現

`alternate`キーワードが指定され、かつ代替スタイルシートにも配信フィードにも当てはまらない場合には、このHTML文書の代替表現であるものと解釈されます。

`hreflang`属性が指定されており、かつ現在のページと異なる言語が指定される場合は、この文書の翻訳であることを示します。

`type`属性が指定されている場合は、現在の文書の異なるフォーマットであることを示します。

これらは組み合わせて指定することも可能です。たとえば以下のようになります。

<!--LSからのコピー-->
```html
<link rel="alternate" href="/en/html"
 hreflang="en" type="text/html" title="英語版">
<link rel="alternate" href="/fr/html"
 hreflang="fr" type="text/html" title="フランス語版">
 hreflang="en" type="application/pdf" title="英語版PDF">
<link rel="alternate" href="/fr/pdf"
 hreflang="fr" type="application/pdf" title="フランス語版PDF">
```

`media`属性と併用すると、文書が特定のメディア向けのものであることを示すことができます。<!-- というのは仕様の地の文に書いてないが例だけはでている。 -->

```html
<link rel="alternate" href="/en/html/print"
 hreflang="en" type="text/html" media="print" title="英語版（印刷用）">
<link rel=alternate href="/fr/html/print"
 hreflang="fr" type="text/html" media="print" title="フランス語版（印刷用）">
<link rel="alternate" href="/en/pdf"
```

`media`属性の値にはメディアクエリー[^3]を指定することができるため、モバイル向け、パソコン向けといった表現も可能です。

[^3]: <https://drafts.csswg.org/mediaqueries/>

```html
<link rel="alternate" href="https://m.example.com/" 
 media="only screen and (max-width: 640px)" title="モバイル向け">
```

検索エンジンのクローラーがこのような指定を認識し、モバイル向けの別コンテンツがあるかどうか判断することもあります。[^4]

[^4]: <https://developers.google.com/search/mobile-sites/mobile-seo/separate-urls?hl=ja>

### リンクタイプ`author`

リンクタイプ`author`は、リンク先が著者に関連する情報であることを示します。`mailto:`スキームのURLを使用して、著者の電子メールアドレスを示すことが一般的です。

```html
<link rel="author" href="mailto:me@example.com">
```

このリンクタイプが`a`要素や`area`要素で用いられた場合、最も近い祖先の`article`要素の著者を指すものと解釈されます。`article`要素の外で用いられているときは、HTML文書全体の著者を指します。

古いHTMLでは同じ意味で`rev=made`が使われていました。現在のHTMLでは`rev`属性は廃止されていますが、互換性のために、ブラウザーは`rev=made`を`rel=author`と同じ意味に解釈します。

古いブラウザー<!-- lynxとか -->の中には、これを解釈し、文著の著者に即座に電子メールを送信できる機能を持つものがありました。現在のブラウザーはそのような機能をほとんどサポートしていませんので、無理に指定する必要はないでしょう。

### リンクタイプ`bookmark`

リンクタイプ`bookmark`は`a`要素や`area`要素で使用でき、リンク先が「パーマリンク」(permalink)であることを示します。パーマリンクは、文書中に記事が列挙されている場合などに、個々の記事を指すリンク先です。「固定リンク」と呼ばれることもあります。

このリンクタイプが`article`要素の中で用いられた場合、最も近い祖先の`article`要素のパーマリンクと解釈されます。`article`要素の外で用いられているときは、HTML文書自体のパーマリンクと解釈します。

```html
<article>
<a href="a.html" rel="bookmark">ブログ記事のパーマリンク</a>
<h1>ブログ記事のタイトル</h1>
<p>ブログ記事の中身
  <article>
  <h2 id="comment-1">コメント1</h2>
  <p>コメントの中身</p>
  <p><a href="a.html#comment-1" rel="bookmark">コメント1のパーマリンク</a></p>
  </article>
</article>
```

### リンクタイプ`external`

<!--これいる？nofollowと組み合わせるのがはやってたようだけど、言及必要か？-->
リンクタイプ`external`は`a`要素や`area`要素で使用でき、リンク先が外部サイトであることを示します。

```html
<a href="https://example.com/" rel="external">example (外部サイト)</a>
```


### リンクタイプ`help`

<!--題目のように古くから存在するが果たして重要度は高いのか？-->
<!-- lynxは対応してたらしいですね…… -->
リンクタイプ`help`は、リンク先がヘルプ情報であることを示します。`a`要素や`area`要素に指定した場合、親要素や兄弟要素に関連するコンテキストヘルプ情報であると期待されます。

<!-- LSからのコピー -->
```html
<p><label>トピックを入力: <input name="topic">
 <a href="help/topic.html" rel="help">(ヘルプ)</a></label></p>
```

この例では、入力すべき「トピック」についてのヘルプ情報が得られることが期待されるでしょう。

`link`要素に指定した場合は、このページ全体のヘルプ情報とみなされます。古いブラウザー<!-- lynxとかlynxとか -->の中には、ヘルプへのリンクを提供する機能を持つものもありました。

### リンクタイプ`icon`

`link`要素でリンクタイプ`icon`を使用すると、リンク先がアイコンであることを示します。現在の文書を表現するアイコン、いわゆるファビコン（favicon）を指定するために使われます。

```html
<link rel="icon" href="/assets/favicon.ico">
```

互換性の理由から`shortcut`キーワードと併用されることがあります。仕様では、`shortcut icon`と書くことが認められており、`icon`と同一視されます。この場合、`rel`属性の値全体が`shortcut icon`でなければならず、逆順にしたり、他のキーワードを入れたり、スペースを入れなかったりすると認識されません。ただし大文字小文字は区別しません。

`link`要素によるアイコンの指定がない場合、ブラウザーは`/favicon.ico`というURLにアクセスしてアイコンの取得を試みます。この挙動はHTML仕様4.6.6.8 Link type "icon"[^5]で明確に定義されています。逆に言えば、`/favicon.ico`にアイコンが置いてあり、それを使えば良い場合は指定不要だということです。

[^5]: <https://html.spec.whatwg.org/multipage/links.html#rel-icon>

ブラウザーの種類や端末の種類によって、アイコンの大きさやフォーマットを変えたい場合もあるでしょう。その場合は、`type`属性、`sizes`属性、`media`属性と組み合わせて、さまざまなバージョンのアイコンを指定することもできます。以下はHTML仕様で紹介されている例です。

```html
<link rel="icon" href="favicon.png" sizes="16x16" type="image/png">
<link rel="icon" href="windows.ico" sizes="32x32 48x48" type="image/vnd.microsoft.icon">
<link rel="icon" href="mac.icns" sizes="128x128 512x512 8192x8192 32768x32768">
<link rel="icon" href="iphone.png" sizes="57x57" type="image/png">
<link rel="icon" href="gnome.svg" sizes="any" type="image/svg+xml">
```

### リンクタイプ`license`

リンクタイプ`license`は、リンク先が著作権情報、ライセンス情報であることを示します。`link`要素で使用した場合、文書全体の著作権情報を表します。

```html
<link rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.ja">
```

この例では、文書が『クリエイティブ・コモンズ 表示 4.0 ライセンス』で提供されることを表します。

`a`要素や`area`要素でリンクタイプ`license`を使った場合、何の著作権情報を示しているのかまでは示されません。それは文書全体のライセンスかもしれませんし、段落や引用部のライセンスかもしれません。リンクタイプ`help`や`bookmark`と異なり、親要素や祖先要素のライセンスを表すというような決まりはないため、ユーザーは文脈から判断するしかありません。設置されている場所やスタイルなどが手掛かりになるでしょう。

なお、ブラウザーは互換性のため、`copyright`というキーワードを`license`と同じように解釈します。

<!-- SEO系？ -->
### リンクタイプ`canonical`

`link`要素でリンクタイプ`canonical`を使用すると、リンク先が現在の文書の優先URL、正規URLであることを示します。これはCanonical Linkとして機能します。詳細はRFC6596 The Canonical Link Relation[^6]を参照してください。

[^6]: <https://datatracker.ietf.org/doc/html/rfc6596>

Canonical Linkは、あるリソースが複数のURLで示されるとき、正規のURLを示すものです。たとえば以下のように、同一のリソースに異なるドメインでアクセスできる場合があります。

- https://www.example.com/
- https://example.com/

また、主にユーザー追跡のために、リソースの本質と関係のないクエリ文字列がURLに付与されることもあります。

- https://www.example.com/?sessionid=1234567
- https://www.example.com/?linkfrom=twitter
- https://www.example.com/?trackingid=abcdef

これらに対し、以下のようにCanonical Linkを指定することで、正規のURLを示すことができます。

```html
<link rel="canonical" href="https://www.example.com/">
```

こうすることで、たとえば、検索エンジンのクローラーに正規のURLだけをインデックスさせることが期待できます。

### リンクタイプ`nofollow`

`a`要素や`area`要素でリンクタイプ`nofollow`を使用すると、リンク先の内容を保証しないことを示します。

リンクの中には、コンテンツ製作者が意図して設定したわけではないものもあります。たとえば、訪問者がコメント欄に書き込んだリンクや、広告配信のスクリプトによって自動的に挿入されたリンクなどです。<!-- ちなみに「有料リンク」というのはリンク先が有料コンテンツなのではなく、お金を払ってリンクを貼ってもらったもののこと。ここでは触れなくて良いと思う -->

こういったものについて、コンテンツ製作者はリンク先のコンテンツの品質を保証できません。また、このような機能を悪用して、スパムリンクを大量に生成する人もいます。このようなリンクを検索エンジンにそのまま評価させると、評価に悪影響が出る懸念があります。リンクタイプ`nofollow`を使用することで、保証できないリンクを明確にすることができます。

```html
<a href="http://example.net/untrusted.html" rel="nofollow">品質が信頼できないページ</a>
```

検索エンジンはこれを読み取り、リンク関係の評価をしないようにしてくれるかもしれません。
<!--
https://support.google.com/webmasters/answer/96569?hl=ja
-->

<!-- セキュリティ系？ -->
### リンクタイプ`noopener`

`a`要素や`area`要素でリンクタイプ`noopener`を使用すると、リンク先を新しいブラウジングコンテキストで開いた際、リンク元のブラウジングコンテキストにアクセスできないようにすることを示唆します。ブラウジングコンテキストとは、タブやウィンドウ、`iframe`の枠などを指します。詳しくは`target`属性の項を参照してください。

`target="_blank"`などで新しいブラウジングコンテキストを開始した場合、開かれた側のコンテンツからJavaScriptでリンク元のブラウジングコンテキストにアクセスできる場合があります。`window.opener`でブラウジングコンテキストを参照したり、`postMessage`による通信を試みることができます。リンク先のコンテンツが信頼できない場合、これはセキュリティ上の問題につながる場合があります。

このような時、`rel="noopener"`を利用することができます。

```html
<a href="http://example.net/fishy.cgi" rel="noopener" target="_blank">信頼できるかどうか不明なページ</a>
```

こうすると、リンク先から元のブラウジングコンテキストを参照することができなくなり、`window.opener`を参照しても`null`が返ります。

なお、モダンなブラウザーの多くは、`noopener`がなくてもクロスオリジンのブラウジングコンテキストは参照できないようになっています。このリンクタイプの必要性は低下していますが、古いブラウザーの安全性を確保したい場合には役立つことがあります。


### リンクタイプ`noreferrer`

<!-- https://qiita.com/wakaba@github/items/707d72f97f2862cd8000 -->
`a`要素や`area`要素でリンクタイプ`noreferrer`を使用すると、リンク先に参照元情報を送信しないように促します。具体的には、リンク元ページのアドレスを、ブラウザーが`Referer`HTTPヘッダーでリファラーとして送信しないようにします。

```html
<a href="https://example.com/" rel="noreferrer">リファラーを送信しないリンク</a>
```

さらに、`noopener`と同様にブラウジングコンテキストを参照させない効果もあります。ブラウジングコンテキストが参照できると、結局リンク元のURLを知ることができてしまうためです。詳しくは`noopener`の項を参照してください。

より細かいリファラーの制御をしたい場合は、`referrerpolicy`属性を用いてリファラーポリシーを設定することもできます。また、ページ全体のリンクについてリファラーポリシーを制御したい場合は、`<meta name=referrer>`を使用することで実現できます。


### リンクタイプ`dns-prefetch`

これは、ブラウザーに指定されたオリジンのドメイン名の名前解決を事前に行うよう指示することで、そのオリジンのリソースを読み込むときの時間の短縮を図るものです。

```
<link rel="dns-prefetch" href="https://example.com">
```

### リンクタイプ`"preconnect"`

これは、ブラウザーにDNSの名前解決に加えて、TCPコネクションの確立までするよう指示することで、即座にサーバーへのリクエストを可能な状態にします。これによりリソースの読み込み時間の短縮を図ります。

```
<link rel="preconnect" href="https://example.com">
```

### リンクタイプ`"prefetch"`

これは、ブラウザーに指定したリソースを事前にダウンロードさせてキャッシュするよう指示するものです。リソースが必要となることが確実な場合に有効です。

```
<link rel="prefetch" href="next.js">
```

### リンクタイプ`"prerender"`

これは、ブラウザーに指定したリソースを取得してバックグラウンドでレンダリングするよう指示するものです。これにより、すみやかにページ遷移を行うことができます。

```
<link rel="prerender" href="https://example.com/next-page.html">
```

### リンクタイプ`"preload"`

<!-- https://blog.jxck.io/entries/2016-03-04/preload.html が参考になる -->
現在のページで必要なリソースを事前にダウンロードさせることで、ページのパフォーマンスを向上させるものです。例えば画像であるならば、次のような例が考えられます。

```
<link rel="preload" href="bgimage.png" as="image">
<style>
div.hoge {background-image: url: ("bgimage.png");
</style>
```

`as`属性は、リソースの種別を指定します。`rel="preload"`では必ず同時に指定しなければなりません。この属性は、ブラウザーがリソースの優先順位やContent Security Policyを適切に処理することを手助けします。<!-- ここまで詳細に記述する必要？ -->リソースの種別は、Fetch標準の<code>destination</code>[^5]に定められた値を指定します。

[^5]: https://fetch.spec.whatwg.org/#concept-request-destination

### リンクタイプ`"modulepreload"`

<!-- https://1000ch.net/posts/2017/module-preload.html を参考に-->
これは、モジュールスクリプト専用の`preload`の代替です。

```
<link rel="modulepreload" href="critical.mjs">
```

<!-- 一旦コメントアウト
### リンクタイプ`"search"`
// 現在の文書と関連する文書を通して検索に使用できるリソースへのリンクを与える。
-->

### リンクタイプ`"stylesheet"`

外部のスタイルシートを読み込みます。古いHTMLでは`type="text/css"`も併せて指定しましたが、現在のHTML標準ではデフォルトで`text/css`と見なされるので、指定する必要はありません。

```
<link rel="stylesheet" href="basic.css">
```

`media`属性を併用することで、特定の媒体向けのスタイルシートを当てることができます。例えば、印刷用のスタイルシートでは、次のように記述します。

```
<link rel="stylesheet" href="print.css" media="print">
```

`media`属性の値は、メディアクエリー仕様[^6]に定められた（複雑な）値を取ることができます。古いHTMLで定義されていた、一部のメディアタイプはもはや非推奨です。
<!-- 何かもう少し例を挙げる？ -->

[^6]: https://drafts.csswg.org/mediaqueries/

また、古いHTMLでは`charset`属性で文字エンコーディングを指定できましたが、もはや`link`要素に対してこの属性は指定してはなりません。

`alternate`と組み合わせることで、機能が変化します。`alternate`も併せて参照ください。

<!-- 一旦コメントアウト
### リンクタイプ`"tag"`
// 現在の文書に適用される（与えられたアドレスにより識別される）タグを与える。
-->

### シーケンシャルリンクタイプ

ページが一続きのコンテンツであることを示します。リンクタイプ`"next"`は次のページ、リンクタイプ`"prev"`は前のページであることをそれぞれ示します。例えば、3つに複数に分割された記事で、2つめのページがarticle-part2.htmlとすると、その前後のページは次のように表されます。

```
<link rel="prev" href="article-part1.html">
<link rel="next" href="article-part3.html">
```

### その他のリンクタイプ

HTML標準には規定されないリンクタイプであっても、microformats wikiに登録することで、HTMLで使用できます。詳しくは、microformats wikiのexisting-rel-valuesページ[^7]を参照ください。

[^7]: http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions






### リンクを利用する際のアクセシビリティ上の注意点

`a`要素はウェブページに頻出する要素ですので、アクセシビリティの考慮が望ましい点がいくつかあります。

#### リンクテキスト

リンクテキストには、リンク先がどのようなものかわかるようにする必要があります。WCAG 2.1では達成基準として、"2.4.4 Link Purpose (In Context)"[^1]や"2.4.9 Link Purpose (Link Only)"[^2]でリンクテキストに対する要求事項があります。

[^1]: https://www.w3.org/TR/WCAG21/#link-purpose-in-context
[^2]: https://www.w3.org/TR/WCAG21/#link-purpose-link-only

```html
<p>
<a href="new.html">こちら</a>をご覧ください。
</p>
```

これは俗にhere症候群と呼ばれるもので、リンクテキストに「こちら」とだけ書かれ、どのようなリンクなのかが判別できません。少なくとも、リンクの前後のテキストとあわせてどのようなリンクであるのか理解できるようにする必要があります。もちらん、リンクテキストのみでリンクを判別可能にすることが最も望ましいです。


```html
<p>
<a href="new.html">この書籍の詳細について</a>をご覧ください。
</p>
```

#### `onclick`イベント

よく見られる誤用として、擬似的なボタンを作成するために`a`要素を使用し、`href`属性の値に`#`や`javascript:void(0)`に設定してページの再読み込みを防ぎ、`click`を待ち受けるというものがあります。

そのような`href`の値は、予期しない動作を引き起こすことがあります。また、クリックで操作できてもキーボードで操作できないという問題を引き起こすことがあります。さらに、音声読み上げソフトなどの支援技術に対して誤った意味を伝えることになります。

`href`属性のある`a`要素はデフォルトで`link`ロールを持ちます。これとは別に、デフォルトで`button`ロールを持つ`button`要素が存在します。リンクとボタンの境界は難しい側面はありますが、ボタンであるものは`a`要素の代わりに`button`要素使用します。

#### スキップリンク

ヘッダーが大きなものであるか、複数ページで同じものである場合、特にキーボードユーザーにとっては、メインコンテンツに辿り着くまでの操作が煩雑になることになります。これを回避する一つの方法がスキップリンクであり、アクセシビリティ対応の手法としてよく取り上げられるものです。WCAG 2.1では"2.4.1 Bypass Blocks"[^3]がこれに当たります。

[^3]: https://www.w3.org/TR/WCAG21/#bypass-blocks

```html
<body>
  <a href="#content">メインコンテンツへスキップ</a>
  <header>
    ...
  </header>
  <main id="content">
    ...
  </main>
</body>
```

純粋にキーボードユーザーためだけの機能となること、また、スクリーンリーダーのユーザーにとっては、見出しさえあれば見出しにキーボード操作でジャンプできることから、アクセシビリティのためのスキップリンクの導入が必須になるものではありません。
