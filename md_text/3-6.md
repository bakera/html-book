<!-- ch3-6.txt (4ページ、3000～4600字想定) -->
# 編集

このChapterでは、文書への編集を表す`ins`および`del`要素を説明します。

## `ins`および`del`要素

`ins`要素は文書への追加を、`del`要素は文書からの削除をそれぞれ表します。

### 内容モデル

`ins`および`del`要素の内容モデルはTransparentであり、親要素の内容モデルを引き継ぎます。既存のマークアップに対して、追加または削除したい箇所をマークアップすることになりますが、`ins`要素や`del`要素はFlowおよびPhrasingに属しており、これらの要素が配置できない場所に記述できません。以下は誤った例です。

<!-- 間違った例 -->
```html
<ul>
  <ins>
    <li>1つめの項目</li>
    <li>2つめの項目</li>
  </ins>
  <li>3つめの項目</li>
</ul>
```

`ul`要素の内容モデルにはFlowにもPhrasingにも属さず、直接の子として`ins`要素を持つことができないため、この例は構文上の誤りとなります。`li`要素は内容モデルにFlowを持つため、以下のようにできます。

<!-- 修正例 -->
```html
<ul>
  <li><ins>1つめの項目</ins></li>
  <li><ins>2つめの項目</ins></li>
  <li>3つめの項目</li>
</ul>
```

また、`ins`要素や`del`要素が暗黙の段落の境界をまたぐことは避けるべきです。以下は、構文上は許容されますが、望ましくない例です。

<!-- 誤りではないが望ましくない例 -->
```html
<section>
  <h1>とある文章</h1>
  1つめの<del>段落
  <p>2つめの段落</p>
  3つめ</del>の段落
</section>
```

この例では、1つめの段落と3つめの段落は`p`要素としてマークアップされていませんが、暗黙の段落となります。暗黙の段落すべてを`p`要素で明示的にマークアップすると、以下のようになります。

<!-- 誤った例 -->
```html
<section>
  <h1>とある文章</h1>
  <p>1つめの<del>段落</p>
  <p>2つめの段落</p>
  <p>3つめ</del>の段落</p>
</section>
```

これは構文上の誤りとなります。暗黙の段落の場合には構文上の誤りとはなりませんが、望ましくないと言えます。段落をまたがないよう、次のように`del`要素を分割するとよいでしょう。

<!-- 修正例 -->
```html
<section>
1つめの<del>段落</del>
  <p><del>2つめの段落</del></p>
  <del>3つめ</del>の段落
</section>
```
<!--/内容モデル-->

### 属性

`ins`要素と`del`要素のいずれも、`cite`属性および`datetime`属性を指定できます。`cite`属性は、変更の理由を説明する文書のURLを指定します。`datetime`属性は、変更した日時を指定します。指定できる値は、日付のみまたは日付を含む時刻です。時刻のみの値は受け付けません。正確な値の形式は仕様を参照してください。

これらの属性は、レンダリングに影響するものではなく、コンテンツ制作者側が私的に利用することを意図したものとされています。変更の理由や日時をユーザーに伝えたい場合には、属性に指定するのではなく、コンテンツ内に明示する必要があります。

### アクセシビリティ上の注意点

`ins`要素、`del`要素にはデフォルトのARIAロールはありませんが[^1]、多くのスクリーンリーダーは、`ins`要素、`del`要素をそれぞれ「追加」「削除」のように読み上げます。追加や削除をしたものに対しては`ins`要素や`del`要素を積極的に使うとよいでしょう。

とはいえ、すべての状況で伝わると言い切れるものでもありません。特に、削除した要素を`del`要素でマークアップした場合、削除されていることがユーザーに伝わらないと、致命的な誤解を招く場合があります。`del`要素であることが伝わらなくても意味が伝わるようにするのが好ましいと言えます。
<!-- /a11y note -->

[^1]: WAI-ARIA 1.2では、`insertion`、`deletion`ロールが定義されています。<https://www.w3.org/TR/wai-aria-1.2/#insertion> <https://www.w3.org/TR/wai-aria-1.2/#deletion>
