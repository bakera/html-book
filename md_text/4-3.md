# 古いHTMLの属性

古いHTML仕様で定義されていた要素や属性が、現在の仕様では廃止されていたり、推奨されなくなっているケースがあります。逆に、古いHTML仕様で廃止予定とされていたのに、現在でも生き残っているというケースもあります。古いHTML仕様に沿ってつくられた文書をメンテナンスする際は、廃止されたもの、生き残っているものを把握しておくとよいでしょう。

この節では、古いHTMLで定義されていた、現在では使われなくなった属性について説明します。

## 旧式の機能

古いHTMLで定義されていたものの、現在のHTML仕様ではもはや定義されなくなった機能を「旧式の機能」(Obsolete Obsolete)と呼びます。<!--いったんもんどさん訳に合わせている。Obsoleteは単に古いというだけでなく、もはや用いられない、時代遅れであるといったかなり強めのニュアンスがあるようには思う-->

コンテンツ製作者は旧式の機能を使うべきではありませんが、旧式の機能の中には、互換性のためにブラウザーの挙動が保証されているものもあります。ウェブ上に存在する解説の中には、古いHTMLのルールで説明されているものや、ブラウザーの互換性のための挙動を説明しているものもありますが、それは必ずしも現在のHTMLで使えるということを意味しません。この点は混同しないように注意しましょう。

## 旧式だが適合する機能

「旧式だが適合する機能」(Obsolete but conforming Obsolete)は、旧式の機能でありながら現在のHTMLに適合する機能です。仕様では、これらの機能の挙動を規定しており、ブラウザーによって適切に解釈されることが期待できます。しかし、新しくHTMLを作成する際に用いるべきものではなく、文法チェッカーも警告を出します。

なお、以下では属性の値が指定されることがありますが、その値はアルファベットの大文字と小文字を区別しません。つまり、`abc`と`ABC`と`Abc`は同じ値と見なします。

### `img border="0"`

`img`要素の`border`属性は廃止されています。`border`属性の値が"0"の場合のみ仕様に適合し、ブラウザーによって解釈されることが期待されます。これは、画像にリンクを付与した場合に、枠線を表示しないようにするテクニックとして使われていたものです。

画像の枠線を制御したい場合は、`border`属性の代わりにスタイルシートで設定します。

### `script charset="utf-8"`

`script`要素の`charset`属性は、外部JavaScriptファイルの文字符号化方式を指定するものでしたが、これは廃止されています。`charset`属性の値が"utf-8"の時の時のみ仕様に適合します。<!--理由は不明。https://developer.mozilla.org/ja/docs/Web/HTML/Element/Script#deprecated_attributes にはHTML文書自体のcharsetと同じでありHTML文書がUTF-8だからという意味のことが書いてあるが、上記のとおり外部JSの文字符号化方式を指定するものなので、これは誤り。もしかするとLSのこの箇所を書いた人自身が勘違いしているのかも?-->大文字小文字は区別しません。

現在のHTMLでは、外部JavaScriptファイルの文字符号化方式はHTTP応答ヘッダの`charset`パラメータに依存し、`charset`パラメータがない場合はUTF-8とみなされます[^1]。`charset`属性は無視されますので、指定しないようにしましょう。

[^1]: RFC 4329 Scripting Media Types <https://www.rfc-editor.org/rfc/rfc4329.html#section-4.2>

### `script language="JavaScript"`

`script`の`language`属性はスクリプト言語の種類を指定するものでしたが、廃止されています。`type`属性の値がJavaScriptとみなされる場合 (`type`属性そのものが省略されている場合も含みます。詳しくは`script`要素の項を参照してください) 、`language`属性の値が"JavaScript"の指定のみ仕様に適合します。大文字小文字は区別しません。

`language`属性を指定する意味はありませんので、指定しないようにしましょう。

### `style type="text/css"`

`style`要素の`type`属性はスタイルシート言語のMIME Typeを指定するものでしたが、現在のHTMLではスタイルシート言語として利用できるのがCSSのみであるため、廃止されています。`type`属性の値が"text/css"の場合のみ仕様に適合します。大文字小文字は区別しません。

MIME Typeを解釈して判定するわけではなく、文字列一致であることに注意してください。たとえば、"text/css;charset=utf-8"のような値を指定しても適合しません (スタイルシートとしても有効になりません)。

`type`属性を指定しなくても、デフォルトのスタイルシート言語はCSSとなります。不要ですので、指定しないようにしましょう。

### `a`要素の`name`属性の値が`id`属性の値と一致する場合

`a`要素の`name`属性は廃止されていますが、`name`属性の値が以下の条件を満たす場合には適合となります。

- 空でないこと
- 文書内の他の要素の`id`属性の値と一致しないこと
- その`a`要素に`id`属性が指定されている場合、`id`の値と一致していること

古いHTMLでは`id`属性がなく、フラグメントIDを指定するために`name`属性を持つ`a`要素を使用していいました。その互換性のための規定です。

フラグメントIDを指定したい場合には、`id`属性を使用してください。`a`要素に`name`と`id`の両方を指定している場合には、単に`name`属性を削除してください。

### `input type=number`に対する`maxlength`属性、`size`属性

`input`要素に`type=number`を指定した時、`maxlength`属性や`size`属性を指定することはできません。しかし、`type=number`を解釈しない古いブラウザーは、これを`type=text`であると解釈するため、`maxlength`属性や`size`属性が有効になります。この互換性のため、これらの属性は仕様に適合するものとして許容されています。

とはいえ、文法チェッカーは容赦なく警告を出します。互換性の観点での必要がない場合には、指定しない方が良いでしょう。

## 適合しない機能

「適合しない機能」(Non-conforming features)とは、現仕様では完全に廃止され、互換性のためのブラウザーの挙動も定義されていない機能です。

仕様では多数の属性が列挙されています。ここでは、古いHTMLでよく見かけるものを中心にいくつかを紹介します。全てを確認したい場合は、HTML仕様の 16.2 Non-conforming features[^2]をご覧ください。

[^2]: <https://html.spec.whatwg.org/multipage/obsolete.html#non-conforming-features>

### `a`要素・`link`要素の`rev`属性

`a`要素と`link`要素には`rel`属性がありますが、古いHTMLでは`rev`属性も定義されていました。これは、`rel`属性と逆向きのリンクを示すものです。

よく使われていた用例として、以下のようなものがあります。

```html
<link rev="made" href="mailto:author@example.com">
```

このようにすると、作者のメールアドレスを示すことができます。きわめて古いブラウザーの中には、上記の記述を解釈して作者にメールを送ることができるものもありました。<!--そしてAnother HTML-lintはこれがないと警告を出したりもしていました。-->

ほとんどの場合、`rev`は`rel`に書き換えることができます。たとえば上記の場合、`rev=made`のかわりに`rel="author"`として表現することができます。`rev`を使用している文書をメンテナンスする場合は、`rel`に書き換えて表現してください。

### `img`要素の`longdesc`属性

HTML4では、`img`要素に`longdesc`属性が定義されていました。これは画像の説明を参照できるようにするための属性で、属性値にはURLを指定します。`a`要素のように画像をクリックして飛ぶというものではなく、ブラウザーやスクリーンリーダーの機能でリンク先の説明が利用できる想定でした。具体的な用法は、Techniques for WCAG 2 の H45 Using longdesc[^3]を参照してください。

[^3]: <https://w3c.github.io/wcag/techniques/html/H45>

ウェブアクセシビリティのために導入された属性ですが、適切に利用されるケースが少なく、対応するブラウザーも少なかったため、その状況を鑑みて、現在のHTML標準では削除されています。

画像の詳細な説明は見えるように普通に配置するか、あるいは`a`要素でリンクさせると良いでしょう。具体例については、Techniques for WCAG 2のG73 Providing a long description in another location with a link to it that is immediately adjacent to the non-text content[^4] が参考になるでしょう。<!--タイトル長すぎて草、参照方法要検討 -->

[^4]: <https://w3c.github.io/wcag/techniques/general/G73>

### `table`要素の`summary`属性

HTML4では、`table`要素に`summary`属性が定義されていました。これは、主にスクリーンリーダーのユーザーを想定した表の内容の要約、説明を記述する属性です。具体的な用法は、Techniques for WCAG 2のH73 Using the summary attribute of the table element to give an overview of data tables[^5]を参照してください。

[^5]: https://w3c.github.io/wcag/techniques/html/H73

ウェブアクセシビリティのために導入された属性ですが、画面表示されないスクリーンリーダーのためだけの説明を設定・保守するのは困難だったこともあり、適切な利用法は普及しませんでした。逆に、当時はレイアウト用の`table`が使われていたこともあり、`summary="layout table"`という無益な指定が一部で普及してしまいました。この用法は、Techniques for WCAG 2において名指しで否定されています[^6]。

[^6] F46 Failure of Success Criterion 1.3.1 due to using th elements, caption elements, or non-empty summary attributes in layout tables <https://w3c.github.io/wcag/techniques/failures/F46>

そのような実装状況・利用状況を鑑みて、現在のHTML標準では削除されています。

表の説明を提供したい場合は、視覚環境でも見えるように`caption`要素で提供すると良いでしょう。`caption`要素に入れることが適切でないような長文の説明などは、地の文で記述します。
必要に応じて`aria-describedby`で`table`と結び付けても良いでしょう。

### `body`要素の`bgcolor`、`text`、`alink`、`vlink`、`link`属性

`body`要素の`bgcolor`、`text`、`alink`、`vlink`、`link`属性は、順に、ページの背景色、文字色、リンク色（アクティブ時、訪問済み、通常）を指定するために使用されていました。これらは見た目の色を指定するものであり、いずれも現在ではCSSで指定できるため、属性は廃止されています。色指定はCSSで行いましょう。

### `div`要素、`p`要素、`img`要素ほかの`align`属性</dt>

`align`属性は要素内のテキストの配置を指定したり、要素の配置を指定したりする属性です。

`div`要素や`p`要素の`align`属性は、要素の内容の配置を指定します。主にテキストの左寄せ、右寄せ、センタリングを指定するために用いられてきました。現在ではCSSの`text-align`で指定可能です。

`img`要素や`object`要素など「置換要素」(replaced element)と呼ばれていた要素では、`align`属性でその要素自身の配置を制御できました。"left"や"right"を指定すると、CSSの`float`と同様にフロートの配置となり、テキストが画像を回り込むように流し込まれました。

文字寄せも要素の配置も、現在ではCSSで行いましょう。

### `br`要素の`clear`属性

`br`要素に`clear`属性を指定すると、`img`要素の`align`属性で指定されたフロートを解除し、続くテキストが画像の下から始まるようになります。端的に言えばCSSの`clear:both`と同じ機能です。`align`属性が廃止されると共にこちらも廃止されました。

フロートの解除はCSSで行いましょう。

### `img`要素の`hspace`属性、`vspace`属性

画像の周囲に余白を取るために用いられてきましたが、同様のことがCSSで実現できるため廃止されました。CSSで指定しましょう。


### `table`要素の`cellpadding`属性、`cellspacing`属性

テーブルセルの内外に余白を取るために用いられてきましたが、同様のことがCSSで実現できるため廃止されました。CSSで指定しましょう。

## 古いHTMLで廃止予定とされていた属性

ここでは、前節とは逆に古いHTMLで、将来廃止される可能性があるとされていた属性について、現在のHTMLで正式に採用されているものを以下に挙げます。

### `a`要素と`area`要素の`target`属性

`target`属性はもともとフレームセット文書を制御するための属性として定義されました。フレームセット文書を定義する`frameset`要素と`frame`要素は廃止されましたが、インラインフレームを表す`iframe`要素は現在でも使われており、`iframe`を指定するための`target`属性も生き残っています。また、リンク先を別タブで開く際の制御にも用いられています。こういった事情から、`target`属性は現在のHTMLでも定義されており、利用可能となっています。

### `ol`要素の`type`属性、`start`属性

`ol`要素の`type`属性と`start`属性は、リストマーカーの数値の種類と初期値を指定するための属性です。CSSでも代用可能ではありますが、リストマーカーの数値は単なる装飾ではなく意味を持つ場合もあるため、現在のHTMLでも定義されており、利用可能です。とはいえCSSでスタイルを上書きすることも可能です。

### `li`要素の`value`属性

`li`要素の`value`属性はリストマーカーの数値を指定するための属性です。CSSでも代用可能ではありますが、リストマーカーの数値は単なる装飾ではなく意味を持つ場合もあるため、現在のHTMLでも定義されており、利用可能です。とはいえCSSでスタイルを上書きすることも可能です。

