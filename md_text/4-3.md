# 古いHTMLの属性

古いHTML仕様で定義されていた要素や属性が、現在の仕様では廃止されていたり、推奨されなくなっているケースがあります。逆に、古いHTML仕様で廃止予定とされていたのに、現在でも生き残っているというケースもあります。古いHTML仕様に沿ってつくられた文書をメンテナンスする際は、廃止されたもの、生き残っているものを把握しておくとよいでしょう。

この節では、古いHTMLで定義されていた、現在では使われなくなった属性について説明します。

## 旧式の機能

古いHTMLで定義されていたものの、現在のHTML仕様ではもはや定義されなくなった機能を「旧式の機能」(Obsolete Obsolete)と呼びます。<!--いったんもんどさん訳に合わせている。Obsoleteは単に古いというだけでなく、もはや用いられない、時代遅れであるといったかなり強めのニュアンスがあるようには思う-->

コンテンツ製作者は旧式の機能を使うべきではありませんが、旧式の機能の中には、文法エラーとまではならないもの、互換性のためにブラウザーによってサポートされることが保証されているものなどもあります。

## 旧式だが適合する機能

「旧式だが適合する機能」(Obsolete but conforming Obsolete)は、旧式の機能でありながら現在のHTMLに適合する機能です。仕様では、これらの機能の挙動を規定しており、ブラウザーによって適切に解釈されることが期待できます。しかし、新しくHTMLを作成する際に用いるべきものではなく、文法チェッカーも警告を出します。

なお、以下では属性の値が指定されることがありますが、その値はアルファベットの大文字と小文字を区別しません。つまり、`abc`と`ABC`と`Abc`は同じ値と見なします。

### `img border="0"`

`img`要素の`border`属性は廃止されています。`border`属性の値が"0"の場合のみ仕様に適合し、ブラウザーによって解釈されることが期待されます。これは、画像にリンクを付与した場合に、枠線を表示しないようにするテクニックとして使われていたものです。

画像の枠線を制御したい場合は、`border`属性の代わりにスタイルシートで設定します。

### `script charset="utf-8"`

`script`要素の`charset`属性は、外部JavaScriptファイルの文字符号化方式を指定するものでしたが、これは廃止されています。`charset`属性の値が"utf-8"の時の時のみ仕様に適合します。<!--理由は不明。https://developer.mozilla.org/ja/docs/Web/HTML/Element/Script#deprecated_attributes にはHTML文書自体のcharsetと同じでありHTML文書がUTF-8だからという意味のことが書いてあるが、上記のとおり外部JSの文字符号化方式を指定するものなので、これは誤り。もしかするとLSのこの箇所を書いた人自身が勘違いしているのかも?-->大文字小文字は区別しません。

現在のHTMLでは、外部JavaScriptファイルの文字符号化方式はHTTP応答ヘッダの`charset`パラメータに依存し、`charset`パラメータがない場合はUTF-8とみなされます[^1]。`charset`属性は無視されますので、指定しないようにしましょう。

[^1]: RFC 4329 Scripting Media Types <https://www.rfc-editor.org/rfc/rfc4329.html#section-4.2>

### `script language="JavaScript"`

`script`の`language`属性はスクリプト言語の種類を指定するものでしたが、廃止されています。`type`属性の値がJavaScriptとみなされる場合 (`type`属性そのものが省略されている場合も含みます。詳しくは`script`要素の項を参照してください) 、`language`属性の値が"JavaScript"の指定のみ仕様に適合します。大文字小文字は区別しません。

`language`属性を指定する意味はありませんので、指定しないようにしましょう。

### `style type="text/css"`

`style`要素の`type`属性はスタイルシート言語のMIME Typeを指定するものでしたが、現在のHTMLではスタイルシート言語として利用できるのがCSSのみであるため、廃止されています。`type`属性の値が"text/css"の場合のみ仕様に適合します。大文字小文字は区別しません。

MIME Typeを解釈して判定するわけではなく、文字列一致であることに注意してください。たとえば、"text/css;charset=utf-8"のような値を指定しても適合しません (スタイルシートとしても有効になりません)。

`type`属性を指定しなくても、デフォルトのスタイルシート言語はCSSとなります。不要ですので、指定しないようにしましょう。

### `a`要素の`name`属性の値が`id`属性の値と一致する場合

`a`要素の`name`属性は廃止されていますが、`name`属性の値が以下の条件を満たす場合には適合となります。

- 空でないこと
- 文書内の他の要素の`id`属性の値と一致しないこと
- その`a`要素に`id`属性が指定されている場合、`id`の値と一致していること

古いHTMLでは`id`属性がなく、フラグメントIDを指定するために`name`属性を持つ`a`要素を使用していいました。その互換性のための規定です。

フラグメントIDを指定したい場合には、`id`属性を使用してください。`a`要素に`name`と`id`の両方を指定している場合には、単に`name`属性を削除してください。

### `input type=number`に対する`maxlength`属性、`size`属性

`input`要素に`type=number`を指定した時、`maxlength`属性や`size`属性を指定することはできません。しかし、`type=number`を解釈しない古いブラウザーは、これを`type=text`であると解釈するため、`maxlength`属性や`size`属性が有効になります。この互換性のため、これらの属性は仕様に適合するものとして許容されています。

とはいえ、文法チェッカーは容赦なく警告を出します。互換性の観点での必要がない場合には、指定しない方が良いでしょう。

## 適合しない属性

「適合しない機能」(Non-conforming features)とは、現仕様では完全に廃止され、互換性のためのブラウザーの挙動も定義されていない機能です。

仕様では多数の属性が列挙されています。ここでは、古いHTMLでよく見かけるものを中心にいくつかを紹介します。全てを確認したい場合は、HTML仕様の 16.2 Non-conforming features[^2]をご覧ください。

[^2]: <https://html.spec.whatwg.org/multipage/obsolete.html#non-conforming-features>

### `a`要素・`link`要素の`rev`属性
`a`要素と`link`要素には`rel`属性がありますが、古いHTMLでは`rev`属性も定義されていました。これは、`rel`属性と逆向きのリンクを示すものです。

よく使われていた用例として、以下のようなものがあります。

```html
<link rev="made" href="mailto:author@example.com">
```

このようにすると、作者のメールアドレスを示すことができます。きわめて古いブラウザーの中には、上記の記述を解釈して作者にメールを送ることができるものもありました。<!--そしてAnother HTML-lintはこれがないと警告を出したりもしていました。-->

ほとんどの場合、`rev`は`rel`に書き換えることができます。たとえば上記の場合、`rev=made`のかわりに`rel="author"`として表現することができます。`rev`を使用している文書をメンテナンスする場合は、`rel`に書き換えて表現してください。

### `img`要素の`longdesc`属性
<dd>HTML4でウェブアクセシビリティのために導入された属性ですが、実装状況・利用状況を鑑みてHTML標準で削除されました。説明へのリンクのために<code>a</code>要素を使用します。</dd>
<dt><code>table</code>要素の<code>summary</code>属性</dt>
<dd>テーブルに主にスクリーンリーダーのユーザーを想定した要約を記述するという属性でした。しかし、一般の話として属性値はブラウザーの画面上に表示されないことから、ブラウザーで閲覧するユーザーとスクリーンリーダーで閲覧するユーザーとで同じ情報を受け取れないという問題が発生します。代わりに地の文として記述します。</dd>
<dt><code>body</code>要素の<code>bgcolor</code>、<code>text</code>、<code>alink</code>、<code>vlink</code>、<code>link</code>属性</dt>
<dd>左から順に、ページの背景色、文字色、リンク色（アクティブ時、訪問済み、通常）を指定するために使用されていました。いずれもCSSで指定できるものです。</dd>
<dt><code>br</code>要素の<code>clear</code>属性</dt>
<dd>CSSで言うところの、<code>float</code>の解除を行うために使用されていました。いわゆるclearfixと呼ばれるCSSのテクニックで実現できます。</dd>
<dt><code>div</code>要素、<code>p</code>要素、<code>img</code>要素ほかの<code>align</code>属性</dt>
<dd>文字寄せ（センタリングなど）をするために用いられてきました。CSSで代わりに指定可能です。</dd>
<dt><code>img</code>要素の<code>hspace</code>属性、<code>vspace</code>属性</dt>
<dd>画像の周囲に余白を取るために用いられてきました。CSSを代わりに使用します。</dd>
<dt><code>table</code>要素の<code>cellpadding</code>属性、<code>cellspacing</code>属性</dt>
<dd>テーブルセルの内外に余白を取るために用いられてきました。CSSを代わりに使用します。</dd>
</dl>

## 古いHTMLで廃止予定とされていた属性

ここでは、前節とは逆に古いHTMLで、将来廃止される可能性があるとされていた属性について、現在のHTMLで正式に採用されているものを以下に挙げます。

- `a`要素と`area`要素の`target`属性
- `ol`要素の`type`属性、`start`属性
- `li`要素の`value`属性

ウェブ上に数多くHTMLのルールについて説明されているページがありますが、本書の「その他の属性」の説明と矛盾するような説明のあるサイトは、古いHTMLのルールで説明されている可能性が高いと言えるでしょう。