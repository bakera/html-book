# セクション

このChapterでは、文書全体の構造を表現する要素、主に見出しとセクションに関する要素を紹介します。

## アウトラインアルゴリズムによるセクションの決定

Chapter3-0で触れたように、HTML仕様はアウトラインアルゴリズムを定義しており、マークアップからアウトラインを決定できます。このChapterで紹介する要素の多くは、このアウトラインの決定に関わります。

アウトラインアルゴリズムにおいて、セクションを決定する方法は2つあります。ひとつは見出しによる暗黙のセクション、もうひとつはセクショニングコンテンツによる明示的なセクションです。

### 暗黙のセクション

HTMLには「見出し」(heading) を表現する要素が用意されています。見出し要素は`h1`から`h6`まで6種類が用意されており、セクションの「ランク」（rank）、を表現できます。ある見出しが出現してから、次に同じランクもしくはランクの高い見出しが出現するまでを、ひとつのセクションとみなすことができます。

このようにして自動的に生成されるセクションのことを「暗黙のセクション」(implied section) と呼びます。見出しを適切に使うだけで、自動的にセクションを表現できるのです。

![](../img/3-2-01.png) <!-- 図は要検討 -->

図 3-02-06 見出しと暗黙のセクションの関係

ただし、暗黙のセクションではうまく表現できないケースもあります。以下のマークアップは、本文の途中に注釈を挟み、注釈が終わったあとにまた本文が続く構造を意図しています。

```html
<h1>見出し1</h1>
<p>最初の本文です</p>
<div class="note">
  <h2>注意</h2>
  <p>注意書きです</p>
</div>
<p>本文の続きです</p>
```

ここでは注釈を`div`要素でマークアップしていますが、`div`要素はアウトラインに影響はしません。暗黙のセクションでは、各要素は最も近い見出しに所属するものとみなすため、最後の文は`h1`のランクではなく、`h2`のランクに所属します。つまり、本文ではなく注釈の一部と解釈されてしまいます。

```text
+- - - 暗黙のセクション -+
| 見出し1                |
| 最初の本文です         |
+- - - - - - - - - - - - +

+- - - 暗黙のセクション -+
| 注意                   |
| 注意書きです           |
| 本文の続きです         |
+- - - - - - - - - - - - +
```
図 3-02-07 暗黙のセクションを解釈した様子

### セクショニングコンテンツによる明示的なセクション

現在のHTML仕様では、セクションの範囲を明示するための要素が用意されています。前述の例の場合、以下のように`section`要素を使うことで、最後の文が`h1`に所属することを明示できます。

```html
<h1>見出し1</h1>
<p>最初の本文です</p>
<section class="note">
  <h2>注意</h2>
  <p>注意書きです</p>
</section>
<p>本文の続きです</p>
```

このようにセクションを明示する機能を持つ要素には、`article`、`section`、`aside`、`nav`の4つがあります。これらは「セクショニングコンテンツ」(sectioning content) と呼ばれます。

逆に、これら以外の要素は明示的なセクションを作りません。`header`要素や`main`要素はセクショニングコンテンツではないため、見出しを直接の子要素にすると暗黙のセクションが作成されます。

### セクショニングルート

見出しやセクショニングコンテンツが単純にアウトラインに組み込まれると困る場合もあります。その典型例は引用です。以下は`blockquote`要素を使用して文章を引用している例です。引用部分に見出しが含まれますが、これは単に引用元に見出しがあったに過ぎません。

<!-- 構造はMDNからお借りしており -->
```html
<section>
  <h1>初音ミク</h1>
  <section>
    <h2>はじめに</h2>
    <p>このセクションでは、黎明期の初音ミクについて説明します。</p>
  </section>
  <section>
    <h2>アイテム</h2>
    <p>初音ミクの定番アイテムといえばネギが有名ですが、ここでWikipediaの『初音ミク』の記述を見てみましょう。</p>
    <blockquote>
       <h1>初音ミクとネギ</h1>
       <p>これは派生キャラクターのはちゅねミクを生み出した動画...</p>
    </blockquote>
  </section>
</section>
```
<!-- ここまでMDNから構造をお借り -->

このようなケースでは、引用内部の見出しが文書全体のアウトラインに出現すると、混乱が生じます。かといって見出しを無視すると、引用部のアウトラインを理解できなくなってしまいます。

HTML仕様では、`blockquote`要素の内側と外側ではそれぞれ独立したアウトラインを持つことになっています。このように、その要素内に独自のアウトラインを持ち、内側のセクションと見出しが祖先のアウトラインに影響しないものを「セクショニングルート」(sectioning root)と呼びます。

先ほどの例では、`blockquote`要素はセクショニングルートであるため、中の見出しは文書全体のアウトラインには現れません。文書全体のアウトラインは次のようなになります。

```text
初音ミク
├ はじめに
└ アイテム
```

セクショニングルートとなる要素は他にもあります。代表例のひとつは`td`要素です。`td`要素は表のセルを表しますが、セル中に見出しが出現しても文書全体のアウトラインには影響しません。`table`要素をレイアウト目的に使っていると、意図したアウトラインにならないことがあるので注意が必要です。

他にセクショニングルートとなるのは、`body`要素, `details`要素, `dialog`要素, `fieldset`要素, `figure`要素です。

`body`要素もセクショニングルートであることに注意してください。たとえば以下のようにマークアップしたとします。

```html
<body>
<section>
 <h1>Apples</h1>
 <p>Pomaceous.</p>
</section>
</body>
```

この場合、`body`要素に対応する見出しがないため、タイトルのないセクションができることになります。アウトラインツールで解析すると、たとえば以下のようになります。

```text
[body element with no heading]
└ Apples
```

ただし、繰り返しになりますが、アウトラインアルゴリズムはほとんどサポートされていません。セクショニングルートについてもサポートされておらず、スクリーンリーダー等の支援技術も、セクショニングルートを解釈して見出しの扱いを変えるようなことはありません。

## `body`要素

`body`要素は、文書のコンテンツを表します。`head`要素内のメタデータが原則として画面に表示されないものだったのに対し、こちらは原則として表示される内容を記述するセクションと言えます。`html`要素の2番目の子として、つまり`head`要素の弟として、HTML文書に必ず1つのみ存在します。

`body`要素は開始タグも終了タグも省略可能です。そのため、マークアップ上は`<body>`タグが現れないこともありますが、その場合でも`body`要素は必ず補われてDOMツリーに追加されます。

### 属性

`body`要素に必須の属性はありませんが、グローバル属性と、いくつかの固有のイベントハンドラー属性を指定することができます。イベントハンドラー属性はJavaScriptと組み合わせて利用するもので、利用頻度も高くないため、本書では説明を省略します。詳細は仕様を参照してください。

#### 廃止された属性: `bgcolor`属性、`text`属性、`link`属性、`alink`属性、`vlink`属性

かつてのHTML仕様では、`body`要素に`bgcolor`、`text`、`link`、`alink`、`vlink`属性が定義されていました。これらは色を指定するもので、順に、ページの背景色、文字色、リンク色（通常、アクティブ時、訪問済み）を指定します。いずれも見た目の色を指定するものであり、現在ではCSSで指定できるため、これらの属性は廃止されています。色指定はCSSで行います。

### 内容モデル

`body`要素の内容モデルはFlowです。古いHTMLのルールでは、以下のように`body`要素の直接の子要素として`img`要素やテキストを入れることができない場合がありました。

```html
<body>
<img src="image.jpg" alt="">
テキスト
</body>
```

現在のHTMLではこのような制限はなく、`body`要素の直下にテキストを書いたり画像を置いたりすることができます。
<!-- /内容モデル -->

## `section`要素

`section`要素は、文書またはアプリケーションの一般的なセクションを表します。

### 内容モデル

`section`要素の内容モデルはFlowです。

通常、`section`要素の冒頭には`h1`要素などの見出しを配置します。見出しがなくても構文エラーにはなりませんが、タイトルのないセクションができることは望ましくありません。アウトラインツールはエラーとして報告することがあります。以下は望ましくない例です。

<!-- よくない例 -->
```html
<section>
  <h2>セクションについて</h2>
  <section>
    <p>セクション（section）は、一般には区分や区画といった意味を持ちます。</p>
  </section>
  <section>
    <h3><code>section</code>要素</h3>
    <p><code>section</code>要素は、文書またはアプリケーションの一般的なセクションを表します。
  </section>
</section>
```

見出しを持たないようなブロック、たとえば見た目上の単なる囲みや、JavaScriptで制御するためのエリア等が必要な場合は、`div`要素を使用します。上記の例は、以下のようにできます。

<!-- 修正例 -->
```html
<section>
  <h2>セクションについて</h2>
  <div><!-- 見た目の囲み -->
    <p>セクション（section）は、一般には区分や区画といった意味を持ちます。</p>
  </div>
  <section>
    <h3><code>section</code>要素</h3>
    <p><code>section</code>要素は、文書またはアプリケーションの一般的なセクションを表します。
  </section>
</section>
```

### アクセシビリティ上の注意点

`section`要素は、通常はデフォルトのロールを持たず、ランドマークとして扱われることもありません。

ただし、`section`要素がアクセシブルな名前を持つ場合は、デフォルトが`region`ロールとなり、ランドマークとして扱われます。アクセシブルな名前についてはChapter4-2を参照してください。

通常は`section`の中に見出しがあるでしょうから、`aria-labelledby`で参照できます。

```html
<section aria-labelledby="region-title">
  <h3 id="region-title">セクションのタイトル</h3>
  <p>...</p>
</section>
```

もっとも、名前をつけてランドマークにすることが常に望ましいわけではありません。`section`は文書内で多用される場合があり、そのすべてがランドマークとして扱われると利用者は混乱します。ランドマークにしたい積極的な理由がなければ、不用意に名前を与えない方が良いでしょう。Chapter4-2も参照してください。
<!-- /a11y note -->

## `article`要素

`article`要素は、自己完結型の構造を表します。これは、サイトのページやアプリケーションの中での、ブログの投稿、ニュースの記事、インタラクティブなウィジェットなどが該当します。

`section`要素と似ていますが、`article`要素は、そのセクションだけで自己完結するものを表します。たとえば、Twitterのツイートは、その1つだけで1つのコンテンツとなるため、`article`要素で表現することが適切です。発言が1つのツイートに収まりきらず、複数回連続でツイートしたならば、それぞれのツイートを`section`要素でマークアップしたうえで、一連のツイート全体を`article`要素としてもよいでしょう。コンテンツの長さで使い分けるのではなく、文脈によって使い分けましょう。

### 内容モデル

`article`要素の内容モデルはFlowです。

`article`要素を入れ子にすることも可能です。この場合、内側の`article`要素は、原則として外側の`article`要素に関連したものとなります。以下は、ブログエントリーを`article`とし、それに対する個々のコメントそれぞれを`article`として入れ子にした例です。

<!-- やる気が皆無…もっとまともな例をですね。 -->
```html
<article class="entry">
  <header>
    <h2>テスト投稿</h2>
    <p>
      <time>2017-01-23</time>
    </p>
  </header>
  <section>
    <p>テスト投稿だよ。自由にコメントしてね。</p>
  </section>
  <section class="user_comments">
    <article class="user_comment">
      <p>記念にコメントするッスよー！</p>
      <footer>
        <p>
          ななしさん <time>2017-01-23 19:00</time>
        </p>
      </footer>
    </article>
    <article class="user_comment">
      <p>あなたはブログがかけるフレンズなんだね！</p>
      <footer>
        <p>
          ななしさん <time>2017-01-23 19:02</time>
        </p>
      </footer>
    </article>
  </section>
</article>
```

`article`要素内に`address`要素を入れると、その`article`の著作者の連絡先情報を表します。たとえば、複数の著作者が執筆しているブログでは、ブログエントリーそれぞれを`article`とし、中に`address`を入れることで、記事ごとに異なる執筆者の連絡先を示すことができます。

### アクセシビリティ上の注意点

`article`要素はデフォルトで`article`ロールを持ちます。`article`はランドマークロールではありませんが、スクリーンリーダーによってはランドマークのように扱うことがあります。たとえば、iOSのVoiceOverは、`article`に差し掛かると「記事 ランドマーク」と読みあげます。
<!-- /a11y note -->

## `aside`要素

`aside`要素は、メインコンテンツと副次的には関連するものの、メインコンテンツから分離できるセクションを表します。典型的には、サイドバーや広告、その他の補足情報などを表すのに利用します。

メインコンテンツに含まれる注釈や引用などは、コンテンツから切り離してしまうとコンテンツの理解に支障が出ます。このようなものを`aside`要素でマークアップするべきではありません。

### 内容モデル

`aside`要素の内容モデルはFlowです。広告を挿入するための`iframe`要素などを直接含めることも可能です。

```html
<aside>
<iframe src="..." title="広告"></iframe>
</aside>
```

### アクセシビリティ上の注意点

`aside`要素はデフォルトで`complementary`ロールを持ち、ランドマークとして扱われます。スクリーンリーダーでは、任意の`aside`にジャンプしたり、特定の`aside`を丸ごとスキップできる場合があります。
<!-- /a11y note -->

## `nav`要素

`nav`要素は、ナビゲーションのセクションを表します。ナビゲーションには、サイトの他のページへのリンクが含まれていることもあれば、ページ内のリンクが含まれることもあります。

1つのページに複数の`nav`要素があっても構いません。たとえば、グローバルナビゲーションとローカルナビゲーションの両方がある場合、それぞれを`nav`要素としてマークアップすることができます。

コンテンツ内のリンクのグループすべてを`nav`要素に入れる必要はありません。たとえば、ページのフッターにリンクが数件含まれるようなケースはよく見られます。

<!--小さなフッターの例-->
![](../img/3-2-02.png)

図 3-02-08 あるウェブサイトに存在するページフッターの様子

このような問い合わせ先を含む小さなフッターは、単に`footer`要素だけで十分です。`footer`の中に`nav`を入れることも可能ですが、無理に`nav`としてマークアップする必要はないでしょう。

### 内容モデル

`nav`の内容モデルはFlowです。

`nav`の直下に`ul`などのリストをいれてリンクの`a`要素を列挙するパターンがよく見られますが、リストは必須ではありませんし、他の要素を入れることもできます。見出しや説明文などを入れても問題ありません。

<!--なにかナビゲーションの例-->
```html
<nav>
<h2>ナビゲーション</h2>
<ul>
  <li><a href="/">トップページ</a></li>
  <li><a href="/book">本</a></li>
  <li><a href="/computer">コンピュータ</a></li>
</ul>
</nav>
```
<!-- /内容モデル -->

### アクセシビリティ上の注意点

`nav`要素はデフォルトで`navigation`ロールを持ち、ランドマークとして扱われます。スクリーンリーダーでは、ナビゲーションが不要な時は読み飛ばし、必要になった時にジャンプできる場合があるため、利便性が大きく向上します。`nav`を使うかどうか迷った場合は、読み飛ばしやジャンプができると便利なら`nav`にする、と考えると良いでしょう。

ただし、使い過ぎには注意してください。ページ内に多数の`nav`があると、それぞれの区別が困難になり、ジャンプやスキップの操作も煩雑になります。複数の`nav`要素がある場合、それぞれに名前を付けることで見分けさせる方法もあります。詳しくはChapter4-2で取り上げます。
<!-- /a11y note -->

## `h1`-`h6`要素

`h1`-`h6`要素は、セクションの見出しを表します。これらの要素は、要素名の数字で与えられるランクを持ちます。`h1`要素が最高ランクを持ち、`h6`要素が最低ランクを持ちます。また、同じ名前の要素は等しいランクを持ちます。

### 内容モデル

`h1`-`h6`要素の内容モデルは"Phrasing"です。Flowではないため、`h1`の中に`div`などを入れることはできません。
<!-- /内容モデル -->

### アクセシビリティ上の注意点

`h1`-`h6`要素はデフォルトで`heading`ロールを持ち、要素名の数字に等しい`aria-level`を持ちます。たとえば、`h2`要素にはデフォルトで`role=heading`と`aria-level=2`が設定されます。

スクリーンリーダーは一般的に、見出しを「見出し レベル 2」のように読み上げます。また、ユーザーは見出しにジャンプする機能も利用できます。ランドマークに対応していない古いスクリーンリーダーでも、見出しジャンプには対応しているケースがほとんどです。

HTML5のアウトラインアルゴリズムは`section`の入れ子でランクを表現できますが、ほとんどのスクリーンリーダーはこの機能には対応していません。見出しのランクを適切に設定しないと、利用者は混乱することがあります。

見出しランクは6までしかありません (つまり`h7`は存在しません)。7以上のランクを指定したい場合は、`aria-level`属性を利用することで表現できます。

```html
<h6>h6見出し</h6>
<h6 aria-level="7">h7見出し</h6>
```

ただし、このような深いランクのアウトラインが利用者に理解できるかどうかは別の問題です。また、`aria-level`に対応していないスクリーンリーダーも存在します。深いランクの使用は慎重に検討してください。
<!-- /a11y note -->

### コラム： サブタイトルのマークアップと`hgroup`要素

見出しがサブタイトルを伴う場合、どうマークアップするべきかという議論があります。たとえば、以下のような見出しとサブタイトルがあるとしましょう。

```text
Selectors Level 3
W3C Recommendation 06 November 2018
```

単にそれぞれを見出しとしてマークアップすると、見出しが2つできます。

```html
<h1>Selectors Level 3</h1>
<h2>W3C Recommendation 06 November 2018</h2>
```

この場合、後者がサブタイトルであるということは伝わりませんし、それぞれ独立した見出しと解釈されてしまいます。本来であれば、これらを1つのまとまりとして扱ってほしいところです。

HTML仕様では、このようなニーズのために`hgroup`要素が定義されています。副見出しやキャッチフレーズのような複数レベルの見出しをグループ化し、ひとまとまりにします。先の例は以下のようになります。

```html
<hgroup>
  <h1>Selectors Level 3</h1>
  <h2>W3C Recommendation 06 November 2018</h2>
</hgroup>
```

こうすると、アウトラインアルゴリズムによって`hgroup`要素内の見出しの扱いが変化し、見出しと副見出しのかたまりとして扱われることが期待されるはずでした。

しかしながら、このChapterで繰り返し述べているように、アウトラインアルゴリズムを適切に実装したブラウザーや支援技術は知られていません。残念ながら、`hgroup`要素が適切に扱われることは期待できないのです。

前述の例は、たとえば次のように書き換えることができます。

```html
<div>
  <h1>Selectors Level 3</h1>
  <p>W3C Recommendation 06 November 2018</p>
</div>
```

サブタイトル部分があまり長くない場合は、見出しの中に含めて`span`などでマークアップすることもできます。W3C HTML 5.2の4.13.1にいくつかの書き換え例があるので、参考にするとよいでしょう。[^32_hgroup]

[^32_hgroup]: <https://www.w3.org/TR/2021/SPSD-html52-20210128/common-idioms-without-dedicated-elements.html#subheadings-subtitles-alternative-titles-and-taglines>

## `header`要素

`header`要素は、いわゆるヘッダーを表します。最も近い祖先のセクショニングコンテンツ、またはセクショニングルートのヘッダーを表します。ヘッダーに一般的に、コンテンツの導入部分やナビゲーション部分が含まれます。

`header`要素が使われる箇所によって扱いが異なります。`body`要素の子要素になっている場合など、祖先に他のセクショニングコンテンツがない場合には、ページ全体のヘッダーとして扱われます。

```html
<body>
  <header>
    <h1>メインページのタイトル</h1>
    <img src="logo.png" alt="サイトのロゴ">
  </header>
...
</body>
```

`header`要素を他のセクショニングコンテンツ中に入れた場合、そのセクションのヘッダーを表します。たとえば`article`要素に入れると、記事のヘッダーとして使うことができます。

```html
<article>
  <header>
    <h1>HTML</h1>
    <h2>Living Standard — Last Updated <time datetime="2019-08-30">30 August 2019</span></h2>
  </header>
  <p>HTML Living Standardは随時更新される文章です。</p>
  <p><a href="/20190930">続きを読む...</a></p>
</article>
```

### 内容モデル

`header`要素の内容モデルはFlowです。ただし、`header`要素や`footer`要素を子孫にすることはできません。

`header`要素自身はセクショニングコンテンツではないため、新しいセクションを設けません。`header`要素の後ろに見出しがないようなケースでは、意図しないアウトラインができてしまうことがあります。

```html
<header>
  <h1>このページについて</h1>
  <p>このページは……</p>
</header>
<p>こんにちは、私は……</p>
```

この場合、`header`要素の外にある「こんにちは、私は……」という文は「このページについて」という見出しのセクションに属することになります。`section`要素で明示的にマークアップするか、見出しを置くようにしましょう。

### アクセシビリティ上の注意点

`header`要素の祖先にセクショニングコンテンツがない場合、デフォルトで`banner`ロールを持ち、ランドマークとして扱われます。スクリーンリーダーは「バナー ランドマーク」と読み上げることがあります。また、ここにジャンプしてきたり、読み飛ばしたりできる場合があります。

`header`要素の祖先にセクショニングコンテンツがある場合は、`header`要素はデフォルトのロールを持たず、ランドマークとしては扱われません。
<!-- /a11y note -->

## `footer`要素

`footer`要素は、いわゆるフッターを表現します。最も近い祖先のセクショニングコンテンツ、またはセクショニングルートのフッターを表します。フッターは、著作者に関する情報、関連文書へのリンク、著作権に関する情報などを含みます。

```html
<footer>
<p>最終更新 2018年5月7日 (月) 11:23 （日時は個人設定で未設定ならばUTC）。</p>
<p>テキストはクリエイティブ・コモンズ 表示-継承ライセンスの下で利用可能です。追加の条件が適用される場合があります。詳細は利用規約を参照してください。</p>
</footer>
```

`footer`要素は、多くの点が`header`要素と共通しています。`body`要素の子要素になっている場合など、祖先に他のセクショニングコンテンツがない場合には、ページ全体のフッターとして扱われます。

### 内容モデル

`footer`要素の内容モデルはFlowです。ただし、`header`要素や`footer`要素を子孫にすることはできません。

### アクセシビリティ上の注意点

`footer`要素の祖先にセクショニングコンテンツがない場合、`footer`要素はデフォルトで`contentinfo`ロールを持ち、ランドマークとして扱われます。スクリーンリーダーは「フッター ランドマーク」などと読み上げることがあります。また、ここにジャンプしたり、読み飛ばしたりすることができる場合があります。

`footer`要素の祖先にセクショニングコンテンツがある場合は、`footer`要素はデフォルトのロールを持たず、ランドマークとしては扱われません。
<!-- /a11y note -->

## `address`要素

`address`要素は連絡先情報を表します。祖先に`article`要素がある場合、最も近い`article`要素の連絡先情報となります。そうでない場合は`body`要素と関連づけられ、文書全体の連絡先情報を表します。

連絡先情報の内容に決まりはありません。著作者の名前や電子メールアドレス、SNSのアドレス等が書かれることが一般的ですが、電話番号、郵便番号、住所といったものでも構いません。

```html
<body>
...
<!-- article要素が祖先になければ、文書全体の連絡先となる -->
<address>
<p>株式会社ボーンデジタル</p>
<p>〒102-0074<br>
東京都千代田区九段南一丁目5番5号<br>
九段サウスサイドスクエア（旧 Daiwa九段ビル）</p>
</address>
</body>
```

これらは`address`要素の属する文書や記事に対応する連絡先とみなされることに注意してください。コンテンツとは関係のない住所 (たとえば懸賞の送り先など) を提示する場合には、`address`要素は使わず、単に`p`要素などでマークアップすると良いでしょう。

<!-- 以下必要? -->
<!-- 互換性情報 -->
ちなみに参考情報として、W3C HTML 5.2においては、`article`要素や`body`要素に関する言及はなく、人または組織の連絡先情報を表すとされていました。連絡先情報には、“物理的および/またはデジタル的な場所/連絡先情報、そして情報が関係する人または組織を識別する手段を含むべきである”と記述されていました。
<!-- /互換性情報 -->

### 内容モデル

`address`要素の内容モデルはFlowです。古いHTMLのルールでは、`address`要素の中に`p`要素や`ul`要素などを入れることができませんでしたが、現在のHTML仕様ではそのような制限はありません。
<!-- /内容モデル -->

### アクセシビリティ上の注意点

`address`要素にデフォルトのARIAロールはありません。ランドマークとして扱われることもありません。一般的に、連絡先の情報はフッターに入れられることが多いため、`footer`要素の中に入れておくと見つけやすいでしょう。
<!-- /a11y note -->

