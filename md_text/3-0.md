# 要素解説の注意点

Chapter3では、HTMLのそれぞれの要素について簡単に説明し、その性質や注意点について述べていきます。ここでは、本書の要素解説についての注意点や、必要となる前提知識について説明します。

## 本書における要素解説の注意

本書ではHTMLの各要素について説明しています。ただし、全ての要素を網羅しているわけではなく、利用頻度の低い要素は取り上げていないことがあります。正確な要素の一覧は、仕様を参照してください。

本書では、HTMLの要素について、以下の順で説明しています。

- 全般的な説明
- 内容モデル
- 属性
- アクセシビリティ上の注意点

### 全般的な説明

要素名の見出しのすぐ後には、その要素についての説明があります。要素の意味 (セマンティクス) や利用方法、利用時に注意が必要な点などを説明しています。

#### 構文ルール、構文エラー

説明の中では、HTMLの構文ルールについて触れていることがあります。本書で触れる字句的ルールは、原則として仕様に沿った解説としています。語彙的ルールや意味論的ルールには解釈の幅があることが多く、著者の価値観が反映されている場合があります。

#### 要素の見た目とデフォルトスタイル

説明の中で、要素の見た目について言及している場合があります。HTMLの要素は見た目を表現するものではなく、その見た目はCSSによって別途与えられます。また、コンテンツ製作者が指定したスタイルとは別に、ユーザーによってスタイルが与えられたり、設定によってスタイルが変更されることもあります。

ブラウザーは、CSSによる指定がない場合のデフォルトのスタイルを持っています。ブラウザーのデフォルトスタイルには、仕様で規定されている場合もあります (たとえば`hidden`属性が指定された場合の) が、多くの場合はブラウザーの実装や、OSなどの環境に依存して変化します。本書で要素の見た目に言及する際には、一般的なブラウザーで多く採用しているデフォルトスタイルを参考にしています。

要素の見た目はCSS、ブラウザー、OSなどの環境、支援技術、ユーザーの設定になど、さまざまな要因によって変化することに注意してください。

### 内容モデル

内容モデルの項では、要素の内容モデルの定義について説明しています。内容モデルについてはChapter2-4を参照してください。

#### script-supporting elements

多くの要素は、内容にscript-supporting elementsを含めることができます。script-supporting elementsは`script`要素と`template`要素を指すもので、ほぼすべての要素に入れることができます。本書では、内容モデルの説明からscript-supporting elementsを省いています。

#### インタラクティブ要素

一部の要素は、内容モデルに「インタラクティブ要素」(Interactive elements)を含められないという制約を持ちます。

ウェブページには、ユーザーの操作に動的に反応（インタラクション）する仕組みが設けられることがあります。ユーザーの操作とは、リンクをクリックする、ボタンを押す、プルダウンメニューをクリックして展開する、といったものです。要素の中にはこのようにユーザーの操作に反応するものがあり、これを「インタラクティブ要素」(Interactive elements)と呼びます。

インタラクティブ要素の代表例はリンクを表現する`a`要素、ボタンの`button`要素です。ただし`a`要素の場合、`href`属性を指定しなければインタラクティブにはなりません。このように、特定の要素が条件によってインタラクティブになったり、ならなかったりする場合があります。

`tabindex`属性を利用すると、任意の要素をインタラクティブにすることができます。`tabindex`属性によってインタラクティブとなった要素も、内容モデルにおいてインタラクティブ要素として扱われることに注意してください。たとえば、`a`要素の内容には`span`要素を入れられますが、`tabindex`属性を指定すると入れられなくなる場合があります。以下は構文エラーとなる例です。

```html
<a href="/example">
  <span tabindex="0">example</span>
</a>
```

#### 終了タグの省略

Chapter2-1で説明したように、要素の終了タグは仕様略できる場合があります。しかし本書では、原則として要素の終了タグの省略可否を明言していません。これは、内容を持つ要素の終了タグは省略しないことをお勧めしているためです。省略可否を知りたい場合には、仕様を参照してください。

ただし、内容モデルがNothingとされている要素については、終了タグを書いてはならないとされている場合があります。終了タグを書いてはならない要素については、内容モデルの説明の中でその旨を明記しています。

### 属性

属性の項では、その要素に指定できる属性を説明しています。ただし、全ての要素に指定できるグローバル属性については、ここでは説明していません。グローバル属性についてはChapter4-1を参照してください。

#### IDL属性

JavaScriptから要素の属性にアクセスする場合、その方法は大きく2種類あります。ひとつは、DOMインターフェイスの`getAttribute()`メソッドや`setAttribute()`メソッドを利用する方法です。

```html
<label id="label01" for="control01">test label</label>
<script>
const labelElement = document.getElementById('label01');

alert(labelElement.getAttribute("id")); // label01
alert(labelElement.getAttribute("for")); // control01
</script>
```

もうひとつは、「IDL属性」(IDL attribute)を利用する方法です。取得した要素のオブジェクトのプロパティに直接アクセスする方法で、上記の例は以下のように書くことができます。

```html
<label id="label01" for="control01">test label</label>
<script>
const labelElement = document.getElementById('label01');

alert(labelElement.id); // label01
alert(labelElement.htmlFor); // control01
</script>
```

通常、IDL属性はHTMLの属性名と同じ名前ですが、異なる名前が用いられることもあります。上記の例では、`label`要素の`for`属性にアクセスするために、`for`プロパティではなく`htmlFor`プロパティを参照しています。

これはHTML仕様で定義されており、IDL (Interface Description Language、インタフェース記述言語) という言語で記述されています (実際は逆の関係で、IDLで記述されたインターフェイスだからIDL属性と呼んでいます)。

本書では、特段の注意点がない場合にはIDL属性について触れていません。IDL属性について知りたい場合は、HTML仕様を参照してください。
<!-- https://developer.mozilla.org/ja/docs/Glossary/IDL -->

### アクセシビリティ上の注意点

本書では、各要素のアクセシビリティ上の注意点について述べています。

#### スクリーンリーダーによる読み上げ

本書では、スクリーンリーダーによる読み上げの際の挙動について説明していることがあります。挙動はスクリーンリーダーによって異なることに注意してください。後述の「デフォルトのARIAロール」の項も参照してください。

#### デフォルトのARIAロール

アクセシビリティ上の注意点として、各要素のデフォルトのARIAロールについて説明しています。ARIAロールについてはChapter4-2を参照してください。

本書では、2021年12月時点でのARIA in HTMLによる定義を参照しています。これはWAI-ARIA 1.1の勧告と連動した定義です。WAI-ARIA 1.2での更新予定について言及していることがありますが、WAI-ARIA 1.2は2021年12月時点では勧告になっておらず、予定が変更となる可能性があることに注意してください。

Chapter1-2で触れたように、支援技術はアクセシビリティツリーの情報を参照します。アクセシビリティツリーにはARIAロールの情報が反映されるため、要素が持つARIAロールによって支援技術の挙動が変化します。たとえば、ARIAロール"link"を持つ要素があれば、スクリーンリーダーは「リンク」と読み上げます。このように、要素のロールはスクリーンリーダーの読み上げとも密接な関係があります。

多くの要素にはデフォルトのARIAロールがありません (ARIA in HTMLでは"no corresponding role"と定義されています)。この場合、原則として、支援技術はその要素を特別扱いしません。スクリーンリーダーであれば、「リンク」のような特別な通知をせず、単に内容のテキストを読み上げます。

ただし、支援技術は必ずしもARIAロールだけを見て動作しているわけではありません。支援技術によっては、ARIAロールがない要素でも独自の挙動をする場合があります。本書では、特別な挙動が確認できている場合に、その挙動を説明していることがあります。すべての支援技術が同様に動作するわけではないことに注意してください。

#### ランドマークロール

#### アウトラインアルゴリズム
