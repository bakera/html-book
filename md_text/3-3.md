<!-- ch3-3.txt (4ページ、3000～4600字想定) -->
<!--    4.4.7 The menu elementを除く -->
# グルーピングコンテンツ

## `p`要素

`p`要素は「段落」(paragraph) を表します。段落は、いくつかの文で構成される、文のかたまりです。

詳しくは後述しますが、ここでいう段落は「構造的」(structural)なまとまりであり、必ずしも「論理的」(logical)なまとまりであるとは限りません。<!--国語の授業で意味段落、形式段落という言葉を習ったかもしれませんが、形式段落に近いと考えて良いでしょう。-->

基本的に、特別な役割を持たない文は`p`要素でマークアップすると考えて差し支えないでしょう。

文が特別な役割を持ち、それを表現するための専用の要素があるなら、専用の要素を使う方が望ましいでしょう。以下の例では、セクションの末尾にある作成日と作者の連絡先を`p`要素でマークアップしています。

```html
<section>
  <!-- セクションの本文 (省略) -->
  <p>作成日: 2012-03-21</p>
  <p>作者: info@example.com</p>
</section>
```

これは文法的には問題ありませんが、以下のように`footer`要素や`address`要素を使用するほうが適切かもしれません。

```html
<section>
  <!-- セクションの本文 (省略) -->
  <footer>作成日: 2012-03-21</footer>
  <address>作者: info@example.com</address>
</section>
```

`footer`の中に`p`要素を入れることもできるので、以下のようなマークアップも考えられます。

```html
<section>
  <!-- セクションの本文 (省略) -->
  <footer>
    <p>Last modified: 2001-04-23</p>
    <address>Author: fred@example.com</address>
  </footer>
</section>
```

<!-- 内容モデル -->
`p`要素の内容モデルは"Phrasing"です。つまり、`p`要素の中には`h1`などの見出しや`div`などは入れられません。他の`p`要素を入れることもできないので、`p`を入れ子にすることもできません。

`ul`,`ol`などのリストも入れられないことに注意してください。文中で箇条書きを使いたくなることはありますが、以下のようなマークアップは正しくありません。

<!-- 誤った例 -->
```html
<p>ウェブページは、
<ul>
  <li>HTML</li>
  <li>CSS</li>
  <li>JavaScript</li>
</ul>
の3つの技術から構成されます。</p>
```

実際にこのようにすると、エラー処理によって以下のように解釈されます。

```html
<p>ウェブページは、</p>
<ul>
  <li>HTML</li>
  <li>CSS</li>
  <li>JavaScript</li>
</ul>
の3つの技術から構成されます。<p></p>
```

このようなケースをどうするかですが、ひとつの考え方として、リストの前後をそれぞれ`p`要素としてマークアップする方法があります。

```html
<p>ウェブページは、</p>
<ul>
  <li>HTML</li>
  <li>CSS</li>
  <li>JavaScript</li>
</ul>
<p>の3つの技術から構成されます。</p>
```

それぞれの段落の中の文は中途半端な場所で途切れてしまっていますが、文法上は問題ありません。このように、`p`要素は論理的な意味でのまとまりではなく、単に構造上のまとまりにすぎないことがあります。

文が途中で切れるのを嫌う場合や、見た目をひとかたまりにする必要がある場合は、`div`でマークアップする考え方もあります。

```html
<div>ウェブページは、
<ul>
  <li>HTML
  <li>CSS
  <li>JavaScript
</ul>
の3つの技術から構成されます。</div>
```
<!-- /内容モデル -->

<!-- a11y note -->
`p`要素には、デフォルトのARIAロールはありません。スクリーンリーダーは`p`要素について特別な読み上げをしません。利用者にとっても、ある文が`p`要素なのかどうかはそこまで重要ではないので、ある文を`p`要素としてマークアップするかどうかについて、そこまで強いこだわりを持つ必要はないでしょう。`p`要素はあくまで段落をマークアップする1つの方法にすぎません。`p`要素以外でも段落をマークアップできるので、柔軟に考えてよいでしょう。
<!-- /a11y note -->

## `hr`要素

`hr`要素は、段落レベルのテーマの区切りを表します。小説であれば場面が変化するとき、論説であれば別の話題に移行するときなどに使用します。`section`要素や`h1`要素を使っている場合、それだけでテーマの変更を表現できているため、無理に`hr`要素を併用する必要はありません。明示的に切れ目を表現したいが見出しは置けない、という場合に`hr`を使うことがあります。

<!-- 言い換えると、見出しを立てるまででもないけれども、話題が変わっているということなんだけど、そこまで説明を冗長にした方がいいのか。 -->
<!-- これが例示なのかは疑問だけど、とりあえず書いてみた。 -->
```html
<p>ウェブで一番よく目にする動物の画像と言えば、なんといっても猫でしょう。ウェブ上の猫の人気は、異常と言ってよいかもしれません。</p>
<hr>
<p>脚注: そうは言っても、現実世界で道ばたを人と一緒に散歩しているのはやっぱり犬です。犬の人気もまた、群を抜いていると言えます。</p>
```

<!-- 内容モデル -->
`hr`の内容モデルはNothingです。この要素は空要素であり、内容を持つことはできません。また、終了タグを書くことはできません。
<!-- /内容モデル -->

<!-- a11y -->
`hr`要素はデフォルトでseparatorロールを持ちます。スクリーンリーダーは「区切り」などと読むことがあります。また、スクリーンリーダーによっては、次の区切りにジャンプする機能が提供されていることもあります。

このように、`hr`は意味的な区切りとして伝えられることに注意してください。古いHTMLでは、`hr`要素は「横罫線」(horizontal rule)として定義されていたため、多くのビジュアルブラウザでは、デフォルトスタイルで線が表示されます (このため、`hr`要素を「横方向分割バー」と読みあげるスクリーンリーダーも存在します)。しかし、スタイル目的で線を引くためにこの要素を使うべきではありません。この要素はあくまで意味的な区切りに使用し、スタイル目的で線を引きく場合はCSSを使うようにしてください。
<!--
  Mac の VoiceOverでは「横方向分割バー」と読まれた。NVDAの読みは「区切り」らしいが要確認
　参考: http://nvdajp.osdn.jp/howto/manual/#hrElement
-->
<!-- /a11y -->

## `pre`要素

`pre`要素は、内容が「整形済みテキスト」(preformatted text)であることを表します。整形済みテキストとは、テキストが空白や改行によって整形され、その整形された見た目に一定の意味があるものです。例としては、電子メールの文面、コンピューターコードの断片、アスキーアートなどが挙げられます。

通常は、要素内のテキストに改行を入れたり、スペースを複数入れたりしても、見た目には反映されません。以下は、Pythonで書かれたコードの断片を`p`要素に入れた例です。

```html
<p>
with open(filename, 'w') as fp:
    fp.write(body.encode('UTF-8'))

print('saved:' + filename)
</p>
```

これは、以下のように表示されます。

```plaintext
with open(filename, 'w') as fp: fp.write(body.encode('UTF-8')) print('saved:' + filename)
```

改行はスペースになり、複数のスペースや改行が連続しても、スペースひとつ分の余白にしかなりません。この整形はHTMLのルールではなく、CSSで `white-space: normal` が指定されている場合の処理[^1]です。ほとんどの要素のデフォルトスタイルは`white-space: normal`となっていて、このルールが適用されます。

[^1]: https://drafts.csswg.org/css-text-3/#propdef-white-space

Pythonのコードでは空白や改行に意味があるため、上記のような表示をそのままコピーしても意図通りには動作しません。このように、整形済みテキストには空白や改行に意味があり、通常のルールを適用すると意味が通じなくなってしまうことがあります。

このような時に`pre`要素を使うと、改行や空白を維持してそのまま表示することが期待されます。これは、`pre`要素のデフォルトスタイルが`white-space: pre`となっているためです。`pre`要素のスタイルを上書きして`white-space`プロパティの値を変更すると、通常の要素のような表示に変えることもできます。逆に、通常の要素に`white-space: pre`を指定すれば、`pre`要素のような表示にすることもできます。とはいえ、そのようなことはしない方が良いでしょう。

なお、HTML構文では、`<pre>`タグ直後の改行は"inter-element whitespace"とみなされて除去されます。以下の2つは同じように表示されます。

<!--もうちょっと気の利いた例示が必要か。-->
```html
<pre>これは
pre要素の
テストです
</pre>
```

```html
<pre>
これは
pre要素の
テストです
</pre>
```

<!-- 内容モデル -->
`pre`要素の内容モデルはPhrasingです。Phrasingに属する要素は入れられますので、整形済みテキストの一部をマークアップすることもできます。以下は、ユーザーがキーボードから入力する部分を明示的に`kbd`要素としてマークアップした例です。

```html
<pre>
$ <kbd>sudo ./delete_all.py</kbd>
ほんとうに削除しますか? (Y/n)
&gt;<kbd>y</kbd>

削除しました。
$
</pre>
```

このように、`pre`要素の内部でもマークアップは解釈されますし、文字参照も展開されます。文字として`<`を書きたい場合は`&lt;`とする必要があります。
<!-- /内容モデル -->

<!-- a11y note -->
`pre`要素にはデフォルトのロールはありません。スクリーンリーダーで特別な読み上げがなされることはありません。

`pre`要素を使ってアスキーアートを表現する場合、スクリーンリーダーでは無意味な記号の羅列として読み上げられてしまうことがあります。そのような場合、明示的に`role=img`を指定すると良いでしょう。ARIA in HTMLでは、`pre`要素でアスキーアートを表現し、キャプションをつける例が紹介されています[^2]。

[^2]: https://w3c.github.io/html-aria/#example-2

```html
<figure role="img" aria-labelledby="fish-caption">
   <pre>
   o           .'`/
     '      /  (
   O    .-'` ` `'-._      .')
      _/ (o)        '.  .' /
      )       )))     ><  <
      `\  |_\      _.'  '. \
        '-._  _ .-'       '.)
    jgs     `\__\
   </pre>
   <figcaption id="fish-caption">
    Joan G. Stark, "<cite>fish</cite>".
    October 1997. ASCII on electrons. 28×8.
   </figcaption>
</figure>
```

支援技術が`role=img`を解釈する場合、アスキーアートの中身を読み上げずに、キャプションを読むことが期待できます。
<!-- /a11y note -->
## `blockquote` 要素

`blockquote`要素は別のソースから引用されているセクションを表します。`cite`属性で引用元のURLを示すことができます。現在のHTML仕様では、この属性はページ閲覧者のためのものではなく、主にサーバーサイドスクリプト解析するなどの私的使用のために使うものとされています。よって、積極的に使用することは勧めません。

文章の引用には、引用元の表記が欠かせません。HTML標準では、引用元は`blockquote`の外側に書くことが例で明示されています。

```
<blockquote>
<p>吾輩は猫である。名前はまだ無い。</p>
</blockquote>
<p>—夏目漱石 『<cite>吾輩は猫である</cite>』</p>
```

参考までにW3C HTML 5.2では、`footer`要素を使用して、`blockquote`の内側に書く方法が示されていました。

```
<blockquote>
<p>吾輩は猫である。名前はまだ無い。</p>
<footer>—夏目漱石 『<cite>吾輩は猫である</cite>』</footer>
</blockquote>
```

冗長ですが明示的に引用文と引用元を関連付ける場合は、`figure`要素と`figcaption`要素を使ってマークアップすることができます。

```
<figure>
 <blockquote>
  <p>吾輩は猫である。名前はまだ無い。</p>
 </blockquote>
 <figcaption>夏目漱石 『<cite>吾輩は猫である</cite>』</figcaption>
</figure>
```

`blockquote`要素は、セクショニングルートです。次の例のように、たとえ`blockquote`要素の中に見出しが入っていても、アウトラインには影響しません。

<!--こう、もうちょっと柔らかい例をですね…-->
```
<blockquote>
<h3>（保護を受ける著作物）</h3>
<p>第六条　著作物は、次の各号のいずれかに該当するものに限り、この法律による保護を受ける。</p>
</blockquote>
```

## `ol`要素

`ol`要素は、順序を変更することが文書の意味を変更するような、意図的に順序づけられた項目のリストを表します。例えば、料理のレシピやスポーツ競技の順位結果など順番が決まっているものに用います。

```
<ol>
<li>玉ねぎ、マッシュルームは薄切りにする。牛肉は幅5ミリに切って塩、こしょうをふる。ボウルに薄力粉を入れ、牛乳を少しずつ加えて泡立て器で溶いておく。<li>
<li>フライパンにバター10gを入れて中火にかけ、バターが溶けてきたら牛肉を加えて炒める。肉の色がしっかりと変わったら白ワインを注ぎ、煮たったらいったん取り出す。</li>
...
</ol>
```
<!-- ビーフストロガノフ https://www.sapporobeer.jp/feature/recipe/0000001518/ からレシピをお借り -->


リストの項目は、ツリー順で`ol`要素の`li`要素の子ノードです。<!--仕様訳ママだけど、この説明でいいのか-->`reversed`属性を使用することで、降順リスト（…, 3, 2, 1）を表すことができます。この属性がなければ、リストは昇順リストです（1, 2, 3, …）。

`type`属性を使用することで、リストのマーカーを10進数の数字の代わりにアルファベットやローマ数字で表示することができます。より高度なCSSマーカーを指定したい場合、CSS `list-style-type`プロパティを使用して実現することができます。

`start`属性を使用することで、リストの開始する値を決定することができます。属性の値は整数です。

<!--1から開始してカウントダウンする、やや奇妙な例-->
```
<ol start="1" reversed>
<li>このリストは1から始まって
<li>カウントダウンしていくという
<li>やや風変わりな例です。
</ol>
```

## `ul`要素

`ul`要素は、項目の順序が重要でない、つまり順序を変更しても文書の意味を実質的に変えないだろう、項目のリストを表します。リストの項目は、`ul`要素の`li`要素の子ノードです。

ところで、リストは次のようにネストすることもできます。終了タグの位置に注目してください。
<!-- MDNからの借り物改 -->
```
<ul>
	<li>（順序に意味のない）1番目の項目</li>
	<li>2番目の項目    <!-- ここには終了タグはない -->
		<ol>
			<li>2番目の項目の、1番目のサブ項目</li>
			<li>2番目の項目の、2番目のサブ項目</li>
			<li>2番目の項目の、3番目のサブ項目</li>
		</ol>
	</li>            <!-- ここに終了タグを記述し、要素を閉じる -->
	<li>3番目の項目</li>
</ul>
``` 

## `li`要素

`li`要素は、リストの項目を表します。これまでに取り上げた`ol`要素や`ul`要素の子要素としてだけでなく、`menu`要素の子としても使用できます。ただし、`menu`要素に関しては執筆時点でほとんど実装がされていないため、本書では取り上げません。

具体的な使用例については、`ol`要素や`ul`要素を参照ください。


## `dl`要素

`dl`要素は、名前と値のグループから構成される、説明リスト（description list）を表します。古いHTMLでは、定義リスト（definition list）と呼ばれていました。

名前に`dt`要素を、値に`dd`要素を使用します。名前と値のグループはまた、`div`要素で囲むことができます。`dl`要素の子は`div`要素を除いて`dt`要素と`dd`要素のみを受け付けます。

名前と値のグループは、用語とその定義、メタデータのトピックと値、質問と回答などが挙げられます。各グループ内の名前と値のリストの順序は、意味があっても構いません。

この例は、1つの定義を2つの用語にリンクするものです。定義を示すために`dfn`要素を使用します。

<!-- WHATWG改 goo辞書改。-->
```
<dl>
 <dt lang="ja"> <dfn>色</dfn> </dt>
 <dt lang="en-GB"> <dfn>colour</dfn> </dt>
 <dd>光の波長の違い（色相）によって受ける感覚。
 また、明るさ（明度）や鮮やかさ（彩度）によっても異なるように感じる。</dd>
</dl>
```

<!--例示と説明文はWHATWG改。-->

次の例は、メタデータをマークアップする`dl`要素の使用例です。最後のグループが、2つのメタデータラベル（"著者"と"編集者"）と2つの値（"Robert Rothman"と"Daniel Jackson"）を持ちます。

スタイリングを支援するために、`dt`と`dd`要素のグループに`div`要素を用いています。これは、2016年に仕様に追加された比較的新しい文法規則です。
<!-- whatwg/html#1945 -->

```
<dl>
 <div>
  <dt>最終更新日</dt>
  <dd>2004-12-23T23:33Z</dd>
 </div>
 <div>
  <dt>推奨の更新間隔</dt>
  <dd>60秒</dd>
 </div>
 <div>
  <dt>著者</dt>
  <dt>編集者</dt>
  <dd>Robert Rothman</dd>
  <dd>Daniel Jackson</dd>
 </div>
</dl>
```

## `figure`要素

`figure`要素は、オプションでキャプションをもつ（完全な文のような）自己完結型であり、文書の主フローから単独のユニットとして参照されるフローコンテンツを表します。

ここでいう自己完結型というのは、例えば、段落にあるそれぞれの文が該当します。文の一部となる画像は`figure`要素に不適切ですが、画像で作られた完全な文は適切と言えます。

前述のように仕様では説明されますが、言い換えると、本文から参考文献として参照される一方で、本文の流れに影響を与えることなく、別ページや付録に移動できる、画像、図表、例、コード断片などに使用できます。

この要素の最初または最後子として`figcaption`要素がもしあれば、キャプションを表します。そうでなければ、キャプションは存在しません。

`figure`要素の中間に`figcaption`要素を置くことができず、また1つの`figure`要素は複数の`figcaption`要素を持つことができないことに注意してください。

<!--何かfiugre要素の例示…もっと役に立ちそうなものをですね-->
```
<figure id="fig2">
 <img src="saji.png" alt="匙が山のように積み上がっている絵">
 <figcaption>図 2. 投げた匙の数</figcaption>
</figure>
```
<!--代替テキストの議論はここでする？-->

`blockquote`要素と同じく、`figure`要素はセクショニングルートです。セクショニングルートについて、`blockquote`要素も参照ください。

## `main`要素

`main`要素は、文書の主要なコンテンツを表します。原則として、1つのHTMLページは1つの`main`要素のみ待つことができます。ただし、`hidden`属性を持つ場合は、複数設置できます。これは、スクリプトによって切り替えられることを想定しています。

なお、WAI-ARIAにおいて`main`ロールは、いわゆるスキップリンクに対する、控えめな代替手段であると位置づけられています。

```
<!--もう少し適切な例を？-->
<main>
<h1>...</h1>
<article>
<h2>...</h2>
<p>...</p>
</article>
</main>
```

## `div`要素

`div`要素は、特別な意味を持ちません。具体的な使用例としては、スタイルを付ける目的で`id`属性や`class`属性と一緒に使用する、あるいは`lang`属性などを付与するために使用することなどが挙げられます。つまるところ、汎用のグループ化のための要素と言えます。

この要素は、他に適切な要素がなかった場合の最後の手段です。適切な要素がある場合はその要素を使用すべきです。

```
<!-- スタイリングのために、入れ子にする例 -->
<div class="wrapper">
  <div class="inner">
    <p>...</p>
  </div>
</div>
```

```
<!-- 異なる言語であることを明示する例 -->
<div lang="lzh">
國破山河在
</div>

<div lang="ja">
国破れて山河在り
</div>
```
<!-- source: https://ja.wikisource.org/wiki/%E6%98%A5%E6%9C%9B -->

```
<!-- 古いHTMLの例 -->
<div class="section">
<h1>見出し</h1>
<p>本文...</p>
</div>

<!-- 現在では次のように書ける -->
<section>
<h1>見出し</h1>
<p>本文...</p>
</section>
```