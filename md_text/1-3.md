# HTML仕様の標準化とその歴史

Chapter1-2では、HTML仕様がどんなものか大まかに説明しました。このChapterでは歴史を振り返りながら、HTML仕様が何を目指し、どのように発展してきたのかを説明します。

## 仕様と標準

HTMLの仕様はウェブで公開され、誰でも参照できるようになっています[^1]。誰もが自由にHTML仕様を読み、仕様に沿ってHTMLを書いたり、パーサーを実装したりすることができます。

[^1]: https://html.spec.whatwg.org/multipage/

HTMLに限らず、技術仕様の多くは広く公開されています。その目的の一つは、仕様を広め、多くの人に利用されるようにすることです。仕様が普及し、大多数の人に利用されるようになると、それは「標準」(standard)と呼ばれるようになります。標準にすることを「標準化」(standardization)と言います。

### 標準化の目的

仕様の標準化がなされていないと、不都合が生じることがあります。たとえば、ビデオデッキとビデオテープのメーカーが各社それぞれで異なる仕様を作った場合、ある社のデッキでは他社製のテープを再生できません。<!--例が古いか?-->仕様が標準化され、各社が1つの仕様を参照するようになれば、どの社のデッキでも、どの社のテープでも使えるようになります。このように、ある製品を他のものに置き変えても機能する性質を「互換性」(compatibility)と言います。

また、電気通信の世界では、ある機器と別の機器が通信する必要があります。この際、通信方法や受け渡しするデータの仕様が同じであれば、問題なく通信し、し、情報を交換することができます。異なる機器やサービスの間でも問題なく情報交換できる性質を、「相互運用性」(interoperability) と言います。

仕様が標準化されると、多くの製品やサービスが同じ仕様に従うことになり、互換性や相互運用性が高まります。仕様を公開して広るめことの目的は、ここにあるのです。

### 標準化団体とデファクトスタンダード

仕様が標準化されたと言える一つの目安は、「標準化団体」(standardizing body)によって正式に認められることです。

標準化団体の代表例は、国際標準化機構 (International Organization for Standardization, ISO) で、ISO規格と呼ばれるさまざまな国際規格を策定しています。電気通信分野においては、「国際電気標準会議」(International Electrotechnical Commission, IEC)という標準化団体が有名です。ISOと共同で標準化を行うこともあります。

日本においては、日本産業標準調査会(JISC)が審議し、大臣が制定する「日本産業規格」(Japanese Industrial Standards, JIS)という標準があります。

時には、標準化団体によって公式に標準化されたわけではない仕様が普及し、事実上の標準として機能することもあります。このようなものを「デファクトスタンダード」(de facto standard)と呼びます[^2]。

[^2]: 反対に、標準化団体によって正式に標準化されたものを「デジュリスタンダード」(de jure standard) と呼びます。

## HTML仕様の歴史

それでは、HTML仕様は標準になっていると言えるのでしょうか。

実のところ、HTML仕様はさまざまな紆余曲折を経てきました。過去には、ブラウザーベンダーがHTMLを独自に拡張し、ベンダーごとに独自仕様となっているような状況もありました。

ここでは、HTMLの誕生まで遡り、歴史を追いながら、HTML仕様がどのように発展してきたのかを見ていきます。

### ウェブの誕生とHTML 1.0

ウェブが初めてインターネット上で公開されたのは1991年のことでした。このときバーナーズ＝リーによって、ウェブを構成するURL、HTTP、そしてHTMLの仕組みがつくられました。

HTMLのルールは、「SGML」(Standard Generalized Markup Language)[^1]という汎用のマークアップ言語を参考にして作られました。タグを使ってテキストをマークアップするという考え方は、SGMLから来ています。ただし、当時のHTMLは、厳密にSGMLのルールに沿っていたわけではありませんでした。

[^1]: SGMLはISO 8879:1986として1986年にISO規格になっています。日本産業規格(JIS規格)にもなっており、日本語訳をJIS X 4151「文書記述言語SGML」として読むことができます。

SGMLでは、テキストをマークアップする前に、どのような要素が使えるのかといったマークアップのルールを定める必要があります。このルールを「文書型定義」(Document Type Definition, DTD)と呼びます。また、マークアップされたテキストの側を「文書インスタンス」(document instance)と呼びます。

SGMLなどのマークアップ言語を読み取って解析することを「パース」(parse)と言い、解析するプログラムを「パーサー」(parser)と言います。SGMLの場合、パースするにはDTDと文書インスタンスの両方が必要です。パーサーはまずDTDを読んでルールを理解し、そのルールに従って文書インスタンスを読む必要があります。

DTDが用意できれば、そのルールに従って文書インスタンスをどんどん作ることができます。DTDを用意するということは、マークアップ言語の仕様を決め、仕様を提供するということになります。このように、SGMLのルールに沿う形で仕様が整備されたマークアップ言語を「SGML応用系」(SGML application)、と呼びます。

バーナーズ＝リーはSGMLを参考にしてHTMLを作りましたが、この時点ではDTDが存在しませんでした。そのため、この時点のHTMLはSGML応用系とは言えず、SGMLパーサーでパースすることもできませんでした。

その後、メーリングリストなどでの議論を経て、HTML 1.0とされるドラフト文書[^2]が1993年に記録されています。この時点でDTDが整備され、リンク、見出し、リスト、画像の埋め込みといった、現在のHTMLでも用いられる基本的な要素が揃いました。

[^2]: https://www.w3.org/MarkUp/draft-ietf-iiir-html-01.txt

ちなみに、段落を表す`p`要素もありましたが、現在とは異なり、段落の切れ目に空要素の`<p>`タグを置くような形であり、現在の`br`要素に近い使い方でした。これは、後の仕様で改められることになります。

また、ユーザーの入力を受け付ける`form`要素も存在せず、かわりに`isindex`要素がありました。`isindex`要素は送信先を指定できないフォームのようなもので、現在では廃止されています[^2]。

[^2] 現在のブラウザーも互換性のために`isindex`要素を解釈し、入力欄を表示します。

### IETF RFCとHTML 2.0

技術仕様として所定の手続きを経た、正式なHTMLの仕様と呼べるものができたのは1995年のことです。

1994年には、ウェブ技術に関する標準化を推進する団体として、バーナーズ＝リーがディレクターを務める「W3C」(World Wide Web Consortium)が発足しています。しかしこの時点では、HTML仕様はIETF (Internet Engineering Task Force)のもとで議論されていました。IETFはインターネット技術の標準化を行うための組織で、“RFC”という文書群を発行しています。HTMLの仕様もRFC 1886[^3]として発行され、HTML 2.0と名付けられました。

[^3]: https://tools.ietf.org/html/rfc1866

HTML 2.0では、先に述べた`p`要素の使い方が改められたほか、`form`要素なども加わり、より現在使われているHTMLの姿に近くなりました。ただし、テーブルを表す`table`要素などはまだありませんでした[^4]。

[^4]: `table`要素は、のちにRFC1942として提案されます。<https://tools.ietf.org/html/rfc1942>

また、この仕様は、厳密に言えば日本語の文字が使えないものでした。SGMLのでは、文書で使用する文字の種類（符号化文字集合、詳しくはChapter2で説明します）を事前に宣言する必要がありますが、HTML 2.0ではISO-8859-1 (Latin-1) という規格が指定されており、日本語の文字は使えませんでした[^5]。

[^5]: もっとも、日本語に対応したブラウザーはこの仕様を無視して独自に日本語の文字を解釈しており、実用上は問題ありませんでした。

仕様上で日本語が使えるHTMLは、国際化が検討された1997年のRFC 2070[^6]を待たなければなりませんでした。

[^6]: <https://tools.ietf.org/html/rfc2070>

#### コラム: IETFとRFC
<!-- IETFとRFCそのものの説明はやや本筋から外れるのと、コラムにもRFCの紹介が含まれていて内容がやや重複するので、コラム側にマージしました。なくてもいいかも。 -->
RFCは、Request For Commentsの略で“意見を求む”といった意味です。しかし、インターネットに関連する技術標準を示す文書の名称が、なぜ意見を求めているのでしょうか。

これは、インターネットの生い立ちと時代背景によるものです。インターネットの前身は、米国国防総省国防高等研究計画局（DARPA, Defense Advanced Research Project Agency）が開発を進めたAPRAネットというものでした。

国防総省にある部局の性質上、国防上の観点から情報は“非公開”が前提とされていました。しかし、ネットワーク技術は公開が前提で意見を求める必要性があると考えたAPRAネットの関係者は、DARPAと交渉し、非公式に意見を募集するという体裁で技術公開の了承をとりつけました。

こうして最初のRFCであるRFC 1が1969年に発行されました。なお、1969年は東西冷戦真っ只中にアポロ11号が史上初の月面着陸を果たした年でもありました。そのような時代背景の中で、インターネットの前身となる研究開発を国防総省から資金を得ながらも、オープンな形で行うことで今日のインターネットを作りあげてきたのは、当時の関係者の努力の賜物と言えるでしょう。

RFCは、IETFで定められた必要な議論や手続きを経たインターネットの技術的な約束事ばかりでなく、インターネットを利用する上で参考となるような情報、はたまたエイプリルフールにジョークとして公開されるものまで、さまざまな文書が存在します。RFCは通常、Internet-Draftと呼ばれるドラフト文書を経てRFCとなります。RFCはいくつかの種類に分類されます。

表 1.4-1 RFC文書の分類の一部

| 略称 | 分類名                | 分類の説明                                                                                                                                          |
|------|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| I-D  | Internet-Draft        | RFCの草案文書。RFCの番号は付与されない。RFCになることを意図しないものもある。                                                                       |
| PS   | Proposed Standard     | 標準化過程（Standards Track）で、標準になる前の段階。コミュニティーによる議論とレビューを経た、インターネットで使用するのに安定した問題のないもの。 |
| STD  | Internet Standard     | インターネット標準。PSが成熟したものであり、相互運用可能な実装が複数存在することで有益だと認められた、標準化過程の最終段階。                        |
| Info | Informational         | インターネット全体に広く知らせるためのもの。エイプリルフールのジョークRFCとして知られるものもここに含まれる。                                                            |
| Hist | Historical            | 標準であったが別の仕様によって使われなくなったなどのため、標準としての役割を終えた、歴史的な資料。使用は推奨されない。                              |
| BCP  | Best Current Practice | インターネット技術に関する規則や推奨事項などに用いられる分類。

このうち、STDとBCPは、STDシリーズ、BCPシリーズとして、「RFC+番号」とは別に、中身に対して永続的な番号が与えられます。例えば、HTML仕様から参照されるBCP 47は、2021年時点ではRFC 5646とRFC 4647を指しますが、はじめはRFC 1766に与えられていたものでした。

なお、前述のRFC 1886やRFC 2070を含む、IETFでHTMLに関してRFCとなった文書は、現在では役割を終えており、Histと分類されています。

### W3Cの誕生とHTML 3.2

HTML 2.0の発行後、IETFのワーキンググループでHTML 3.0の標準化作業が行われます。HTMLにさまざまな新機能を盛り込む提案をまとめたHTML+と呼ばれる草案を元に、次世代のHTML仕様を策定しようとしたものです。さまざまな新要素を意欲的に追加しようとしていましたが、過去のHTMLと互換性がないという問題もあり、結局、この仕様はまとまらずに、ワーキンググループは解散してしまいました。

その後、HTMLの仕様策定の議論の場は、IETFからW3Cへと移ります。HTML3.0とは大きく方針が変わり、過去のHTMLとの互換性や、ブラウザーの実装を尊重する形で仕様がまとめられました。この仕様はHTML 3.2として、1997年1月にW3C勧告として発行されました[^7]。

[^7]: https://www.w3.org/TR/2018/SPSD-html32-20180315/

HTML 3.2では、HTML 2.0の要素に加え、RFC1942の`table`要素が取り込まれたほか、`font`要素や`align`属性など、文書の見た目を制御する機能が多数追加されました。これらの多くは、当時、すでにブラウザーベンダーによって独自に実装されていたものを、仕様側に取り込んだものです。

なお、HTML 3.2も、HTML 2.0と同様に、正式には日本語の文字が扱えない仕様となっています。ほぼ同時期に完成したRFC2070の国際化の機能は、HTML 3.2には取り込まれませんでした。

また、ほぼ同時期である1996年12月には、「スタイルシート」(style sheet)の仕様であるCSS1[^6]もW3C勧告となっています。スタイルシートは、文書の見た目を定義するもので、複数の要素の見た目を同時に制御できたり、HTML文書から見た目の情報を切り離せるなどのメリットがあります。

[^6]: Cascading Style Sheets, level 1 <https://www.w3.org/TR/REC-CSS1/>

しかしHTML 3.2は、正式にはスタイルシートを扱うことのできない仕様でした。スタイルシートを扱う`style`要素は予約語とされているだけで、定義はされていません。

#### コラム: W3Cと勧告トラック

W3Cが発行する仕様は、ワーキンググループ（Working Group、WGと略される）で議論され作成されます。W3CにはHTML WGのほか、スタイルシートの仕様を策定するCSS WG、アクセシビリティガイドラインを策定する AG WG (Accessibility Guidelines Working Group) など多数のワーキンググループが存在します。

W3Cが発行する、標準に相当する安定した仕様を「勧告」(recommendation)と呼びます。ある文書が勧告になるには、W3Cプロセス文書と呼ばれる文書に則って、仕様を安定させていく必要があります。これを勧告トラックとも呼びますが、仕様の安定度合いに応じて、大きく3つの段階に分類できます。

表 1.4-2 勧告トラックにあるW3C技術文書の主要なステータス

| 略称 | ステータス               | ステータスの説明                                                                                                                                                      |
|------|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| WD   | Working Draft            | 作業草案と訳されるもの。W3C仕様の設計段階。ワーキンググループでの議論の結果によっては、大きく内容が変更されることがある。                                             |
| CR   | Candidate Recommendation | 勧告候補。数回のWDの改訂を経た、WDと比較して安定した段階。古いW3Cプロセス文書にあったLC（Last Call Working Draft; 最終作業草案）は現在、このCRに吸収されている。この段階になると、実装の呼びかけと仕様のテストが行われる。CRを終了するには、2つの独立した実装が必要となる。 |
| REC  | Recommendation           | 勧告。W3C仕様の最終段階でディレクターに承認された、完成した仕様。RECになる前にはPR（Proposed Recommendation; 勧告案）という段階がある。                               |

ほかに、よく目にする2つのステータスがあります。

表 1.4-3 W3C技術文書のその他のステータス

| 略称 | ステータス         | ステータスの説明                                                                                                                                                                      |
|------|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| NOTE | Working Group Note | W3Cノートとも呼ばれる。勧告化を断念したものや、有益な参考情報、勧告を説明する付属文書など。                                                                                           |
| ED   | Editor's Draft     | 編集者草案とも訳される。W3Cの公開プロセスを経ていない、仕様の編集者によって適宜更新される文書。最新の作業中の草案であるが、ワーキンググループの合意を得た文書でないことに注意が必要。 |

Editor's Draftは、かつては限られた人しか見ることができませんでしたが、後述のWHATWG Living Standardの影響を受け、今日では多くのW3Cワーキンググループで公開されています。

### HTML4

その後、1997年12月にW3Cの勧告となったのがHTML 4.0です[^7]。

[^7]: https://www.w3.org/TR/REC-html40-971218/

HTML4では、HTML 3.2で予約されているだけだった`style`要素や`script`要素があらためて定義され、正式にスタイルシートやJavaScriptが使えるようになりました。

スタイルシートを利用すると、文書の見た目の定義をHTML文書から分離できます。見た名はスタイルシートで制御することが推奨され、見た目を制御するHTMLの要素や属性、たとえば`font`要素や`align`属性などは「非推奨」(deprecated)とされました。

HTML 4.0では、要素の定義自体を大きく"Strict"と"Transitional"の2つにわけ[^8]、前者では見た目に関する要素や属性が使えない厳密な枠組み、後者ではそれらが使える緩やかな枠組みとし、互換性を重視する場合には見た目の要素も使用できる形をとりました。

[^8]: もうひとつ、フレーム分割された文書を定義するためのframeset文書という定義も存在しました。

そして、大きく取り上げられたのが「アクセシビリティ」(accessibility) に関する要素です。フォーム部品にラベルをつけるための`label`要素が定義され、代替テキストを表す`img`要素の`alt`属性が必須となりました。また、HTML4仕様からはWCAG (Web Content Accessibility Guidelines)が参照され、アクセシビリティ上の注意点にも言及されるようになりました。WCAGについては、Chapter1-3で詳しく説明します。

その後、1999年に、マイナーな改訂版であるHTML 4.01[^9]が勧告となりました。これをもって、HTMLは成熟したSGMLアプリケーションとして成立し、いったんは円熟期を迎えました。

[^9]: https://www.w3.org/TR/html401/

## XHTML 1.0 と XHTML 1.1

HTML4の勧告の後、1998年には「XML」(extensible markup language) の仕様が勧告となります[^10]。XMLは、SGMLからいくつかの機能を取り去り、同時にマークアップのルールを厳密にすることで、プログラムが扱いやすくした汎用マークアップ言語です。

[^10]: https://www.w3.org/TR/xml/

先に触れたように、SGML文書をパースするにはDTDが必要でした。これは、DTDの内容が文書の字句的ルールに影響するためです。たとえば、ある要素の終了タグが省略できるかどうかはDTDの中で決まります。DTDの内容次第で

が、文書のフォーマットを定義する側にとって、DTDを記述するのは骨の折れる仕事です。

XMLではルールを厳密化し、字句的ルールがDTDの影響を受けないようにしました。たとえば、要素の終了タグは常に省略できないと決められ、DTDによって省略可否が変わることはありません。これにより、DTDがなくても字句解析ができるようになりました。XMLの字句的ルールを満たすXML文書を「整形式」(well-formed)と呼びます。

XML 1.0の仕様が勧告になると、XMLブームとも言える状況が沸き起こり、さまざまなプログラムがXMLを扱うようになりました。そんな中、HTMLもXMLで再構築しようという流れが出てきます。

こうして、XMLの仕様に則ったHTMLの仕様として、XHTML 1.0が2000年に勧告となりました[^10]。新たな要素は追加されておらず、HTML 4をそのままXHTMLにしたものです。

その後、XMLのもつ拡張性という側面を生かし、XHTMLをモジュール化しようという試みがありました。こうして、2001年にXHTML 1.1が勧告となります[^11]。この際には`ruby`モジュール[^12]が追加され、文字にルビをふることができるようになりましたが、基本的な部分の要素は、HTML 4と変わらないものでした。

## コラム: 幻の XHTML 2.0

XHTMLを使うことで、HTML4の要素をXMLの文法で書くことができるようになりました。しかし、既存の要素はほとんどそのままでした。

次世代の仕様として、これを大きく見直そうとしていたのがXHTML 2.0です。要素の分類や定義を根本から見直し、新しく定義しようと試みましたが、現在のウェブとの互換性がない仕様であったため、主にウェブブラウザーの開発者からは反発を生むことになりました。

仕様はまとまらず、2009年には仕様策定の打ち切りが決まりました。こうして、XHTML 2.0は幻の仕様となりました。


[^10]: https://www.w3.org/TR/xhtml1/

[^11]: https://www.w3.org/TR/xhtml11/

[^12]: Ruby Annotation <https://www.w3.org/TR/ruby/>
