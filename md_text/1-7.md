<!-- ch1-7_test.md.txt (4ページ、3000～4600字想定) -->

# 仕様を読むことの有用性

これまでに仕様の読み方について説明しましたが、そもそも、なぜ仕様を参照することが重要なのでしょうか。この節では、HTMLについて調べるいくつかの方法を比べながら、あえて仕様にあたる意義を考えます。

## ウェブ技術について調べるいくつかの方法

ウェブ技術に関して何かわからないことがあったとき、読者の皆さんはどのように調べるでしょうか。方法はいくつかあります。

### 検索エンジンで調べる

検索エンジンで知りたい項目を検索すれば、答えが書かれていそうなウェブページが出てきます。手軽に調べられますし、一つの方法としてはありでしょう。

この方法の問題点は、そのウェブページが信頼できるのかどうか、という点です。ウェブページの中には、正確でない情報や、古い情報が記載されているものもあります。企業運営のように見えるサイトに不正確な情報が載っていることもあります。

また、検索エンジンは日本語で検索した場合、通常は日本語の情報が優先され、仕様書を含む英語で書かれている情報書にたどり着けないこともあります。

### MDNで調べる

ウェブ技術についてはMDN Web Docs（通称MDN）を調べてみる、という方もいるでしょう。以前はMozilla Developer Networkと呼ばれていたもので、こちらの名前で覚えている方もいるかもしれません[^1]。

MDNはたとえるならば、ウェブ技術に特化したWikipediaのようなものです。MDNには、ウェブ技術に関するさまざまな情報が集約されており、英語版と、日本語を含む各国語に翻訳された版があります。記事によって内容の質や量にばらつきはありますが、中立的な情報が記載されており、実際に役立つ場面が多々あります。

その一方で、英語版と比較したときに翻訳である日本語版が古い場合や、ときには原文である英語版そのものの内容が現状よりも古い場合があります。記事の最終更新日に注意することである程度判断できますが、更新日が最近だからといって、記事の内容すべてが最新の情報に更新されているという保証はありません。

なお、MDNはwikiという誰でも編集できるシステムになっていましたが、現在はGitHubベースのシステムに移行しています。2020年12月時点では日本語版の編集は凍結されているものの、準備が整い次第GitHubベースのシステムでの編集が再開される見込みです[^2]。

[^1]: 名前の変更の経緯はMozilla Blogの記事で読むことができます。 <https://blog.mozilla.org/opendesign/future-mdn-focus-web-docs/>

[^2]: An update on MDN Web Docs’ localization strategy <https://hacks.mozilla.org/2020/12/an-update-on-mdn-web-docs-localization-strategy/>

### 書籍を読む

HTMLについて解説している書籍も世の中に存在します。もちろん、本書もそのひとつです。

書籍は、あるテーマに沿って体系的に内容がまとまっています。そのため、通読することで一通りの知識を網羅的な習得することが期待できます。教育機関や組織内で教科書や参考書として使われることもあるかもしれません。物理的に手に取れる紙の書籍の場合、一覧性やオフラインで利用できる強みもあります。

書籍の欠点は、紙面が限られるために情報量に制約があることと、リアルタイムの更新ができないことです。情報が古くなっていることがありますので、発行年にも注意しましょう。

### ブラウザーの動作を確認する

たとえばHTMLについて調べたい場合、実際にHTMLを書いてブラウザーで表示させてみる方法も考えられます。プログラミング言語に精通していれば、ウェブブラウザーのソースコードを見て挙動を把握することも考えられるでしょう。

このこと自体に意味はありますが、あくまで特定のブラウザーでの実装の調査となることに注意してください (仕様と実装については後述します)。同じ製品のブラウザーであっても、異なるバージョンで同じ動作をするとは限りません。また、OSが異なれば挙動が異なることもあります。さらに、他のブラウザーでも同様に動作するとは限りませんし、世の中にはブラウザー以外のユーザーエージェントもあります。そういった環境でも正しく解釈できるかどうかはまったくわかりません。

また、1-3節でも述べたように、ブラウザーは不適切なマークアップであっても表示しようと試みます。以上のことから、ブラウザーで表示できているということは、マークアップが適切であるということを意味しません。

### 仕様書に当たる

最後に強調したいのが、HTMLの仕様書に当たる方法です。

HTMLに限らず、仕様書はウェブ技術の大元になっている文書です。詳しくは後述しますが、基本的にはこの仕様を参照してウェブブラウザーなどの実装は作られています。正確な仕様を確認したければ、大元の仕様書に当たるのが最も確実な方法です。

また、HTML標準の場合は、Living Standardとして常に最新の情報になっているので、内容が古いことも原理的にはありません。

その一方で、誰にでも仕様書に当たることを奨めるものではありません。仕様書を読むに当たっては、一定の技術的な前提知識と、仕様書の構造の理解が必要です。本書では、それらの知識や理解を提供しつつ、このHTML仕様書にたどり着くことを大きな目標の1つとしています。

## 仕様と実装

「仕様」(specification)は、いわば設計書にあたるものです。その設計に基づき、実際に動くものを作ることを「実装」(implementation)と呼びます。

ブラウザーの例で言えば、どのように動作するべきかというルールをまとめた設計書が仕様であり、実際にプログラミングして、動作するソフトウェアを作ることが実装にあたります。

仕様を公開して共有するのは、「相互運用性」(interoperability) を確保するためです。相互運用性があれば、ある特定の実装で動作する機能は、別の実装でも同じ動作をしてくれるはずです。相互運用性がないと、実装によって動作が異なる場合が出てきてしまいます。

### 仕様と実装が食い違うケース

時には、仕様と実装が食い違ってしまうこともあります。

たとえば、かつてのHTML4仕様はSGMLアプリケーションとして定義されていましたが、その時に存在していたブラウザーのほとんどは、SGMLの機能を正確には実装しておらず、空タグのような短縮タグ機構をはじめとする、SGMLのさまざまな機能に対応していませんでした。HTML4の仕様が想定する挙動と、実際のブラウザーの挙動が異なっていたのです。

仕様と実装が食い違っている状況は、望ましくありません。この状況では、HTMLを実際に仕様通りに書いても、意図した結果にならないことがあります。コンテンツ制作者は、仕様を読むだけでは足りず、個々のブラウザーの実装にも精通する必要がでてきてしまいます。

### 仕様が先か、実装が先か

現在のHTMLは、仕様と実装の食い違いという問題に正面から取り組んでいます。

基本的に、ウェブブラウザーの実装者は、仕様書を基に実装します。しかし、仕様と異なる実装が主流になっているような状況であれば、逆に、仕様書のほうを実装に合わせるという考えもあるのです。卵が先か、鶏が先かという話に似ていますが、ウェブの仕様と実装は車の両輪のようなもので、どちらかが欠けても成り立ちません。

現在のHTMLの仕様には、実際のブラウザーの挙動から取り込んだ内容が多数含まれています。特にエラー処理の際などに、奇妙に見える振る舞いをするケースが多々ありますが、そのほとんどはブラウザーの実際の振る舞いを取り込んだものです。

複数のブラウザーの実際の動作と仕様書の内容がほぼ一致していると言えるなら、仕様書は信頼し得る文書だと言うことができます。

## なぜ仕様に当たるのか

本書では、仕様に当たることを強く推しています。それは、仕様こそが1次資料であるからです。

技術的な文章を書く際には、他の文章を参照したり引用したりして、書き進めていくことになります。では、マークアップについて何か書くとき、何を根拠に書き進めるのが良いでしょうか。

このとき、直接の情報となる1次資料、1次資料を要約した2次資料（書籍など）、さらに2次資料を要約した3次資料（百科事典など）を当たることになると思います。

もちろん、この本を頼りに書いてもらえれば、筆者として嬉しいことこの上ありません。しかし、書籍は2次資料に過ぎません。HTMLであれば仕様書が1次資料になり、これが最も直接的な情報源となります。また、前述したように、現在の仕様は実装との連携もよく取れており、信頼のできる情報源であると言えます。

さらに、これも前述したようにHTML仕様は変化していきます。残念ながら、本書の内容は発売と同時に、日に日に色褪せて行くことになるでしょう（もちろん、時代の流れにある程度耐えうる内容を目指してはいますが）。したがって、更新され続けるHTML仕様を参照することを強く勧めます。

何か文書を書くときを例に挙げましたが、マークアップにまつわる文書を読むときでも、疑問に感じることがあれば、HTML仕様と見比べてみることで、その文書が信頼に値するかどうかを確かめることもできます。

## コラム: 仕様を超えていく

クリエイティブ・コモンズ・ジャパン理事である水野祐氏の著書、『法のデザイン』にこんな一節があります。

> 大切なことは、ルールは時代とともに変わっていく／変わっていくべきという認識と、ルールを「超えて」いくというマインドである。ルールを超えていくことは、ルールを破ることを意味しない。ルールがどうあるべきかということを主体的に考えて、ルールに関わり続けていくと言うことを意味する。ルールを最大限自分寄りに活かすことは知性の証明に他ならない。

『法のデザイン』で述べている「ルール」は法律を主眼に置いていますが、これをそのままウェブ制作の「ルール」である仕様に置き換えて見るとどうでしょうか。筆者としては腑に落ちるものがあるのですが、読者の皆さんはいかがでしょうか。

これまでに繰り返し述べたように、今日のHTML仕様であるWHATWG HTMLはLiving Standardという名前のとおり、日々変化していきます。前時代のように、W3C勧告でずっとそのままだった、というのがむしろ特殊な状況でした。仕様は変わり続けていくという認識を持つのが肝要です。

そして、仕様を超えていくという意識が重要であります。ウェブ制作に関するすべての事柄が仕様に書いていることはないですが、仕様として定められている先にあるものをウェブ制作者は掴み取りに行く姿勢が求められると考えます。これは、HTMLであれば、HTML仕様と、実装やW3Cなどが発行する別の仕様に書かれた内容との間で差異があるのかどうか、ときには同じ要素や属性に関して相反する内容を吟味した上で、どうマークアップするべきかということを、能動的に考えて続けていく必要があるということです。

仕様を十分把握した上で、仕様を最大限自分の味方に付けることは、ウェブ制作者の目指すべき1つの極致であるといえるでしょう。本書が、読者の皆さんをHTML仕様に誘い、その向こう側へたどり着く羅針盤となれば幸いです。
