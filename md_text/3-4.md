<!-- ch3-4.txt (4ページ、3000～4600字想定) -->
# テキストレベルセマンティックス

この節では、30ほど存在する、主にテキストをマークアップすることを目的とした要素を紹介します。

## `a`要素

`a`要素は、「アンカー」(anchor) を表現する要素です。多くの場合は`href`属性を指定して利用します。`href`属性を指定した場合、この要素はハイパーリンクとして機能します。

`href`属性に指定できる値は、「潜在的にスペースで囲まれた妥当なURL」(valid URL potentially surrounded by spaces)です。先頭と末尾のASCII空白文字は取り除かれます。たとえば、以下の2つの`a`要素は同じ意味になります。

```html
<a href="https://www.example.com/">Example Domain</a>
<a href="
    https://www.example.com/
">Example Domain</a>
```

引用符の内側にある先頭と末尾のスペースは基本的には不要です。通常はスペースを入れずに書いた方が良いでしょう。

`href`属性値を`#top`とした場合、現在のページの最上部へのリンクとして機能します。これは、仕様に定められた挙動です[^1]。ただし、`id="top"`がページ内に別に存在する場合は、その場所へのリンクとなります。

[^1] https://html.spec.whatwg.org/multipage/browsing-the-web.html#scroll-to-fragid

<!-- 内容モデル -->
`a`要素の内容モデルは"Transparent"で、親要素の内容モデルを引き継ぎます。HTML4では、`a`要素の中に`div`,`p`,`h1`などの要素を入れることはできませんでしたが、HTML5では見出しや段落などをまるごとリンクにすることも可能です。

```html
<body>
<a href="/product/01">
    <h1>商品名</h1>
    <p>説明文</p>
</a>
</body>
```
<!-- /内容モデル -->

<!-- a11y note -->

ただし、スクリーンリーダーではリンクテキストが全て読まれることに注意してください。

<!-- / a11y note -->

`download`属性が存在する場合、`href`属性で示されたリソースをダウンロードします。`download`属性の値はダウンロード時のファイル名となります。属性の値に制限はありませんが、OSの制約でファイル名に使用できない文字は、削除されたり置換されたりすることがあります。

`target`属性が存在する場合、リンク先URLを表示する場所を指定します。値はブラウジングコンテキスト（タブ、ウィンドウ、`iframe`要素の名前、またはキーワード）です。`traget`属性のキーワードには`_blank`、`_self`、`_parent`、`_top`の4つが存在します。このうち`_blank`は、新しいブラウジングコンテキスト（通常はタブ）にURLを読み込みます。

### href属性を持たないa要素

通常、`a`要素は`href`属性を持ちますが、文法上は`href`属性を持たなくても良いことになっています。

```html
<a>リンクになるかもしれないテキスト</a>
```

この場合、ハイパーリンクとしては機能しませんが、スクリプトによって後から`href`属性を付与することが可能です。また、以下のようにid属性を指定し、リンク先として機能させることもできます。

```html
<h1><a id="midashi">見出し</a></h1>
```

ただし、これは単に以下のように書けば事足りるでしょう。

```html
<h1 id="midashi">見出し</h1>
```

このような書き方は、非常に古いHTMLでid属性が使えなかった頃の名残です。当時は`a`要素に`name`属性を指定することで、ページ内リンクのリンク先を示していました。現在でもフラグメントIDを「アンカー」と呼ぶことがありますが、それは当時`a`要素(アンカー)が使われていた頃の名残です。HTML5では、`a`要素の`name`属性は廃止されています[^2]。

[^2]: コンテンツ制作者は`name`属性を使うべきではありませんが、ブラウザ側は互換性のために`name`属性を解釈します。 <https://html.spec.whatwg.org/multipage/obsolete.html#obsolete-but-conforming-features>

最後に、ボタンのような挙動を想定したリンク

```
<p><a href="#" oncleck="...">実行</a></p>
<p><a href="javascript:void(0);" oncleck="...">実行</a></p>
```

のようなコードに遭遇することがありますが、このように書くのは`a`要素本来の意味であるハイパーリンクとは異なる使い方ですので、このように書いてはなりません。ボタンは`button`要素を使用します。


## `em`要素

`em`要素は、強調を表します。この要素は、使用することで文の意味を変化させます。具体的にどのように変化するのか、まずは事実を示す強調のない文を例として示します。

```
<p>猫はかわいい動物です。</p>
```

例えば、主語を強調することによって、動物の種類が問題である（おそらく誰かが犬はかわいいと言っている）ことを意味します。

```
<p><em>猫</em>はかわいい動物です。</p>
```

ここでは追加の例を示しませんが、別の語に強調を移動することで、何を問題としているのかが変化します。

さて、文全体を強調することで、言いたいことを伝えるために懸命であることを明らかにします。この種の強調は、句点を感嘆符にするかもしれません。

```
<p><em>猫はかわいい動物です！</em></p>
```

`em`要素を入れ子にすることで、より強いレベルの強調を与えることができます。

`em`要素はイタリック体（斜体）のための要素ではありません。英語のようなアルファベット主体の言語において、慣用的にイタリック体にする必要がある、文の一部に対して、`i`要素が適切かもしれません。

`em`要素は重要性を伝えません。この目的に対しては`strong`要素が適切です。


## `strong`要素

`strong`要素は、重要性、深刻性、または緊急性を表します。

重要性：文から本当に重要である部分を区別するために、見出し、キャプション、または段落で使用できます。

```
<p><strong>酸性タイプ</strong>の製品と一緒に使う（まぜる）と有害な塩素ガスが出て<strong>危険</strong>。</p>
```

深刻性：警告または注意の通知をマークアップするために使用できます。

```
<p><strong>注意。</strong> テレビを見るときは、部屋を明るくして、なるべくテレビから離れて見てね。</p>
```

緊急性：ユーザーが文書の他の部分よりも早く確認する必要があるコンテンツを示すために使用できます。この例において、`strong`要素は、ユーザーが最初に読むことを意図するテキストの一部を示すために使用されます。

```
<p>リマインダー</p>
<p>今日のタスク:</p>
<ul>
 <li><p><strong>オーブンの電源を切る。</strong></p></li>
 <li><p>ごみを出す。</p></li>
 <li><p>洗濯する。</p></li>
</ul>
```

`em`要素と同様に、入れ子にすることで相対的なレベルを与えることができます。

`strong`要素は、もはや古いHTMLで定義されていたような強調を表す要素ではありません。この目的には、`em`要素が適切です。


## `small`要素

`small`要素は、小さな活字体などの副次的なコメントを表します。
```
<p>しょうゆ 198円<small>（税込み）</small>
```
よく著作権の帰属表示（Copyright）に用いられるシーンが多いです。
```
<p><small>© ボーンデジタル</small></p>
```


## `s`要素

`s`要素は、正確ではないか、もはや関連しないコンテンツを表します。ブラウザーのデフォルトスタイルシートで同じ打ち消し線を持つことから、`del`要素と混同するかもしれませんが、`del`要素はコンテンツの削除を表します。`s`要素の使用例としては価格の値下げを挙げることができます。

```
<p>ゲーミングキーボード</p>
<p><s>希望小売価格 15000円</s></p>
<p>セール価格 9800円</p>
```


## `cite`要素

`cite`要素は、作品のタイトルを表します。作品は、書籍、楽曲、映画、ゲームなどといった著作物かもしれませんし、パンクシー作とされる落書きのようなものかもしれません。この要素はあくまで作品名のためのものであって、著者名のためのものではないことに注意してください。

例えば、SIST 02『参照文献の書き方』[^1]に従った文献情報は、次のようにマークアップされるでしょう。

```
<p>Berners-Lee, Tim. <cite>Web の創成 World Wide Web はいかにして生まれどこに向かうのか</cite>. 高橋徹監訳. 毎日コミュニケーションズ, 2001, 279p.</p>
```

[^1]: https://jipsti.jst.go.jp/sist/handbook/sist02_2007/main.htm


## `q`要素

`q`要素は、別のソースから引用されたフレージングコンテンツを表します。

この要素を用いるときは、かぎ括弧のような引用を示す引用符をこの要素の直前や直後、内部で使ってはなりません。そのような引用符は、ユーザーエージェントが自動的に挿入します。また、引用符が自動的に挿入されるからといって、引用ではないものに対して、引用符を付けるために使用してはいけません。

<!--もしかしたらblockquoteとの対比が有効かもしれない。-->

```
<p>松尾芭蕉が<q>五月雨を集めて早し最上川</p>と詠った最上川は…</p>
```


## `dfn`要素

`dfn`要素は、用語の定義の実体を表します。同時に、この要素の最も近い祖先要素となる段落、説明リストのグループやセクションで、その用語の定義を含めなければなりません。

用語の定義は、`dfn`要素が`title`属性を持つ場合はその`title`属性が、子`abbr`要素が`title`属性を持つ場合はその`title`属性が、それ以外の場合は`dfn`要素で囲まれたテキストが定義になります。

```
<!-- title属性の値、炭酸水素ナトリウムが定義 -->
<p><dfn="炭酸水素ナトリウム">重曹</dfn>は、常温で白い粉末です。</p>

<!-- dfn要素で囲まれたテキスト、dfnが定義 -->
<p><dfn><code>dfn</code></dfn>要素は、用語の定義を表します。</p>
```


## `abbr`要素

`abbr`要素は、略語や頭字語を表します。もし`title`属性がある場合は、属性の値が完全表記を表します。

```
<abbr title="World Wide Web Consortium">W3C</abbr>
<abbr title="日本銀行">日銀</abbr>
```


## ルビ関連要素

`ruby`、`rb`、`rt`、`rtc`要素はそれぞれ、ルビ注釈を付けるための要素です。`ruby`はルビの範囲を、`rb`はルビの対象となる文字（親文字）、`rt`はルビ、`rtc`はルビのコンテナをそれぞれ表します。

```
<!-- 単純ルビの例 -->
<ruby><rb>東京</rb><rt>とうきょう</rt></ruby>

<!-- 両側ルビの例 -->
<ruby><rb>東<rb>南<rt>とう<rt>なん<rtc><rt>tou<rt>nan</rt></rtc></ruby>の方角
```

2020年時点でHTML標準では`rb`要素および`rtc`要素はdeprecated（旧式の機能）と記載されており、一方W3C HTML 5.2では正式な要素として定義されていました。これらの要素に関してはHTML標準にも取り込まれるよう、継続して議論が行われています。


## `data`要素

`data`要素は機械読み取り可能な形式を表します。次の例は、書籍の名前とISBNコードを結びつけています。

```
<data value="978-4-86246-460-6">実践！ユニティちゃん トゥーンシェーダー2.0 スーパー使いこなし術</data>
```
<!--https://www.borndigital.co.jp/book/15564.html-->

コンテンツが日付や時刻などの場合は、専用の`time`要素を利用します。


## `time`要素

`time`要素は、機械読み取り可能な形式で、日付や時刻などの値を表します。機械読み取り可能な形式は、もし`datatime`属性があれば属性値で、そうでなければ要素の子テキストコンテンツで表します。例えば、2017年1月23日という日付は機械読み取り可能な形式では`2017-01-23`と表せるので、次のようにマークアップできます。

```
<!--日付-->
<time>2017-01-23</time>
<time datetime="2017-01-23">2017年1月23日</time>
```
機械読み取り可能な形式は様々なものがあります。以下に代表的なものを取り上げますが、正確なルールとパターンは、仕様を参照してください。
```
<time>2017-01</time><!--（ある年の）月-->
<time>01-23</time><!--年なしの日付-->
<time>14:56</time><!--時刻-->
<time>2017-08-29T01:23:45</time><!--日付と時刻-->
<time>-0600</time><!--タイムゾーンオフセット-->
<time>0789</time><!--年-->
```

## `code`要素

`code`要素は、コンピューターコードを表します。この文は、次のようにマークアップできます。

```
<p><code>code</code>要素は、コンピューターコードを表します。
```

ここでは単純な例を示しますが、`pre`要素とあわせてまとまったコードを表すこともできます。

```
<pre><code>console.log('Hello, World')</code></pre>
```

## `var`要素

`var`要素は数式やプログラムコードでの変数を表します。
```
<p><var>n</var>は自然数です。
```

本書では扱いませんが、数式を表したい場合はMathMLと呼ばれるマークアップ言語を用いて表すこともできます。


## `samp`要素

`samp`要素は、コンピュータープログラムなどの出力を表します。
<!--とりあえずWindowsのエラーメッセージを-->
```
<p>パソコンで<samp>ディスクがいっぱいです。</samp>というエラーメッセージが出ました。
```

## `kbd`要素

`kbd`要素はユーザーの入力（通常はキーボード入力）を表します。

```
<p>コピーのショートカットキーは、Windowsでは<kbd>Ctrl+C</kbd>、MacOSでは<kbd>command+C</kbd>です。
```

仕様では個別のキーをネストしてマークアップする例が挙げられていますが、複雑なスタイルを適用しないのであれば、上記の例で十分です。


## `sup`および`sub`要素

`sup`要素は上付き文字を、`sub`要素は下付き文字を表します。

```
<p>二酸化炭素はCO<sub>2<sub>と書き表せます。
<p>2<sup>8</sup>は256です。
```


## `i`要素

`i`要素は、典型的にイタリック体（斜体）で表されるような、通常のテキストとは異なる部分を表します。古いHTMLでは、イタリック体のための要素として定義されていました。

日本語における伝統的な組版では、イタリック体で文字を表現しません。`i`要素よりも適切な要素がないかどうかを検討すべきです。例えば、強調には`em`要素がよりふさわしい要素となります。

一部のウェブアイコンフォントで、iconの“i”というような使われ方で説明されていますが、HTML仕様では認められていません。そもそもの話として、アイコンフォントそのものが特にウェブアクセシビリティの観点から推奨されるものではありません。この目的のためには`span`要素を使用するのが適切です。

```
<!-- 不適切なアイコンフォント -->
<i class="fas fa-address-book"></i>
```

## `b`要素

`b`要素は、文章でのキーワードや記事リード文など、注目すべきテキストの範囲を表します。古いHTMLでは太字要素として定義されていました。重要性を表す目的では`strong`要素を使用します。
<!--もうちょっと説明が必要？-->

```
<h3>山登りの魅力について</h3>
<p><b>そこに山があるから</b></p>
<p>山ならではの四季折々の景色、街の喧騒を離れた自然、登山仲間との交流などなど、いろいろな魅力について記します。</p>
```

## `u`要素

`u`要素は、綴りの誤ったテキストなどを表します。これは著名なワードプロセッサーでスペルミスのある単語に対して下線が引かれているシーンを思い浮かべると納得できるかもしれません。古いHTMLでは単に下線を引く要素として定義されていました。日本語では、漢字の誤りなどに使えるかもしれませんが、大多数のサイトで適切にこの要素を使用できているのかは疑問であると考えられますので、この要素を使用しないことを勧めます。

<!--もっと説明する-->

## `mark`要素

`mark`要素は、文章のコンテキストとは別の観点で、参照を目的としたテキストのハイライトに使用されます。例えば、引用文の引用者による強調や、ウェブサイトの検索窓からの検索結果を表示するページ上で、検索した語句をハイライトするためなどに使用できます。この要素はいわば、文章中に興味のある箇所について、読者が蛍光ペンでマークするようなものです。

```
<p>mark要素のHTML仕様訳によれば、この要素は次のように定義されます。</p>
<blockquote>
<p>mark要素は、別のコンテキストにおいて関連性のために、<mark>参照目的でマークまたは強調表示される</mark>ある文書内の一連のテキストを表す。引用文または文から参照されるテキストのブロック内で使用される場合、ブロックが元々書かれた際に、元々存在しないが、<mark>オリジナルの著者によって重要だと考えられていないかもしれない</mark>だろう、<mark>テキストの一部に読者の注意を喚起する</mark>ために追加されたハイライトを示す。</p>
</blockquote>
<p>※mark要素でのマークアップ部分は引用者による強調です。</p>
```


## `bdi`要素と`bdo`要素

`bdi`要素は、異なる書字方向を設定するテキストの範囲を表します。書字方向について、例えば日本語の場合は左から右ですが、アラビア語のような言語では右から左となります。次の例では、アラビア語の範囲を明示的に`bdi`要素でマークアップすることにより、ブラウザーに対して明確に異なる書字方向の範囲を伝えます。

```
User <bdi>إيان</bdi> : 2012/12/26
```

`bdo`要素は、テキストの書字方向規則を明示的に上書きします。`dir`属性として、左から右への上書きを指定する`ltr`か、右から左への上書きを指定する`rtl`のいずれかを指定します。

```
User <bdo dir="rtl">إيان</bdo> : 2012/12/26
```

`bdi`要素と`bdo`要素のどちらを使うのかよいのかなど、より深い書字方向の設定については、W3C i18n文書[^2]を参照ください。

[^2]: Inline markup and bidirectional text in HTML https://www.w3.org/International/articles/inline-bidi-markup/


## `span`要素

`span`要素はそれ自身では何の意味も持たない、汎用のコンテナです。`div`要素がまとまったフレーズなどのために用意されるのに対し、`span`要素は文の一部のフレーズなどに使用します。例えば`class`や`lang`、`dir`などのグローバル属性と一緒に使用する場合に役立ちます。

たいていの場合、他の要素がより適切なことがあります。より適切な要素がほかにないか検討してみてください。
<!--検討するためのフローチャート？のようなものがあるとよいのかもしれません。-->

次の例は、コンピューターコードを色付けする（シンタックスハイライト）ために、`span`要素と`class`属性を使用している例です。

<!--はてなダイアリー風HTML断片-->
```
<pre class="syntax-highlight"><code>
<span class="synComment">&lt;!doctype html&gt;</span>
<span class="synIdentifier">&lt;</span><span class="synStatement">html</span><span class="synIdentifier"> </span><span class="synType">lang</span><span class="synIdentifier">=</span><span class="synConstant">&quot;ja&quot;</span><span class="synIdentifier">&gt;</span>
</code>
</pre>
```


## `br`要素

`br`要素は改行を表します。例えば、住所は行を区切って表示することで読みやすくなるわけですから、`br`要素で表すことは適切と言えます。

```
<p>
〒102-0074<br>
東京都千代田区<br>
九段南一丁目5番5号<br>
九段サウスサイドスクエア（旧 Daiwa九段ビル）
</p> 
```

`br`要素の直後で改行しておくと、HTMLでの可読性も担保されると言えるでしょう。

ところで多くの場合、`br`要素は濫用される傾向にあります。段落の内容のトピックが変わるのであれば、それは新しい段落で表すことが適切であり、`br`要素は不適切と言えます。

<!-- LSより濫用の例 -->
```
<!-- 濫用されている例 -->
<p><a ...>34件のコメント</a><br>
<a ...>コメントを追加する</a></p>

<p><label>名前: <input name="name"></label><br>
<label>住所: <input name="address"></label></p>

<!-- 適切な例 -->
<p><a ...>34件のコメント</a></p>
<p><a ...>コメントを追加する</a></p>

<p><label>名前: <input name="name"></label></p>
<p><label>住所: <input name="address"></label></p>
```

余白を設けるために`br`要素を連続で複数用いてはなりません。そのような見た目の制御はCSSを用います。

```
<!-- 悪い例 -->
<p>段落の下に余白を作る<br>
<br>
<br>
</p>
```

## `wbr`要素

`wbr`要素は改行の機会を表します。例えば、長いURLが存在するときに、この要素のある適当な位置で改行されることが期待できます。

<!--MDNからコード例をお借り。より良い例があれば苦心。 https://developer.mozilla.org/ja/docs/Web/HTML/Element/wbr -->
```
<p>http://this<wbr>.is<wbr>.a<wbr>.really<wbr>.long<wbr>.example<wbr>.com/With<wbr>/deeper<wbr>/level<wbr>/pages<wbr>/deeper<wbr>/level<wbr>/pages<wbr>/deeper<wbr>/level<wbr>/pages<wbr>/deeper<wbr>/level<wbr>/pages<wbr>/deeper<wbr>/level<wbr>/pages
</p>
```